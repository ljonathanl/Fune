import{r as e,e as t,o as a,a as n,b as l,c as r,d as s,u,f as c,g as o,w as i,h as d,v as m,i as p,j as y,F as f,k as g,t as h,l as b,m as x,n as v,p as _}from"./vendor.360fa968.js";!function(e=".",t="__import__"){try{self[t]=new Function("u","return import(u)")}catch(a){const n=new URL(e,location),l=e=>{URL.revokeObjectURL(e.src),e.remove()};self[t]=e=>new Promise(((a,r)=>{const s=new URL(e,n);if(self[t].moduleMap[s])return a(self[t].moduleMap[s]);const u=new Blob([`import * as m from '${s}';`,`${t}.moduleMap['${s}']=m;`],{type:"text/javascript"}),c=Object.assign(document.createElement("script"),{type:"module",src:URL.createObjectURL(u),onerror(){r(new Error(`Failed to import: ${e}`)),l(c)},onload(){a(self[t].moduleMap[s]),l(c)}});document.head.appendChild(c)})),self[t].moduleMap={}}}("/assets/");const w="human",T="bank",A="grew",C="melt",D={day:"day",month:"month",year:"year"},M={day:1,month:60,year:360};let k=0,S={};const P={name:"fÜne",logo:"fї",uValue:1e3,isPlaying:!1,doTx:(e,t=!0)=>{let a=Object.assign({from:"",to:"",message:"",value:0,date:(new Date).toISOString(),day:S.currency.elapsedTime},e);var n=S.accounts[a.from],l=S.accounts[a.to];return a.value<=0||!n||!l||n==l||n.role!=T&&n.balance-a.value<0?null:(l.role!=T&&(l.balance+=a.value),n.role!=T&&(n.balance-=a.value,n.balance<10&&(n.balance=0)),a.balanceFrom=n.balance,a.balanceTo=l.balance,S.transactions.push(a),S.transactions.length>1e3&&(S.transactions=S.transactions.slice(S.transactions.length-1e3)),t&&q(),a)},getCurrency:()=>Object.assign({},S.currency),updateCurrency:e=>{const t=P.isPlaying;return t&&P.stop(),Object.assign(S.currency,e),t&&P.play(),Object.assign({},S.currency)},getAccount:e=>S.accounts[e],getAccounts:()=>Object.values(S.accounts),createAccount:e=>{if(e.name=e.name.trim(),!e.name||S.accounts[e.name])return null;let t=S.accounts[e.name]=Object.assign({name:"",balance:0,role:"wallet",date:(new Date).toISOString(),creationDay:S.currency.elapsedTime},e);return q(),t},updateAccount:(e,t)=>{let a=S.accounts[e];return!a||"bank"==a.role||t.name&&e!=t.name?null:(a=Object.assign(a,t),q(),a)},deleteAccount:e=>{let t=S.accounts[e];return t&&t.name!=P.name?(delete S.accounts[e],delete S.stats[e],q(),t):null},getAccountTx:(e,t)=>{if(!S.accounts[e])return null;let a=S.transactions.filter((t=>t.from==e||t.to==e));return t>0&&t<a.length&&(a=a.slice(-t)),a},getAccountStats:(e,t=D.day)=>{if((t=D[t])||(t=D.day),!S.accounts[e])return null;const a=S.stats[e];if(!a)return[];const n=a[t];if(!n)return[];if(S.currency.elapsedTime<M[t])return[n[0],n[0]];let l=(Math.floor(S.currency.elapsedTime/M[t])+1)%100;return l>0&&S.currency.elapsedTime<100*M[t]?n.slice(0,l):n.slice(l).concat(n.slice(0,l))},getState:()=>({currency:S.currency,accounts:S.accounts,transactions:S.transactions,stats:S.stats})},j={date:(new Date).toISOString(),stepTime:10,uPerDay:1,elapsedTime:0,revaluationTime:1,nbMembers:0,monetaryMass:0,mode:C,lastMelt:0,average:0,quantitative:1,expression:"10/100"};P.expressionParser=(e,t)=>parseFloat(e);const O=/!x(\d+)/,F=P.uValue,U=()=>({isStatMonth:S.currency.elapsedTime%M.month==0,isStatYear:S.currency.elapsedTime%M.year==0,statDayIndex:S.currency.elapsedTime%100,statMonthIndex:S.currency.elapsedTime/M.month%100,statYearIndex:S.currency.elapsedTime/M.year%100}),q=()=>{let e=0,t=0;const a=U();Object.values(S.accounts).forEach((n=>{const l=n.name.match(O);let r=1;l&&(r=parseInt(l[1])),n.role==w&&(t+=r),n.role!=T&&(e+=n.balance*r,((e,t,a=null)=>{a||(a=U());let n=S.stats[e.name];n||(n={},n[D.day]=new Array(100).fill(0),n[D.month]=new Array(100).fill(0),n[D.year]=new Array(100).fill(0),S.stats[e.name]=n),n[D.day][a.statDayIndex]=t,a.isStatMonth&&(n[D.month][a.statMonthIndex]=t),a.isStatYear&&(n[D.year][a.statYearIndex]=t)})(n,n.balance,a))})),S.currency.nbMembers=t,S.currency.monetaryMass=e,S.currency.average=t>0?Math.floor(e/t):0,((e=null)=>{e||(e=U());let t=Object.assign({},S.currency),a=S.stats[P.name];a||(a={},a[D.day]=new Array(100).fill(j),a[D.month]=new Array(100).fill(j),a[D.year]=new Array(100).fill(j),S.stats[P.name]=a),a[D.day][e.statDayIndex]=t,e.isStatMonth&&(a[D.month][e.statMonthIndex]=t),e.isStatYear&&(a[D.year][e.statYearIndex]=t)})(a)},I=(e=!0)=>{S.currency.elapsedTime++;let t=0,a=0;const n=S.currency.uPerDay>=0?Math.floor(S.currency.uPerDay):0,l=F*S.currency.revaluationTime*n,r=S.accounts[P.name],s=S.currency.elapsedTime%S.currency.revaluationTime==0;s&&S.currency.nbMembers>0&&(t=P.expressionParser(S.currency.expression,{M:S.currency.monetaryMass/l,N:S.currency.nbMembers,T:S.currency.elapsedTime}),S.currency.mode==A&&(t=1-1/(1+t)),t=Math.max(0,Math.min(1,t)),a=(100*t).toFixed(2)),Object.values(S.accounts).forEach((e=>{if(s&&t>0){let n=e.balance*t;n=Math.min(n>l?Math.ceil(n):Math.floor(n),e.balance),P.doTx({from:e.name,to:r.name,message:"!revaluation%"+a,value:n},!1)}e.role==w&&P.doTx({from:r.name,to:e.name,message:"!1Ucreation",value:F*n},!1)})),s&&(S.currency.lastMelt=a,S.currency.quantitative=S.currency.quantitative+1/(1/t-1)),q(),e&&(k=setTimeout(I,1e3*S.currency.stepTime,!0)),P.onDayChange(S.currency.elapsedTime)};P.restoreState=e=>{e&&(e.currency&&(S.currency=Object.assign(j,e.currency)),e.accounts&&(S.accounts=e.accounts),e.transactions&&(S.transactions=e.transactions),e.stats&&(S.stats=e.stats))},P.start=(e,t)=>{P.restoreState(t),e&&(P.expressionParser=e),S.currency||(S.currency=j),S.accounts||(S.accounts={}),S.accounts[P.name]={name:P.name,balance:0,role:T,date:(new Date).toISOString(),creationDay:0},S.transactions||(S.transactions=[]),S.stats||(S.stats={})},P.onDayChange=()=>{},P.reset=()=>{P.stop(),Object.values(S.accounts).forEach((e=>{e.balance=0})),S.transactions=[],S.stats={},S.currency.elapsedTime=0,S.currency.lastMelt=0,S.currency.quantitative=1,q()},P.play=(e=!0)=>{P.isPlaying||(0!=k&&(clearTimeout(k),k=0),P.isPlaying=!0,I(e))},P.stop=()=>{P.isPlaying&&(0!=k&&(clearTimeout(k),k=0),P.isPlaying=!1)};const L=e({name:P.name,isPlaying:!1,currency:{},accounts:[],selectedAccounts:[P.name]}),V=P.uValue;L.isSelected=e=>L.selectedAccounts.indexOf(e.name)>=0,L.select=e=>{if("bank"==e.role)return;let t=L.selectedAccounts.indexOf(e.name);t<0?L.selectedAccounts.push(e.name):L.selectedAccounts.splice(t,1)},L.doTx=e=>{const t=P.doTx({from:e.from,to:e.to,value:Math.floor(e.value*V)});return t&&L.refresh(),t},L.updateCurrency=e=>(L.currency=P.updateCurrency(e),L.currency),L.addAccounts=e=>{e&&(e.forEach((e=>{P.createAccount(e)||P.updateAccount(e.name,e)})),L.refresh())},L.createAccount=e=>{let t=P.createAccount(e);return t&&(L.accounts.push(t),L.refresh()),t},L.updateAccount=(e,t)=>{let a=P.updateAccount(e.name,t);return a&&(a=Object.assign(e,a),L.refresh()),a},L.deleteAccount=e=>{let t=null;return P.deleteAccount(e.name)&&(L.isSelected(e)&&L.select(e),t=e,L.refresh()),t},L.getAccountTx=(e,t)=>P.getAccountTx(e,t),L.getAccountStats=(e,t=statTypes.day)=>P.getAccountStats(e,t),L.onDayChange=()=>{L.refresh()},L.refresh=()=>{L.accounts=P.getAccounts(),L.currency=P.getCurrency()},L.reset=()=>{P.reset(),L.refresh(),L.isPlaying=P.isPlaying},L.play=e=>{P.play(e),L.refresh(),L.isPlaying=P.isPlaying},L.stop=()=>{P.stop(),L.refresh(),L.isPlaying=P.isPlaying},L.getState=()=>{const e=P.getState();return e.selectedAccounts=L.selectedAccounts,e},L.restoreState=e=>{e.selectedAccounts&&(L.selectedAccounts=e.selectedAccounts),P.restoreState(e),L.refresh()},L.currencyWithoutDecimal=e=>Math.floor(e/V),L.currencyDecimal=e=>(e/V).toFixed(2),P.onDayChange=L.onDayChange,P.start(t,{}),L.refresh();const Y={expose:[],props:{currency:Object,accounts:Array,selectedAccounts:Array,autoPlay:Boolean},setup(e){const{currency:t,accounts:l,selectedAccounts:r}=e;return a((()=>{t&&L.updateCurrency(t),l&&L.addAccounts(l),r&&r.forEach((e=>{L.select(e)}))})),(e,t)=>n(e.$slots,"default")}},E="fr"==(navigator.userLanguage||navigator.languages&&navigator.languages.length&&navigator.languages[0]||navigator.language||navigator.browserLanguage||navigator.systemLanguage).substring(0,2)?"fr":"en",N=e=>({render(){if(E==e)return this.$slots.default()}}),B=e=>e[E],R=N("fr"),X=N("en"),$={class:"text-center"},K=s("i",{class:"fa fa-play"},null,-1),z=c(" play"),W=s("i",{class:"fa fa-pause"},null,-1),G=c(" pause"),J=s("i",{class:"fa fa-refresh"},null,-1),Q=c(" reset"),H={expose:[],setup:e=>(e,t)=>(l(),r("div",$,[s("button",{class:"btn btn-primary",onClick:t[1]||(t[1]=e=>u(L).play()),disabled:u(L).isPlaying},[K,z],8,["disabled"]),s("button",{class:"btn btn-secondary mr-5",onClick:t[2]||(t[2]=e=>u(L).stop()),disabled:!u(L).isPlaying},[W,G],8,["disabled"]),s("button",{class:"btn btn-danger ml-5",onClick:t[3]||(t[3]=e=>u(L).reset())},[J,Q])]))},Z={class:"text-center"},ee=c("currency"),te=c("monnaie"),ae={class:"input-group mb-3"},ne={class:"input-group-text w-50"},le=c("Ü revaluation"),re=c("réévaluation de Ü"),se={value:"melt"},ue=c("melting"),ce=c("fonte"),oe={value:"grew"},ie=c("growth"),de=c("croissance"),me={class:"input-group mb-3"},pe={key:0,class:"input-group-text"},ye={key:1,class:"input-group-text"},fe=s("span",{class:"input-group-text"}," ) Ü(t)",-1),ge={class:"input-group mb-3"},he={class:"input-group-text",for:"currencyUPerDay"},be=c("Ü per day"),xe=c("Ü par jour"),ve=s("span",{class:"input-group-text"},"Ü",-1),_e={class:"input-group mb-3"},we={class:"input-group-text",for:"currencyRevaluationTime"},Te=c("revaluation period"),Ae=c("réévaluation"),Ce={class:"input-group-text"},De=c("day"),Me={key:0},ke=c("jour"),Se={key:0},Pe={class:"input-group mb-3"},je={class:"input-group-text",for:"currencyStepTime"},Oe=c("day duration"),Fe=c("durée d'un jour"),Ue={class:"input-group-text"},qe=c("second"),Ie={key:0},Le=c("seconde"),Ve={key:0},Ye={key:0,class:"d-grid gap-2 d-md-flex mb-3"},Ee=c("ündo!"),Ne=c("annüler!"),Be=c("üpdate!"),Re=c("valïder!"),Xe={class:"input-group mb-3 mt-5"},$e={class:"input-group-text",for:"currencyMass"},Ke=c("monetary mass (M)"),ze=c("masse monétaire (M)"),We=s("span",{class:"input-group-text"},"Ü",-1),Ge={class:"input-group mb-3"},Je={class:"input-group-text",for:"currencyNbMembers"},Qe=c("Üman accounts (N)"),He=c("comptes Ümains (N)"),Ze={class:"input-group mb-3"},et={class:"input-group-text",for:"currencyAvg"},tt=c("average"),at=c("moyenne"),nt={class:"input-group-text"},lt=c("Ü / Üman"),rt=c("Ü / Ümain"),st={class:"input-group mb-3"},ut={class:"input-group-text",for:"currencyQuantitative"},ct=c("quantitative value"),ot=c("valeur quantitative"),it={class:"input-group-text"},dt=c("Ü(0) / Ü"),mt=c("Ü(0) / Ü"),pt={class:"input-group mb-3"},yt={class:"input-group-text",for:"currencyLastGrew"},ft=c("last growth"),gt=c("dernière croissance"),ht=s("span",{class:"input-group-text"},"%",-1),bt={class:"input-group mb-3"},xt={class:"input-group-text",for:"currencyLastMelt"},vt=c("last melting"),_t=c("dernière fonte"),wt=s("span",{class:"input-group-text"},"%",-1),Tt={class:"input-group mb-3"},At={class:"input-group-text",for:"currencyElapsedTime"},Ct=c("elapsed time (T)"),Dt=c("temps écoulé (T)"),Mt={class:"input-group-text"},kt=c("day"),St={key:0},Pt=c("jour"),jt={key:0},Ot={expose:[],setup(t){const n=e({expression:"",mode:"melt",uPerDay:1,stepTime:0,revaluationTime:0}),c=o((()=>0==L.currency.lastMelt?0:(1/(1/(L.currency.lastMelt/100)-1)*100).toFixed(2))),f=o((()=>!(!L||!L.currency)&&(L.currency.expression!=n.expression||L.currency.mode!=n.mode||L.currency.uPerDay!=n.uPerDay||L.currency.revaluationTime!=n.revaluationTime||L.currency.stepTime!=n.stepTime)));return a((()=>{Object.assign(n,L.currency)})),(e,t)=>(l(),r("div",null,[s("h4",Z,[s(u(X),null,{default:i((()=>[ee])),_:1}),s(u(R),null,{default:i((()=>[te])),_:1})]),s("form",null,[s("div",ae,[s("label",ne,[s(u(X),null,{default:i((()=>[le])),_:1}),s(u(R),null,{default:i((()=>[re])),_:1})]),d(s("select",{"onUpdate:modelValue":t[1]||(t[1]=e=>u(n).mode=e),id:"currencyMode",class:["form-select w-50",{"bg-primary":u(n).mode!=u(L).currency.mode}]},[s("option",se,[s(u(X),null,{default:i((()=>[ue])),_:1}),s(u(R),null,{default:i((()=>[ce])),_:1})]),s("option",oe,[s(u(X),null,{default:i((()=>[ie])),_:1}),s(u(R),null,{default:i((()=>[de])),_:1})])],2),[[m,u(n).mode]])]),s("div",me,["melt"==u(n).mode?(l(),r("span",pe,"Ü(t-1) = ( 1 - ")):(l(),r("span",ye,"Ü(t+1) = ( 1 + ")),d(s("input",{id:"currencyExpression","onUpdate:modelValue":t[2]||(t[2]=e=>u(n).expression=e),type:"text",class:["form-control text-right",{"bg-primary":u(n).expression!=u(L).currency.expression}]},null,2),[[p,u(n).expression]]),fe]),s("div",ge,[s("label",he,[s(u(X),null,{default:i((()=>[be])),_:1}),s(u(R),null,{default:i((()=>[xe])),_:1})]),d(s("input",{id:"currencyUPerDay","onUpdate:modelValue":t[3]||(t[3]=e=>u(n).uPerDay=e),type:"number",min:"0",max:"1000",step:"1",class:["form-control text-right",{"bg-primary":u(n).uPerDay!=u(L).currency.uPerDay}]},null,2),[[p,u(n).uPerDay]]),ve]),s("div",_e,[s("label",we,[s(u(X),null,{default:i((()=>[Te])),_:1}),s(u(R),null,{default:i((()=>[Ae])),_:1})]),d(s("input",{id:"currencyRevaluationTime","onUpdate:modelValue":t[4]||(t[4]=e=>u(n).revaluationTime=e),type:"number",min:"1",max:"400",step:"1",class:["form-control text-right",{"bg-primary":u(n).revaluationTime!=u(L).currency.revaluationTime}]},null,2),[[p,u(n).revaluationTime]]),s("span",Ce,[s(u(X),null,{default:i((()=>[De,u(n).revaluationTime>1?(l(),r("span",Me,"s")):y("",!0)])),_:1}),s(u(R),null,{default:i((()=>[ke,u(n).revaluationTime>1?(l(),r("span",Se,"s")):y("",!0)])),_:1})])]),s("div",Pe,[s("label",je,[s(u(X),null,{default:i((()=>[Oe])),_:1}),s(u(R),null,{default:i((()=>[Fe])),_:1})]),d(s("input",{id:"currencyStepTime","onUpdate:modelValue":t[5]||(t[5]=e=>u(n).stepTime=e),type:"number",min:"1",max:"90000",step:"1",class:["form-control text-right",{"bg-primary":u(n).stepTime!=u(L).currency.stepTime}]},null,2),[[p,u(n).stepTime]]),s("span",Ue,[s(u(X),null,{default:i((()=>[qe,u(n).stepTime>1?(l(),r("span",Ie,"s")):y("",!0)])),_:1}),s(u(R),null,{default:i((()=>[Le,u(n).stepTime>1?(l(),r("span",Ve,"s")):y("",!0)])),_:1})])]),u(f)?(l(),r("div",Ye,[s("button",{type:"button",class:"btn btn-secondary mr-auto",onClick:t[6]||(t[6]=e=>Object.assign(u(n),u(L).currency))},[s(u(X),null,{default:i((()=>[Ee])),_:1}),s(u(R),null,{default:i((()=>[Ne])),_:1})]),s("button",{type:"button",class:"btn btn-primary",onClick:t[7]||(t[7]=e=>(()=>{const{expression:e,mode:t,uPerDay:a,revaluationTime:l,stepTime:r}=n;L.updateCurrency({expression:e,mode:t,uPerDay:a,revaluationTime:l,stepTime:r})})())},[s(u(X),null,{default:i((()=>[Be])),_:1}),s(u(R),null,{default:i((()=>[Re])),_:1})])])):y("",!0),s("div",Xe,[s("label",$e,[s(u(X),null,{default:i((()=>[Ke])),_:1}),s(u(R),null,{default:i((()=>[ze])),_:1})]),s("input",{id:"currencyMass",value:u(L).currencyWithoutDecimal(u(L).currency.monetaryMass),type:"text",class:"form-control text-right",disabled:""},null,8,["value"]),We]),s("div",Ge,[s("label",Je,[s(u(X),null,{default:i((()=>[Qe])),_:1}),s(u(R),null,{default:i((()=>[He])),_:1})]),s("input",{id:"currencyNbMembers",value:u(L).currency.nbMembers,type:"text",class:"form-control text-right",disabled:""},null,8,["value"])]),s("div",Ze,[s("label",et,[s(u(X),null,{default:i((()=>[tt])),_:1}),s(u(R),null,{default:i((()=>[at])),_:1})]),s("input",{id:"currencyAvg",value:u(L).currencyWithoutDecimal(u(L).currency.average),type:"text",class:"form-control text-right",disabled:""},null,8,["value"]),s("span",nt,[s(u(X),null,{default:i((()=>[lt])),_:1}),s(u(R),null,{default:i((()=>[rt])),_:1})])]),s("div",st,[s("label",ut,[s(u(X),null,{default:i((()=>[ct])),_:1}),s(u(R),null,{default:i((()=>[ot])),_:1})]),s("input",{id:"currencyQuantitative",value:u(L).currency.quantitative.toFixed(2),type:"text",class:"form-control text-right",disabled:""},null,8,["value"]),s("span",it,[s(u(X),null,{default:i((()=>[dt])),_:1}),s(u(R),null,{default:i((()=>[mt])),_:1})])]),s("div",pt,[s("label",yt,[s(u(X),null,{default:i((()=>[ft])),_:1}),s(u(R),null,{default:i((()=>[gt])),_:1})]),s("input",{id:"currencyLastGrew",value:u(c),type:"text",class:"form-control text-right",disabled:""},null,8,["value"]),ht]),s("div",bt,[s("label",xt,[s(u(X),null,{default:i((()=>[vt])),_:1}),s(u(R),null,{default:i((()=>[_t])),_:1})]),s("input",{id:"currencyLastMelt",value:u(L).currency.lastMelt,type:"text",class:"form-control text-right",disabled:""},null,8,["value"]),wt]),s("div",Tt,[s("label",At,[s(u(X),null,{default:i((()=>[Ct])),_:1}),s(u(R),null,{default:i((()=>[Dt])),_:1})]),d(s("input",{id:"currencyElapsedTime","onUpdate:modelValue":t[8]||(t[8]=e=>u(L).currency.elapsedTime=e),type:"text",class:"form-control text-right",disabled:""},null,512),[[p,u(L).currency.elapsedTime]]),s("span",Mt,[s(u(X),null,{default:i((()=>[kt,u(L).currency.elapsedTime>1?(l(),r("span",St,"s")):y("",!0)])),_:1}),s(u(R),null,{default:i((()=>[Pt,u(L).currency.elapsedTime>1?(l(),r("span",jt,"s")):y("",!0)])),_:1})])])])]))}},Ft={class:"text-center"},Ut=c("transaction"),qt=c("transaction"),It={class:"input-group"},Lt=s("span",{class:"input-group-text"},[s("small",null,"Ü")],-1),Vt={class:"input-group-text",for:"txFrom"},Yt=c(" fröm "),Et=c(" de "),Nt={class:"input-group-text",for:"txTo"},Bt=c(" tö "),Rt=c(" à "),Xt=s("option",{disabled:"",value:""},"select öne",-1),$t=s("option",{disabled:"",value:""},"qüi",-1),Kt={expose:[],setup(t){const a=e({from:"fÜne",to:"",value:1}),n=o((()=>L.accounts)),c=o((()=>L.accounts));return(e,t)=>(l(),r("div",null,[s("h4",Ft,[s(u(X),null,{default:i((()=>[Ut])),_:1}),s(u(R),null,{default:i((()=>[qt])),_:1})]),s("form",null,[s("div",It,[d(s("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>u(a).value=e),type:"number",step:"any",class:"form-control text-right",style:{width:"80px"}},null,512),[[p,u(a).value]]),Lt,s("label",Vt,[s(u(X),null,{default:i((()=>[Yt])),_:1}),s(u(R),null,{default:i((()=>[Et])),_:1})]),d(s("select",{"onUpdate:modelValue":t[2]||(t[2]=e=>u(a).from=e),id:"txFrom",class:"form-select"},[(l(!0),r(f,null,g(u(n),(e=>(l(),r("option",{value:e.name,key:e.name},h(e.name),9,["value"])))),128))],512),[[m,u(a).from]]),s("label",Nt,[s(u(X),null,{default:i((()=>[Bt])),_:1}),s(u(R),null,{default:i((()=>[Rt])),_:1})]),d(s("select",{"onUpdate:modelValue":t[3]||(t[3]=e=>u(a).to=e),id:"txTo",class:"form-select"},[s(u(X),null,{default:i((()=>[Xt])),_:1}),s(u(R),null,{default:i((()=>[$t])),_:1}),(l(!0),r(f,null,g(u(c),(e=>(l(),r("option",{value:e.name,key:e.name},h(e.name),9,["value"])))),128))],512),[[m,u(a).to]]),s("button",{type:"button",class:"btn btn-primary",onClick:t[4]||(t[4]=e=>u(L).doTx(u(a)))},"ök!")])])]))}},zt={class:"text-center"},Wt=c("accounts"),Gt=c("comptes"),Jt={class:"table table-hover"},Qt=c("stats"),Ht=c("stats"),Zt=c("name"),ea=c("nom"),ta=c("role"),aa=c("rôle"),na=c("balance"),la=c("solde"),ra=s("th",null,null,-1),sa=s("td",null,null,-1),ua={class:"text-center"},ca={value:"human"},oa=c("Üman"),ia=c("Ümain"),da={value:"wallet"},ma=c("wället"),pa=c("sïmple"),ya=s("td",null,null,-1),fa={class:"text-right"},ga=c("nëw!"),ha=c("noüveau!"),ba={class:"text-left"},xa={key:0,class:"badge bg-primary mr-3",style:{width:"50px"}},va=s("small",null,"Ü",-1),_a=c("man"),wa=s("small",null,"Ü",-1),Ta=c("main"),Aa={key:1,class:"badge bg-secondary mr-3",style:{width:"50px"}},Ca=c("wället"),Da=c("sïmple"),Ma={key:2,class:"badge bg-danger mr-3",style:{width:"50px"}},ka=c("bänk"),Sa=c("bänque"),Pa=c("change"),ja=c("modifier"),Oa={class:"text-right"},Fa=s("small",{class:"mr-3"}," Ü ",-1),Ua=c("reset"),qa=c("raz"),Ia={class:"text-right"},La={expose:[],props:{colors:Array},setup(t){const{colors:a}=t,n=e({onlySelected:!1,sortKey:"name",sortOrder:1,newAccount:{name:"",role:"human"}}),x=o((()=>{let e=L.accounts.filter((e=>"bank"!=e.role));return n.onlySelected&&(e=e.filter((e=>L.isSelected(e)))),e.sort(((e,t)=>{let a=e[n.sortKey],l=t[n.sortKey];return(a===l?0:a>l?1:-1)*n.sortOrder}))})),v=e=>{e==n.sortKey&&(n.sortOrder=-n.sortOrder),n.sortKey=e},_=e=>{let t=L.selectedAccounts.indexOf(e.name);return t<0?null:a[t%a.length]};return(e,t)=>(l(),r("div",null,[s("h4",zt,[s(u(X),null,{default:i((()=>[Wt])),_:1}),s(u(R),null,{default:i((()=>[Gt])),_:1})]),s("table",Jt,[s("thead",null,[s("tr",null,[s("th",{onClick:t[1]||(t[1]=e=>u(n).onlySelected=!u(n).onlySelected),class:[{"bg-primary":u(n).onlySelected},"pointer"]},[s(u(X),null,{default:i((()=>[Qt])),_:1}),s(u(R),null,{default:i((()=>[Ht])),_:1})],2),s("th",{onClick:t[2]||(t[2]=e=>v("name")),class:"pointer"},[s(u(X),null,{default:i((()=>[Zt])),_:1}),s(u(R),null,{default:i((()=>[ea])),_:1})]),s("th",{onClick:t[3]||(t[3]=e=>v("role")),class:"text-center pointer"},[s(u(X),null,{default:i((()=>[ta])),_:1}),s(u(R),null,{default:i((()=>[aa])),_:1})]),s("th",{onClick:t[4]||(t[4]=e=>v("balance")),class:"text-right pointer"},[s(u(X),null,{default:i((()=>[na])),_:1}),s(u(R),null,{default:i((()=>[la])),_:1})]),ra])]),s("tbody",null,[s("tr",null,[sa,s("td",null,[d(s("input",{placeholder:u(B)({en:"näme",fr:"nöm"}),"onUpdate:modelValue":t[5]||(t[5]=e=>u(n).newAccount.name=e),type:"text",class:"form-control",id:"accountName",maxlength:"10"},null,8,["placeholder"]),[[p,u(n).newAccount.name]])]),s("td",ua,[d(s("select",{"onUpdate:modelValue":t[6]||(t[6]=e=>u(n).newAccount.role=e),class:"form-control"},[s("option",ca,[s(u(X),null,{default:i((()=>[oa])),_:1}),s(u(R),null,{default:i((()=>[ia])),_:1})]),s("option",da,[s(u(X),null,{default:i((()=>[ma])),_:1}),s(u(R),null,{default:i((()=>[pa])),_:1})])],512),[[m,u(n).newAccount.role]])]),ya,s("td",fa,[s("button",{type:"button",disabled:3>u(n).newAccount.name.length||u(L).accounts.some((e=>e.name==u(n).newAccount.name)),class:"btn btn-primary",onClick:t[7]||(t[7]=e=>(n.newAccount.name=n.newAccount.name.trim(),void L.createAccount(n.newAccount)))},[s(u(X),null,{default:i((()=>[ga])),_:1}),s(u(R),null,{default:i((()=>[ha])),_:1})],8,["disabled"])])]),(l(!0),r(f,null,g(u(x),(e=>(l(),r("tr",{key:e.name},[s("td",{style:{"background-color":_(e)},onClick:t=>u(L).select(e),class:"pointer"},null,12,["onClick"]),s("td",{onClick:t=>u(L).select(e),class:"pointer"},h(e.name),9,["onClick"]),s("td",ba,["human"==e.role?(l(),r("span",xa,[s(u(X),null,{default:i((()=>[va,_a])),_:1}),s(u(R),null,{default:i((()=>[wa,Ta])),_:1})])):"wallet"==e.role?(l(),r("span",Aa,[s(u(X),null,{default:i((()=>[Ca])),_:1}),s(u(R),null,{default:i((()=>[Da])),_:1})])):(l(),r("span",Ma,[s(u(X),null,{default:i((()=>[ka])),_:1}),s(u(R),null,{default:i((()=>[Sa])),_:1})])),"bank"!=e.role?(l(),r("a",{key:3,href:"#",onClick:b((t=>(e=>{let t="human"==e.role?"wallet":"human";L.updateAccount(e,{role:t})})(e)),["stop","prevent"])},[s(u(X),null,{default:i((()=>[Pa])),_:1}),s(u(R),null,{default:i((()=>[ja])),_:1})],8,["onClick"])):y("",!0)]),s("td",Oa,["bank"!=e.role?(l(),r(f,{key:0},[s("strong",null,[c(h(u(L).currencyDecimal(e.balance)),1),Fa]),s("a",{href:"#",onClick:b((t=>(e=>{L.updateAccount(e,{balance:0})})(e)),["stop","prevent"])},[s(u(X),null,{default:i((()=>[Ua])),_:1}),s(u(R),null,{default:i((()=>[qa])),_:1})],8,["onClick"])],64)):y("",!0)]),s("td",Ia,[e.name!=u(L).name?(l(),r("a",{key:0,href:"#",onClick:b((t=>(e=>{const t=e.name;confirm(B({fr:"êtes vous sûr de supprimer "+t+" ?",en:"Are you sure to delete "+t+"?"}))&&L.deleteAccount(e)})(e)),["stop","prevent"])},"x",8,["onClick"])):y("",!0)])])))),128))])])]))}};function Va(e){return parseInt(e,10)}function Ya(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function Ea(e,t,a){var n=e.x-t.x,l=e.y-t.y,r=Math.sqrt(n*n+l*l),s=n/r,u=l/r;return{x:t.x+s*a,y:t.y+u*a}}function Na(e,t){var a=e.shift();return"M"+a.x+" "+a.y+e.map((function(n,l){var r,s,u,c=e[l+1],o=e[l-1]||a,i=c&&(s=n,u=o,Va((r=c).x+u.x)===Va(2*s.x)&&Va(r.y+u.y)===Va(2*s.y));if(!c||i)return"L"+n.x+" "+n.y;var d=Math.min(Ya(o,n),Ya(c,n)),m=d/2<t?d/2:t,p=Ea(o,n,m),y=Ea(c,n,m);return"L"+p.x+" "+p.y+"S"+n.x+" "+n.y+" "+y.x+" "+y.y})).join("")}var Ba={props:["smooth","data","boundary","radius","id","max","min","color","width","dash"],render:function(){var e,t=this,a=t.data,n=t.smooth,l=t.boundary,r=t.radius,s=t.id,u=t.max,c=t.min,o=t.width,i=t.dash,d=Na(function(e,t,a){var n=t.minX,l=t.minY,r=t.maxX,s=t.maxY,u=a.max,c=a.min,o=e.map((function(e){return"number"==typeof e?e:e.value})),i=Math.min.apply(Math,o.concat([c]))-.001,d=(r-n)/(o.length-1),m=(s-l)/(Math.max.apply(Math,o.concat([u]))+.001-i);return o.map((function(e,t){return{x:t*d+n,y:s-(e-i)*m+1e-5*+(t===o.length-1)-1e-5*+(0===t)}}))}(a,l,{max:u,min:c}),n?r:0);return e=this.color?this.color:"url(#"+s+")",x("path",{d:d,fill:"none",stroke:e,"stroke-width":o,"stroke-dasharray":i})}},Ra={props:["boundary","max","min"],render:function(){var e=this.boundary;return[x("text",{x:e.minX,y:e.minY-2,fill:"#CCCCCC88","font-size":"0.6em"},Math.floor(this.max/1e3)),x("line",{x1:e.minX,y1:e.minY,x2:e.maxX,y2:e.minY,stroke:"#CCCCCC88"}),x("text",{x:e.minX,y:e.maxY-2,fill:"#CCCCCC88","font-size":"0.6em"},Math.floor(this.min/1e3)),x("line",{x1:e.minX,y1:e.maxY,x2:e.maxX,y2:e.maxY,stroke:"#CCCCCC88"})]}},Xa={name:"Trends",props:{data:{type:Array,required:!0},colors:{type:Array,required:!0},min:{type:Number,default:1/0},height:Number,width:Number,padding:{type:Number,default:8},radius:{type:Number,default:10},smooth:Boolean},render:function(){if(this.data){var e=this.width,t=this.height,a=this.padding,n=e||300,l=t||150,r={minX:a,minY:a,maxX:n-a,maxY:l-a},s=10;for(let e=0;e<this.data.length;e++){const t=this.data[e];if(t&&t.length>1)for(let e=0;e<t.length;e++)s=Math.max(s,t[e])}var u=[];for(let e=0;e<this.data.length;e++){const t=this.data[e];t&&t.length>1&&u.push(x(Ba,{smooth:this.smooth,data:t,boundary:r,radius:this.radius,max:s,min:this.min,id:"stats",ref:"path"+e,color:this.colors[e],width:0==e?1.3:1,dash:0==e?"2 2":"0"}))}if(0!=u.length)return x("svg",{width:e||"100%",height:t||"25%",viewBox:"0 0 "+n+" "+l},[x(Ra,{boundary:r,max:s,min:this.min}),u])}}};const $a={class:"text-center"},Ka=c("stats"),za=c("stats"),Wa={class:"w-100 d-flex justify-content-between"},Ga={class:"input-group w-auto ml-4"},Ja=s("label",{class:"input-group-text"}," 100 ",-1),Qa={value:"day"},Ha=c("days"),Za=c("jours"),en={value:"month"},tn=c("months"),an=c("mois"),nn={value:"year"},ln=c("years"),rn=c("années"),sn={class:"ms-auto w-auto input-group mr-4"},un={class:"input-group-text"},cn=c("referential"),on=c("référentiel"),dn={value:"relative"},mn=c("relative"),pn=c("relatif"),yn={value:"quantitative"},fn=c("quantitative"),gn=c("quantitatif"),hn={value:"average"},bn=c("average"),xn=c("moyenne"),vn={expose:[],props:{colors:Array},setup(t){const{colors:n}=t,c=e({referential:"relative",statType:"day",stats:[]}),o=()=>{let e=L.getAccountStats(L.name,c.statType),t=[[]];for(let a=1;a<L.selectedAccounts.length;a++){const n=L.selectedAccounts[a];if(n){let a=L.getAccountStats(n,c.statType);if("average"==c.referential)for(let t=0;t<a.length;t++)a[t]=0==e[t].average?0:a[t]/e[t].average*1e5;else if("quantitative"==c.referential)for(let t=0;t<a.length;t++)a[t]=a[t]*e[t].quantitative;t.push(a)}}"average"==c.referential?t[0]=new Array(e.length).fill(1e5):"relative"==c.referential?t[0]=e.map((e=>e.average)):"quantitative"==c.referential&&(t[0]=e.map((e=>e.average*e.quantitative))),c.stats=t};return v((()=>L.selectedAccounts.length),o),v((()=>L.currency),o,{deep:!0}),v((()=>c.referential),o),v((()=>c.statType),o),a((()=>{o()})),(e,t)=>(l(),r("div",null,[s("h4",$a,[s(u(X),null,{default:i((()=>[Ka])),_:1}),s(u(R),null,{default:i((()=>[za])),_:1})]),s(u(Xa),{data:u(c).stats,colors:n,padding:10,radius:8,"stroke-width":1,"stroke-linecap":"butt",min:0,"auto-draw":"",smooth:""},null,8,["data"]),s("div",Wa,[s("div",Ga,[Ja,d(s("select",{"onUpdate:modelValue":t[1]||(t[1]=e=>u(c).statType=e)},[s("option",Qa,[s(u(X),null,{default:i((()=>[Ha])),_:1}),s(u(R),null,{default:i((()=>[Za])),_:1})]),s("option",en,[s(u(X),null,{default:i((()=>[tn])),_:1}),s(u(R),null,{default:i((()=>[an])),_:1})]),s("option",nn,[s(u(X),null,{default:i((()=>[ln])),_:1}),s(u(R),null,{default:i((()=>[rn])),_:1})])],512),[[m,u(c).statType]])]),s("div",sn,[s("label",un,[s(u(X),null,{default:i((()=>[cn])),_:1}),s(u(R),null,{default:i((()=>[on])),_:1})]),d(s("select",{"onUpdate:modelValue":t[2]||(t[2]=e=>u(c).referential=e)},[s("option",dn,[s(u(X),null,{default:i((()=>[mn])),_:1}),s(u(R),null,{default:i((()=>[pn])),_:1})]),s("option",yn,[s(u(X),null,{default:i((()=>[fn])),_:1}),s(u(R),null,{default:i((()=>[gn])),_:1})]),s("option",hn,[s(u(X),null,{default:i((()=>[bn])),_:1}),s(u(R),null,{default:i((()=>[xn])),_:1})])],512),[[m,u(c).referential]])])])]))}},_n=s("h1",{class:"display-1 text-center mb-5"},[s("img",{src:"/favicon64x64.png"}),s("span",{class:"align-middle"},[c(" f"),s("small",null,"Ü"),c("ne")])],-1),wn={class:"lead text-center mb-3"},Tn=s("strong",null,[c("f"),s("small",null,"Ü"),c("ne")],-1),An=c(" is a web app to test and play with a simple "),Cn=s("a",{href:"https://libre-currency.org"},"Libre Currency",-1),Dn=c(" called "),Mn=s("strong",null,[c("f"),s("small",null,"Ü"),c("ne")],-1),kn=c(" (pronounced /fən/ like fun) "),Sn=s("strong",null,[c("f"),s("small",null,"Ü"),c("ne")],-1),Pn=c(" est une appli web qui permet de jouer avec une simple "),jn=s("a",{href:"https://monnaie-libre.fr/"},"Monnaie Libre",-1),On=c(" appelée "),Fn=s("strong",null,[c("f"),s("small",null,"Ü"),c("ne")],-1),Un=c(" (prononcée /fən/ comme fun en anglais) "),qn={class:"lead text-center mb-5"},In=c(" a "),Ln=s("small",null,"Ü",-1),Vn=c("man account create some new "),Yn=s("small",null,"Ü",-1),En=c(" (the "),Nn=s("small",null,"Ü",-1),Bn=c("nit of the f"),Rn=s("small",null,"Ü",-1),Xn=c("ne currency) each day"),$n=s("br",null,null,-1),Kn=s("small",null,[c("old created "),s("strong",null,[s("small",null,"Ü"),c("nits")]),c(" melt by a given percentage each "),s("strong",null,"revaluation period")],-1),zn=s("br",null,null,-1),Wn=c(" un compte "),Gn=s("small",null,"Ü",-1),Jn=c("main crée de nouvelles "),Qn=s("small",null,"Ü",-1),Hn=c(" (l'"),Zn=s("small",null,"Ü",-1),el=c("nité de la monnaie f"),tl=s("small",null,"Ü",-1),al=c("ne) chaque jour"),nl=s("br",null,null,-1),ll=s("small",null,[c("les anciennes "),s("strong",null,[s("small",null,"Ü"),c("nités")]),c(" fondent d'un certain pourcentage à chaque "),s("strong",null,"période de réévaluation")],-1),rl=s("br",null,null,-1),sl={class:"d-flex align-items-start flex-wrap mb-3",style:{"justify-content":"space-evenly"}},ul={style:{"min-width":"500px"}},cl={style:{"min-width":"700px"}};let ol=JSON.parse(localStorage.getItem("state"));window.location.hash&&(ol||(ol={currency:{}}),Object.assign(ol.currency,(e=>{const t=new URLSearchParams(e);return{mode:"grew"==t.get("m")?"grew":"melt",expression:t.get("e"),uPerDay:parseInt(t.get("upd")),revaluationTime:parseInt(t.get("rt")),stepTime:parseInt(t.get("st"))}})(window.location.hash.substring(1)))),L.restoreState(ol);_({expose:[],setup(e){v((()=>L.currency),(()=>{window.location.hash="#"+(e=>{const t=new URLSearchParams;return t.append("e",e.expression),t.append("m",e.mode),t.append("upd",e.uPerDay),t.append("rt",e.revaluationTime),t.append("st",e.stepTime),t.toString()})(L.currency),localStorage.setItem("state",JSON.stringify(L.getState()))}));const t=["#FFFFFFDD","#FE4365DD","#F9CDADDD","#83AF9BDD","#A7226EDD","#F26B38DD","#F7DB4FDD","#CAFDE0DD","#FFB8EADD","#C3421ADD","#4F6ABFDD"],a=[];return L.accounts.length<=1&&(a.push({name:"Alice",balance:1e4,role:"human"}),a.push({name:"Bob",balance:2e4,role:"human"}),a.push({name:"Carole",balance:0,role:"human"})),(e,n)=>(l(),r("div",null,[_n,s("p",wn,[s(u(X),null,{default:i((()=>[Tn,An,Cn,Dn,Mn,kn])),_:1}),s(u(R),null,{default:i((()=>[Sn,Pn,jn,On,Fn,Un])),_:1})]),s("p",qn,[s(u(X),null,{default:i((()=>[In,Ln,Vn,Yn,En,Nn,Bn,Rn,Xn,$n,Kn,zn])),_:1}),s(u(R),null,{default:i((()=>[Wn,Gn,Jn,Qn,Hn,Zn,el,tl,al,nl,ll,rl])),_:1})]),s(Y,{accounts:a,selectedAccounts:a},{default:i((()=>[s(H,{class:"m-auto"}),s("div",sl,[s("div",ul,[s(Ot,{class:"m-auto",style:{width:"400px"}}),s(Kt,{class:"mt-5"})]),s("div",cl,[s(vn,{colors:t,class:"w-auto"}),s(La,{colors:t,class:"mt-3"})])])])),_:1})]))}}).mount("#app");

import{r as e,a as t,e as n,o as a,b as l,c as s,d as r,f as u,g as o,u as c,w as i,h as d,F as m,i as f,t as p,j as y,k as g,l as b,m as h,v as x,n as v,p as _,q as w,s as k,x as T,y as A}from"./vendor.5278ef37.js";!function(e=".",t="__import__"){try{self[t]=new Function("u","return import(u)")}catch(n){const a=new URL(e,location),l=e=>{URL.revokeObjectURL(e.src),e.remove()};self[t]=e=>new Promise(((n,s)=>{const r=new URL(e,a);if(self[t].moduleMap[r])return n(self[t].moduleMap[r]);const u=new Blob([`import * as m from '${r}';`,`${t}.moduleMap['${r}']=m;`],{type:"text/javascript"}),o=Object.assign(document.createElement("script"),{type:"module",src:URL.createObjectURL(u),onerror(){s(new Error(`Failed to import: ${e}`)),l(o)},onload(){n(self[t].moduleMap[r]),l(o)}});document.head.appendChild(o)})),self[t].moduleMap={}}}("/assets/");const M="human",P="bank",S="grew",C="melt";let E=0;const j={name:"fÜne",logo:"fї",uValue:1e3,isPlaying:!1,txLimit:100,statLimit:200,symbol:"Ü",version:"0.5.0",stepTime:1},O={version:1,beginStat:0};j.doTx=(e,t=!0)=>{let n=Object.assign({from:"",to:"",message:"",value:0,date:(new Date).toISOString(),time:O.currency.elapsedTime},e);var a=O.accounts[n.from],l=O.accounts[n.to];return n.value<=0||!a||!l||a==l||a.role!=P&&a.balance-n.value<0?null:(l.role!=P&&(l.balance+=n.value),a.role!=P&&(a.balance-=n.value,a.balance<10&&(a.balance=0)),n.balanceFrom=a.balance,n.balanceTo=l.balance,O.transactions.push(n),O.transactions.length>j.txLimit&&(O.transactions=O.transactions.slice(O.transactions.length-j.txLimit)),t&&F(),n)},j.getCurrency=()=>Object.assign({},O.currency),j.updateCurrency=e=>{const t=j.isPlaying;return t&&j.stop(),Object.assign(O.currency,e),t&&j.play(),Object.assign({},O.currency)},j.getAccount=e=>O.accounts[e],j.getAccounts=()=>Object.values(O.accounts),j.createAccount=e=>{if(e.name=e.name.trim(),!e.name||O.accounts[e.name])return null;let t=O.accounts[e.name]=Object.assign({name:"",balance:0,role:"wallet",date:(new Date).toISOString(),time:O.currency.elapsedTime},e);return F(),t},j.updateAccount=(e,t)=>{let n=O.accounts[e];return!n||"bank"==n.role||t.name&&e!=t.name?null:(n=Object.assign(n,t),F(),n)},j.deleteAccount=e=>{let t=O.accounts[e];return t&&t.name!=j.name?(delete O.accounts[e],delete O.stats[e],F(),t):null},j.getAccountTx=(e,t)=>{if(!O.accounts[e])return null;let n=O.transactions.filter((t=>t.from==e||t.to==e));return t>0&&t<n.length&&(n=n.slice(-t)),n},j.getAccountStats=e=>{if(!O.accounts[e])return null;const t=O.stats[e];if(!t)return[];let n=O.currency.elapsedTime%j.statLimit;return O.beginStat==n?[t[O.beginStat],t[O.beginStat]]:n>O.beginStat?t.slice(O.beginStat,n+1):t.slice(O.beginStat).concat(t.slice(0,n+1))};const L={uPerTime:1,elapsedTime:0,revaluationTime:1,nbMembers:0,monetaryMass:0,mode:C,lastMelt:0,average:0,quantitative:1,expression:"0.1"};j.expressionParser=(e,t)=>parseFloat(e);const N=/!x(\d+)/,q=j.uValue,D=(e,t)=>{const n=O.currency.elapsedTime%j.statLimit;let a=O.stats[e];a||(a=new Array(j.statLimit),O.stats[e]=a),a[n]=t},F=()=>{let e=0,t=0;Object.values(O.accounts).forEach((n=>{const a=n.name.match(N);let l=1;a&&(l=parseInt(a[1])),n.role==M&&(t+=l),n.role!=P&&(e+=n.balance*l,D(n.name,n.balance))})),O.currency.nbMembers=t,O.currency.monetaryMass=e,O.currency.average=t>0?Math.floor(e/t):0,D(j.name,Object.assign({},O.currency))},U=(e=!0)=>{if(O.currency.elapsedTime>=j.statLimit)return void j.stop();O.currency.elapsedTime++,O.currency.elapsedTime>=j.statLimit&&O.currency.elapsedTime%j.statLimit==O.beginStat&&(O.beginStat=(O.beginStat+1)%j.statLimit);let t=0,n=0;const a=O.currency.uPerTime>=0?Math.floor(O.currency.uPerTime):0,l=q*O.currency.revaluationTime*a,s=O.accounts[j.name],r=O.currency.elapsedTime%O.currency.revaluationTime==0;r&&O.currency.nbMembers>0&&(t=j.expressionParser(O.currency.expression,{M:O.currency.monetaryMass/l,N:O.currency.nbMembers,T:O.currency.elapsedTime}),O.currency.mode==S&&(t=1-1/(1+t)),t=Math.max(0,Math.min(1,t)),n=(100*t).toFixed(2)),Object.values(O.accounts).forEach((e=>{if(r&&t>0&&e.balance>9){let a=e.balance*t;a=Math.min(a>l?Math.ceil(a):Math.floor(a),e.balance),a<10&&(a=10),j.doTx({from:e.name,to:s.name,message:"!revaluation%"+n,value:a},!1)}e.role==M&&a>0&&j.doTx({from:s.name,to:e.name,message:"!Ucreation",value:q*a},!1)})),r&&(O.currency.lastMelt=n,O.currency.quantitative=O.currency.quantitative*(1+1/(1/t-1))),F(),e&&(E=setTimeout(U,1e3*j.stepTime,!0)),j.onTimeChange(O.currency.elapsedTime)};j.getState=()=>Object.assign({},O),j.restoreState=e=>!(!e||!e.version||1!=e.version)&&(e.currency&&(O.currency=Object.assign(L,e.currency)),e.accounts&&(O.accounts=e.accounts),e.transactions&&(O.transactions=e.transactions),e.stats&&(O.stats=e.stats),e.beginStat&&(O.beginStat=e.beginStat),!0),j.start=(e,t)=>{j.restoreState(t),e&&(j.expressionParser=e),O.currency||(O.currency=L),O.accounts||(O.accounts={}),O.accounts[j.name]={name:j.name,balance:0,role:P,date:(new Date).toISOString(),time:0},O.transactions||(O.transactions=[]),O.stats||(O.stats={})},j.onTimeChange=()=>{},j.reset=()=>{j.stop(),Object.values(O.accounts).forEach((e=>{e.balance=0})),O.transactions=[],O.stats={},O.currency.elapsedTime=0,O.currency.lastMelt=0,O.currency.quantitative=1,O.beginStat=0,F()},j.play=(e=!0)=>{if(!j.isPlaying)return 0!=E&&(clearTimeout(E),E=0),j.isPlaying=e,U(e),!0},j.unplay=()=>{if(!j.isPlaying&&O.currency.elapsedTime>0){const e=(O.currency.elapsedTime-1)%j.statLimit,t=O.stats[j.name][e];if(t&&t.elapsedTime==O.currency.elapsedTime-1)return j.updateCurrency(t),Object.values(O.accounts).forEach((t=>{t.role!=P&&(t.balance=O.stats[t.name][e])})),F(),O.transactions=O.transactions.filter((t=>t.time<=e)),!0}return!1},j.stop=()=>{j.isPlaying&&(0!=E&&(clearTimeout(E),E=0),j.isPlaying=!1)};const I={color:"#FFFFFF"},R=e({name:j.name,isPlaying:!1,uValue:j.uValue,uSymbol:"Ü",creationPeriod:"month",stepTime:1,currency:{},accounts:[],selectedAccounts:new Map});R.selectedAccounts.set(j.name,I);const V=j.uValue;R.isSelected=e=>null!=R.selectedAccounts.get(e.name),R.select=e=>{if("bank"==e.role)return;let n=R.selectedAccounts.get(e.name);!n&&j.getAccount(e.name)?(n={color:t.randomColor()},R.selectedAccounts.set(e.name,n)):R.selectedAccounts.delete(e.name)},R.doTx=e=>{const t=j.doTx({from:e.from,to:e.to,message:e.message,value:Math.floor(e.value*V)});return t&&R.refresh(),t},R.updateCurrency=e=>(R.currency=j.updateCurrency(e),R.currency),R.addAccounts=e=>{e&&(e.forEach((e=>{j.createAccount(e)||j.updateAccount(e.name,e)})),R.refresh())},R.createAccount=e=>{let t=j.createAccount(e);return t&&(R.accounts.push(t),R.refresh()),t},R.updateAccount=(e,t)=>{let n=j.updateAccount(e.name,t);return n&&(n=Object.assign(e,n),R.refresh()),n},R.deleteAccount=e=>{let t=null;return j.deleteAccount(e.name)&&(R.isSelected(e)&&R.select(e),t=e,R.refresh()),t},R.getAccountTx=(e,t)=>j.getAccountTx(e,t),R.getAccountStats=e=>j.getAccountStats(e),R.onTimeChange=()=>{R.refresh()},R.refresh=()=>{R.accounts=j.getAccounts(),R.currency=j.getCurrency()},R.reset=()=>{j.reset(),R.refresh(),R.isPlaying=j.isPlaying},R.play=e=>{j.stepTime=R.stepTime,j.play(e)&&R.refresh(),R.isPlaying=j.isPlaying},R.unplay=()=>{j.unplay()&&R.refresh(),R.isPlaying=j.isPlaying},R.stop=()=>{j.stop(),R.isPlaying=j.isPlaying},R.getState=()=>{const e=j.getState();return e.selectedAccounts=Object.fromEntries(R.selectedAccounts),e.creationPeriod=R.creationPeriod,e},R.restoreState=e=>{e&&(e.selectedAccounts&&e.selectedAccounts[j.name]&&(R.selectedAccounts=new Map(Object.entries(e.selectedAccounts)),R.selectedAccounts.set(j.name,I)),e.creationPeriod&&(R.creationPeriod=e.creationPeriod),j.restoreState(e),R.refresh())},R.currencyWithoutDecimal=e=>Math.floor(e/V),R.currencyDecimal=e=>(e/V).toFixed(2),j.onTimeChange=R.onTimeChange,j.start(n,{}),R.refresh();const B={expose:[],props:{currency:Object,accounts:Array,selectedAccounts:Array,autoPlay:Boolean},setup(e){const{currency:t,accounts:n,selectedAccounts:u}=e;return a((()=>{t&&R.updateCurrency(t),n&&R.addAccounts(n),u&&u.forEach((e=>{R.select(e)}))})),(e,t)=>(l(),s("div",null,[r(e.$slots,"default")]))}},X=u("en"),Y=e=>({render(){if(X.value==e)return this.$slots.default()}}),$=e=>e[X.value],z=e=>{X.value="fr"==e?"fr":"en"};z((navigator.userLanguage||navigator.languages&&navigator.languages.length&&navigator.languages[0]||navigator.language||navigator.browserLanguage||navigator.systemLanguage).substring(0,2));const K=Y("fr"),J=Y("en"),G=(e,t=0)=>{switch(e){case"day":return $({en:"day",fr:"jour"})+(t>1?"s":"");case"month":return $({en:"month",fr:"mois"})+(t>1&&"fr"!=X.value?"s":"");case"year":return $({en:"year",fr:"an"})+(t>1?"s":"")}return e},Q={class:"mb-3 text-center"},W={class:"input-group d-inline"},Z=o("i",{class:"fa fa-upload"},null,-1),H=d(" load"),ee=d(" charger"),te=o("i",{class:"fa fa-download"},null,-1),ne=d(" save"),ae=d(" sauvegarder"),le=o("i",{class:"fa fa-undo"},null,-1),se=d(" reset"),re=d(" RAZ"),ue={expose:[],setup(e){const t=e=>{const t=e.target.files[0];if(t){const e=new FileReader;e.onload=function(e){var t=e.target.result;n(t)},e.readAsText(t)}else alert($({en:"file not found",fr:"fichier introuvable"}));e.target.value=null},n=e=>{try{const t=JSON.parse(e);R.stop(),R.restoreState(t)}catch(t){console.log(t),alert($({en:"can not read the file",fr:"le fichier ne peut pas être lu"}))}};return(e,n)=>(l(),s("div",Q,[o("div",W,[o("label",{class:["btn btn-dark mb-0",{disabled:c(R).isPlaying}]},[Z,o(c(J),null,{default:i((()=>[H])),_:1}),o(c(K),null,{default:i((()=>[ee])),_:1}),o("input",{type:"file",hidden:"",onChange:t},null,32)],2),o("button",{class:"btn btn-light text-dark",onClick:n[1]||(n[1]=e=>(()=>{const e=R.getState(),t=JSON.stringify(e);var n=new Blob([t],{type:"text/plain;charset=utf-8"});m.saveAs(n,"fune_"+(new Date).toISOString().substring(0,16)+".fun")})()),disabled:c(R).isPlaying},[te,o(c(J),null,{default:i((()=>[ne])),_:1}),o(c(K),null,{default:i((()=>[ae])),_:1})],8,["disabled"])]),o("button",{class:"btn btn-secondary ml-3",onClick:n[2]||(n[2]=e=>c(R).reset())},[le,o(c(J),null,{default:i((()=>[se])),_:1}),o(c(K),null,{default:i((()=>[re])),_:1})])]))}};const oe={class:"navbar navbar-dark bg-dark w-100 control"},ce={class:"d-flex mx-auto align-items-center justify-content-end text-right pointer",style:{width:"400px"}},ie={class:"ml-1 display-5 font-monospace mr-2"},de={class:"input-group d-inline ml-1 mr-3 w-auto"},me=o("i",{class:"fa fa-step-backward"},null,-1),fe=o("i",{class:"fa fa-step-forward"},null,-1),pe=o("i",{class:"fa fa-play"},null,-1),ye=o("i",{class:"fa fa-pause"},null,-1),ge={expose:[],setup(e){const t=()=>{R.play(!1)},n=()=>{R.unplay()};return(e,a)=>{const r=f("longclick");return l(),s("nav",oe,[o("div",ce,[o("img",{src:"/favicon64x64.png",class:"icon mr-auto ml-1 pointer",onClick:a[1]||(a[1]=e=>{window.scroll(0,0)})}),o("span",null,p(c(G)(c(R).creationPeriod)),1),o("span",ie,p(1e3>=c(R).currency.elapsedTime?("000"+c(R).currency.elapsedTime).slice(-3):c(R).currency.elapsedTime),1),o("div",de,[y(o("button",{class:"btn btn-outline-light bg-light text-dark btn-sm pr-1 pl-2 emboss",disabled:c(R).isPlaying},[me],8,["disabled"]),[[r,n]]),y(o("button",{class:"btn btn-outline-light bg-dark text-light btn-sm pl-1 pr-2 emboss",disabled:c(R).isPlaying},[fe],8,["disabled"]),[[r,t]])]),c(R).isPlaying?g("",!0):(l(),s("button",{key:0,class:"btn btn-primary mr-2 emboss",onClick:a[2]||(a[2]=e=>c(R).play()),style:{width:"63px"}},[pe])),c(R).isPlaying?(l(),s("button",{key:1,class:"btn btn-light mr-2 emboss",onClick:a[3]||(a[3]=e=>c(R).stop()),style:{width:"63px"}},[ye])):g("",!0)])])}}},be={key:0,class:"alert alert-info alert-dismissible"},he=e({}),xe=e=>{he[e]?delete he[e]:he[e]=!0},ve={expose:[],props:{infoId:String},setup(e){const{infoId:t}=e,n=b((()=>null!=he[t]));return(e,a)=>c(n)?(l(),s("div",be,[r(e.$slots,"default"),o("button",{type:"button",class:"btn-close",onClick:a[1]||(a[1]=e=>{xe(t)}),"aria-label":"Close"})])):g("",!0)}},_e=o("i",{class:"fa fa-info-circle"},null,-1),we={expose:[],props:{info:String},setup(e){const{info:t}=e;return(e,n)=>(l(),s("span",{class:"text-info pl-1 pointer",onClick:n[1]||(n[1]=e=>c(xe)(t))},[_e]))}},ke={class:"text-center mb-3"},Te=d("currency"),Ae=d("monnaie"),Me=d("EN_info-currency"),Pe=d("FR_info-currency"),Se={class:"input-group mb-1"},Ce={class:"input-group-text",for:"currencyUPerTime"},Ee=d("Ü per "),je=d("Ü par "),Oe={class:"input-group-text pr-1"},Le=d("Ü "),Ne=d("EN_info-currency-uPerTime"),qe=d("FR_info-currency-uPerTime"),De={class:"input-group mb-1"},Fe={class:"input-group-text",for:"currencyRevaluationTime"},Ue=d("revaluation (r)"),Ie=d("réévaluation (r)"),Re={class:"input-group-text pr-1"},Ve=d("EN_info-currency-revaluationTime"),Be=d("FR_info-currency-revaluationTime"),Xe={class:"input-group mb-1"},Ye=o("option",{value:"melt"}," Ü(t-r) = ( 1 - ",-1),$e=o("option",{value:"grew"}," Ü(t+r) = ( 1 + ",-1),ze={class:"form-control px-1 text-left",style:{"flex-grow":"0.71"}},Ke=d(" ) Ü(t) "),Je=d("EN_info-currency-expression"),Ge=d("FR_info-currency-expression"),Qe={key:0,class:"d-flex align-items-start flex-wrap mb-1",style:{"justify-content":"space-evenly"}},We=d("ündo!"),Ze=d("annüler!"),He=d("üpdate!"),et=d("valïder!"),tt={class:"input-group mb-1 mt-3"},nt=d("more data"),at=d("plus de données"),lt=o("i",{class:"fa fa-plus-square position-absolute end-0 mr-3 pt-1"},null,-1),st=d("less data"),rt=d("moins de données"),ut=o("i",{class:"fa fa-minus-square position-absolute end-0 mr-3 pt-1"},null,-1),ot={key:1},ct={class:"input-group mb-1"},it={class:"input-group-text",for:"currencyMass"},dt=d("monetary mass (M)"),mt=d("masse monétaire (M)"),ft=o("span",{class:"input-group-text"},"Ü",-1),pt={class:"input-group mb-1"},yt={class:"input-group-text",for:"currencyNbMembers"},gt=d("Üman accounts (N)"),bt=d("comptes Ümains (N)"),ht={class:"input-group mb-1"},xt={class:"input-group-text",for:"currencyAvg"},vt=d("average"),_t=d("moyenne"),wt={class:"input-group-text"},kt=d("Ü / Üman"),Tt=d("Ü / Ümain"),At={class:"input-group mb-1"},Mt={class:"input-group-text",for:"currencyQuantitative"},Pt=d("quantitative"),St=d("quantitatif"),Ct={class:"input-group-text"},Et=d("Ü / Ü(0)"),jt=d("Ü / Ü(0)"),Ot={class:"input-group mb-1"},Lt={class:"input-group-text",for:"currencyLastGrew"},Nt=d("last growth"),qt=d("dernière croissance"),Dt=o("span",{class:"input-group-text"},"%",-1),Ft={class:"input-group mb-1"},Ut={class:"input-group-text",for:"currencyLastMelt"},It=d("last melting"),Rt=d("dernière fonte"),Vt=o("span",{class:"input-group-text"},"%",-1),Bt={expose:[],setup(t){const n=u(!1),r=e({expression:"",mode:"melt",uPerTime:1,revaluationTime:0}),m=b((()=>0==R.currency.lastMelt?0:(1/(1/(R.currency.lastMelt/100)-1)*100).toFixed(2))),f=b((()=>!(!R||!R.currency)&&(R.currency.expression!=r.expression||R.currency.mode!=r.mode||R.currency.uPerTime!=r.uPerTime||R.currency.revaluationTime!=r.revaluationTime)));return h((()=>[R.currency.expression,R.currency.mode,R.currency.uPerTime,R.currency.revaluationTime]),(()=>{Object.assign(r,R.currency)})),a((()=>{Object.assign(r,R.currency)})),(e,t)=>{return l(),s("div",null,[o("h4",ke,[o(c(J),null,{default:i((()=>[Te])),_:1}),o(c(K),null,{default:i((()=>[Ae])),_:1}),o(we,{class:"position-absolute",info:"info-currency"})]),o(ve,{infoId:"info-currency"},{default:i((()=>[o(c(J),null,{default:i((()=>[Me])),_:1}),o(c(K),null,{default:i((()=>[Pe])),_:1})])),_:1}),o("form",null,[o("div",Se,[o("label",Ce,[o(c(J),null,{default:i((()=>[Ee])),_:1}),o(c(K),null,{default:i((()=>[je])),_:1}),d(" "+p(c(G)(c(R).creationPeriod)),1)]),y(o("input",{id:"currencyUPerTime","onUpdate:modelValue":t[1]||(t[1]=e=>c(r).uPerTime=e),type:"number",min:"0",max:"1000",step:"1",class:["form-control text-right",{"bg-primary":c(r).uPerTime!=c(R).currency.uPerTime}],disabled:c(R).isPlaying},null,10,["disabled"]),[[x,c(r).uPerTime]]),o("span",Oe,[Le,o(we,{class:"px-0 ml-2",info:"info-currency-uPerTime"})])]),o(ve,{infoId:"info-currency-uPerTime"},{default:i((()=>[o(c(J),null,{default:i((()=>[Ne])),_:1}),o(c(K),null,{default:i((()=>[qe])),_:1})])),_:1}),o("div",De,[o("label",Fe,[o(c(J),null,{default:i((()=>[Ue])),_:1}),o(c(K),null,{default:i((()=>[Ie])),_:1})]),y(o("input",{id:"currencyRevaluationTime","onUpdate:modelValue":t[2]||(t[2]=e=>c(r).revaluationTime=e),type:"number",min:"1",max:"400",step:"1",class:["form-control text-right",{"bg-primary":c(r).revaluationTime!=c(R).currency.revaluationTime}],disabled:c(R).isPlaying},null,10,["disabled"]),[[x,c(r).revaluationTime]]),o("span",Re,[d(p(c(G)(c(R).creationPeriod,c(r).revaluationTime))+" ",1),o(we,{class:"px-0 ml-2",info:"info-currency-revaluationTime"})])]),o(ve,{infoId:"info-currency-revaluationTime"},{default:i((()=>[o(c(J),null,{default:i((()=>[Ve])),_:1}),o(c(K),null,{default:i((()=>[Be])),_:1})])),_:1}),o("div",Xe,[y(o("select",{"onUpdate:modelValue":t[3]||(t[3]=e=>c(r).mode=e),id:"currencyMode",class:["form-control select-text-center",{"bg-primary":c(r).mode!=c(R).currency.mode}],disabled:c(R).isPlaying},[Ye,$e],10,["disabled"]),[[v,c(r).mode]]),y(o("input",{id:"currencyExpression","onUpdate:modelValue":t[4]||(t[4]=e=>c(r).expression=e),type:"text",class:["form-control text-right",{"bg-primary":c(r).expression!=c(R).currency.expression}],disabled:c(R).isPlaying},null,10,["disabled"]),[[x,c(r).expression]]),o("span",ze,[Ke,o(we,{class:"px-0 ml-2",info:"info-currency-expression"})])]),o(ve,{infoId:"info-currency-expression"},{default:i((()=>[o(c(J),null,{default:i((()=>[Je])),_:1}),o(c(K),null,{default:i((()=>[Ge])),_:1})])),_:1}),c(f)?(l(),s("div",Qe,[o("button",{type:"button",class:"btn btn-secondary mr-auto",onClick:t[5]||(t[5]=e=>Object.assign(c(r),c(R).currency))},[o(c(J),null,{default:i((()=>[We])),_:1}),o(c(K),null,{default:i((()=>[Ze])),_:1})]),o("button",{type:"button",class:"btn btn-primary",onClick:t[6]||(t[6]=e=>(()=>{const{expression:e,mode:t,uPerTime:n,revaluationTime:a}=r;R.updateCurrency({expression:e,mode:t,uPerTime:n,revaluationTime:a})})())},[o(c(J),null,{default:i((()=>[He])),_:1}),o(c(K),null,{default:i((()=>[et])),_:1})])])):g("",!0),o("div",tt,[n.value?(l(),s("button",{key:1,type:"button",class:"btn btn-secondary form-control text-left",onClick:t[8]||(t[8]=e=>n.value=!1)},[o(c(J),null,{default:i((()=>[st])),_:1}),o(c(K),null,{default:i((()=>[rt])),_:1}),ut])):(l(),s("button",{key:0,type:"button",class:"btn btn-secondary form-control text-left",onClick:t[7]||(t[7]=e=>n.value=!0)},[o(c(J),null,{default:i((()=>[nt])),_:1}),o(c(K),null,{default:i((()=>[at])),_:1}),lt]))]),n.value?(l(),s("div",ot,[o("div",ct,[o("label",it,[o(c(J),null,{default:i((()=>[dt])),_:1}),o(c(K),null,{default:i((()=>[mt])),_:1})]),o("input",{id:"currencyMass",value:c(R).currencyWithoutDecimal(c(R).currency.monetaryMass),type:"text",class:"form-control text-right",disabled:""},null,8,["value"]),ft]),o("div",pt,[o("label",yt,[o(c(J),null,{default:i((()=>[gt])),_:1}),o(c(K),null,{default:i((()=>[bt])),_:1})]),o("input",{id:"currencyNbMembers",value:c(R).currency.nbMembers,type:"text",class:"form-control text-right",disabled:""},null,8,["value"])]),o("div",ht,[o("label",xt,[o(c(J),null,{default:i((()=>[vt])),_:1}),o(c(K),null,{default:i((()=>[_t])),_:1})]),o("input",{id:"currencyAvg",value:c(R).currencyDecimal(c(R).currency.average),type:"text",class:"form-control text-right",disabled:""},null,8,["value"]),o("span",wt,[o(c(J),null,{default:i((()=>[kt])),_:1}),o(c(K),null,{default:i((()=>[Tt])),_:1})])]),o("div",At,[o("label",Mt,[o(c(J),null,{default:i((()=>[Pt])),_:1}),o(c(K),null,{default:i((()=>[St])),_:1})]),o("input",{id:"currencyQuantitative",value:(a=c(R).currency.quantitative,a<1e6?a.toFixed(2):a.toExponential(3)),type:"text",class:"form-control text-right",disabled:""},null,8,["value"]),o("span",Ct,[o(c(J),null,{default:i((()=>[Et])),_:1}),o(c(K),null,{default:i((()=>[jt])),_:1})])]),o("div",Ot,[o("label",Lt,[o(c(J),null,{default:i((()=>[Nt])),_:1}),o(c(K),null,{default:i((()=>[qt])),_:1})]),o("input",{id:"currencyLastGrew",value:c(m),type:"text",class:"form-control text-right",disabled:""},null,8,["value"]),Dt]),o("div",Ft,[o("label",Ut,[o(c(J),null,{default:i((()=>[It])),_:1}),o(c(K),null,{default:i((()=>[Rt])),_:1})]),o("input",{id:"currencyLastMelt",value:c(R).currency.lastMelt,type:"text",class:"form-control text-right",disabled:""},null,8,["value"]),Vt])])):g("",!0)])]);var a}}},Xt={class:"text-center mb-3"},Yt=d("transaction"),$t=d("transaction"),zt=d("EN_info-transaction"),Kt=d("FR_info-transaction"),Jt={class:"text-center"},Gt={class:"input-group mb-1"},Qt={class:"input-group-text",for:"txFrom"},Wt=d(" fröm "),Zt=d(" de "),Ht={class:"input-group-text",for:"txTo"},en=d(" tö "),tn=d(" à "),nn=o("option",{disabled:"",value:""},"select öne",-1),an=o("option",{disabled:"",value:""},"qüi",-1),ln={class:"input-group mb-1"},sn=o("span",{class:"input-group-text"},"Ü",-1),rn={expose:[],setup(t){const n=e({from:"fÜne",to:"",value:1}),a=b((()=>R.accounts)),r=b((()=>R.accounts));return(e,t)=>(l(),s("div",null,[o("h4",Xt,[o(c(J),null,{default:i((()=>[Yt])),_:1}),o(c(K),null,{default:i((()=>[$t])),_:1}),o(we,{class:"position-absolute",info:"info-transaction"})]),o(ve,{infoId:"info-transaction"},{default:i((()=>[o(c(J),null,{default:i((()=>[zt])),_:1}),o(c(K),null,{default:i((()=>[Kt])),_:1})])),_:1}),o("form",Jt,[o("div",Gt,[o("label",Qt,[o(c(J),null,{default:i((()=>[Wt])),_:1}),o(c(K),null,{default:i((()=>[Zt])),_:1})]),y(o("select",{"onUpdate:modelValue":t[1]||(t[1]=e=>c(n).from=e),id:"txFrom",class:"form-control select-text-center"},[(l(!0),s(_,null,w(c(a),(e=>(l(),s("option",{value:e.name,key:e.name},p(e.name),9,["value"])))),128))],512),[[v,c(n).from]]),o("label",Ht,[o(c(J),null,{default:i((()=>[en])),_:1}),o(c(K),null,{default:i((()=>[tn])),_:1})]),y(o("select",{"onUpdate:modelValue":t[2]||(t[2]=e=>c(n).to=e),id:"txTo",class:"form-control select-text-center"},[o(c(J),null,{default:i((()=>[nn])),_:1}),o(c(K),null,{default:i((()=>[an])),_:1}),(l(!0),s(_,null,w(c(r),(e=>(l(),s("option",{value:e.name,key:e.name},p(e.name),9,["value"])))),128))],512),[[v,c(n).to]])]),o("div",ln,[y(o("input",{"onUpdate:modelValue":t[3]||(t[3]=e=>c(n).value=e),type:"number",step:"any",class:"form-control text-right"},null,512),[[x,c(n).value]]),sn,o("button",{type:"button",class:"btn btn-primary",onClick:t[4]||(t[4]=e=>c(R).doTx(c(n)))},"ök!")])])]))}};function un(e){return parseInt(e,10)}function on(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function cn(e,t,n){var a=e.x-t.x,l=e.y-t.y,s=Math.sqrt(a*a+l*l),r=a/s,u=l/s;return{x:t.x+r*n,y:t.y+u*n}}function dn(e,t){var n=e.shift();return"M"+n.x+" "+n.y+e.map((function(a,l){var s,r,u,o=e[l+1],c=e[l-1]||n,i=o&&(r=a,u=c,un((s=o).x+u.x)===un(2*r.x)&&un(s.y+u.y)===un(2*r.y));if(!o||i)return"L"+a.x+" "+a.y;var d=Math.min(on(c,a),on(o,a)),m=d/2<t?d/2:t,f=cn(c,a,m),p=cn(o,a,m);return"L"+f.x+" "+f.y+"S"+a.x+" "+a.y+" "+p.x+" "+p.y})).join("")}var mn={props:["smooth","data","boundary","radius","id","max","min","color","dash"],render:function(){var e,t=this,n=t.data,a=t.smooth,l=t.boundary,s=t.radius,r=t.id,u=t.max,o=t.min,c=t.dash,i=dn(function(e,t,n){var a=t.minX,l=t.minY,s=t.maxX,r=t.maxY,u=n.max,o=n.min,c=e.map((function(e){return"number"==typeof e?e:e.value})),i=Math.min.apply(Math,c.concat([o]))-.001,d=(s-a)/(c.length-1),m=(r-l)/(Math.max.apply(Math,c.concat([u]))+.001-i);return c.map((function(e,t){return{x:t*d+a,y:r-(e-i)*m+1e-5*+(t===c.length-1)-1e-5*+(0===t)}}))}(n,l,{max:u,min:o}),a?s:0);return e=this.color?this.color:"url(#"+r+")",k("path",{d:i,fill:"none",stroke:e,"stroke-dasharray":c})}},fn={props:["boundary","max","min"],render:function(){var e=this.boundary;return[k("text",{x:e.minX,y:e.minY-2,fill:"#EEEEEEBB","font-size":"0.6em"},Math.round(this.max/1e3)),k("line",{x1:e.minX,y1:e.minY,x2:e.maxX,y2:e.minY,stroke:"#EEEEEEBB"}),k("text",{x:e.minX,y:e.maxY-2,fill:"#EEEEEEBB","font-size":"0.6em"},Math.round(this.min/1e3)),k("line",{x1:e.minX,y1:e.maxY,x2:e.maxX,y2:e.maxY,stroke:"#EEEEEEBB"})]}},pn={props:["gradient","gradientDirection","id"],render:function(){var e=this,t=e.gradient,n=e.gradientDirection,a=e.id,l=t.length-1||1,s=t.slice().reverse().map((function(e,t){return k("stop",{offset:t/l,"stop-color":e})}));return k("defs",[k("linearGradient",{id:a,x1:+("left"===n),y1:+("top"===n),x2:+("right"===n),y2:+("bottom"===n)},s)])}},yn={name:"Trend",props:{data:{type:Array,required:!0},autoDraw:Boolean,autoDrawDuration:{type:Number,default:2e3},autoDrawEasing:{type:String,default:"ease"},gradient:{type:Array,default:function(){return["#000"]}},gradientDirection:{type:String,default:"top"},max:{type:Number,default:-1/0},min:{type:Number,default:1/0},height:Number,width:Number,padding:{type:Number,default:8},radius:{type:Number,default:10},smooth:Boolean},watch:{data:{immediate:!0,handler:function(e){var t=this;this.$nextTick((function(){if(!t.$isServer&&t.$refs.path&&t.autoDraw){var e=t.$refs.path.$el,n=e.getTotalLength();e.style.transition="none",e.style.strokeDasharray=n+" "+n,e.style.strokeDashoffset=Math.abs(n-(t.lastLength||0)),e.getBoundingClientRect(),e.style.transition="stroke-dashoffset "+t.autoDrawDuration+"ms "+t.autoDrawEasing,e.style.strokeDashoffset=0,t.lastLength=n}}))}}},render:function(){if(this.data&&!(this.data.length<2)){var e=this.width,t=this.height,n=this.padding,a=e||300,l=t||150,s={minX:n,minY:n,maxX:a-n,maxY:l-n};return k("svg",{width:e||"100%",height:t||"25%",viewBox:"0 0 "+a+" "+l},[k(pn,{gradient:this.gradient,gradientDirection:this.gradientDirection,id:"stats"}),k(fn,{boundary:s,max:Math.max.apply(Math,this.data.concat([this.max])),min:Math.min.apply(Math,this.data.concat([this.min]))}),k(mn,{smooth:this.smooth,data:this.data,boundary:s,radius:this.radius,max:this.max,min:this.min,id:"stats",ref:"path",dash:"0"})])}}},gn={name:"Trends",props:{data:{type:Array,required:!0},colors:{type:Array,required:!0},min:{type:Number,default:1/0},height:Number,width:Number,padding:{type:Number,default:8},radius:{type:Number,default:10},smooth:Boolean},render:function(){if(this.data){var e=this.width,t=this.height,n=this.padding,a=e||300,l=t||200,s={minX:n,minY:n,maxX:a-n,maxY:l-n},r=1e3;for(let e=0;e<this.data.length;e++){const t=this.data[e];if(t&&t.length>1)for(let e=0;e<t.length;e++)r=Math.max(r,t[e])}var u=[];for(let e=0;e<this.data.length;e++){const t=this.data[e];t&&t.length>1&&u.push(k(mn,{smooth:this.smooth,data:t,boundary:s,radius:this.radius,max:r,min:this.min,id:"stats",ref:"path"+e,color:this.colors[e],dash:e==this.data.length-1?"2 2":"0"}))}if(0!=u.length)return k("svg",{width:e||"100%",height:t||"25%",viewBox:"0 0 "+a+" "+l},[u,k(fn,{boundary:s,max:r,min:this.min})])}}};const bn={class:"text-center mb-3"},hn=d("account"),xn=d("compte"),vn=d("EN_info-account"),_n=d("FR_info-account"),wn={class:"mt-3 mb-3"},kn={class:"text-center mb-6"},Tn={class:"mx-auto input-group",style:{"max-width":"300px"}},An={disabled:"",value:null},Mn=d("whö"),Pn=d("qüi"),Sn={key:0},Cn={class:"display-3 text-center"},En={class:"align-baseline",style:{"font-size":"50%"}},jn=o("small",null," Ü",-1),On={key:0,class:"display-5 text-center"},Ln=d("bank"),Nn=d("banque"),qn={key:1,class:"display-5 text-center"},Dn=d("wallet"),Fn=d("compte simple"),Un={key:2,class:"display-5 text-center"},In=d("Üman"),Rn=d("Ümain"),Vn={class:"text-center mt-4"},Bn=d("transaction"),Xn=d("transaction"),Yn={class:"mb-4 justify-content-center mx-auto",style:{"max-width":"500px"}},$n={class:"input-group mb-1"},zn=o("small",{class:"input-group-text"},"Ü",-1),Kn={class:"input-group-text",for:"accountTxTo"},Jn=d(" tö "),Gn=d(" à "),Qn={disabled:"",value:""},Wn=d("someöne"),Zn=d("qüi"),Hn={class:"input-group"},ea={class:"input-group-text",for:"txMessage"},ta=d("message"),na=d("message"),aa={class:"text-center mt-4"},la=d("stats"),sa=d("stats"),ra={class:"text-center mt-4"},ua=d("diary"),oa=d("journal"),ca={class:"list-group list-group-flush pointer mx-auto",style:{"max-width":"450px"}},ia={key:0},da={style:{width:"85px"},class:"badge bg-light text-dark text-right"},ma={style:{width:"70px"},class:"d-inline-block text-center"},fa=d(" to "),pa=d(" à "),ya={key:1},ga={style:{width:"85px"},class:"badge bg-primary text-right"},ba={style:{width:"70px"},class:"d-inline-block text-center"},ha=d(" from "),xa=d(" de "),va={class:"text-right"},_a={class:"fw-bold"},wa={expose:[],setup(t){const n=e({account:null,accounts:b((()=>R.accounts.filter((e=>"bank"!=e.role)))),otherAccounts:b((()=>n.account?R.accounts.filter((e=>"bank"!=e.role&&e.name!=n.account.name)):null)),stats:[],transactions:[],tx:{from:"",to:"",message:"",value:1}}),r=()=>{n.account&&(n.transactions=R.getAccountTx(n.account.name,10).reverse(),n.stats=R.getAccountStats(n.account.name,"day"))};h((()=>n.account),(()=>{r()})),h((()=>R.currency),r,{deep:!0});const u=e=>R.currencyDecimal(e).slice(-2),d=e=>{if(!e)return"";if("!Ucreation"==e)return $({en:"> u crëate Ü!",fr:"> crëation de Ü !"});if(0==e.indexOf("!revaluation%")){let t=e.split("%")[1];return $({en:"> all the Ü melt by "+t+"%!",fr:"> tous les Ü fondent de "+t+"% !"})}return e?"> "+e:""},m=e=>{if(e>=R.currency.elapsedTime)switch(R.creationPeriod){case"day":return $({en:"today",fr:"aujourd'hui"});case"month":return $({en:"this month",fr:"ce mois-ci"});case"year":return $({en:"this year",fr:"cette année"})}const t=R.currency.elapsedTime-e,n=G(R.creationPeriod,t);return $({en:t+" "+n+" ago",fr:"il y a "+t+" "+n})};return a((()=>{if(!n.account){n.accounts.length>1&&(n.account=n.accounts[0])}})),(e,t)=>{return l(),s("div",null,[o("h4",bn,[o(c(J),null,{default:i((()=>[hn])),_:1}),o(c(K),null,{default:i((()=>[xn])),_:1}),o(we,{class:"position-absolute",info:"info-account"})]),o(ve,{infoId:"info-account"},{default:i((()=>[o(c(J),null,{default:i((()=>[vn])),_:1}),o(c(K),null,{default:i((()=>[_n])),_:1})])),_:1}),o("div",wn,[o("h3",kn,[o("div",Tn,[y(o("select",{"onUpdate:modelValue":t[1]||(t[1]=e=>c(n).account=e),class:"text-center mx-auto form-control select-text-center",style:{"font-size":"1.3em"}},[o("option",An,[o(c(J),null,{default:i((()=>[Mn])),_:1}),o(c(K),null,{default:i((()=>[Pn])),_:1})]),(l(!0),s(_,null,w(c(n).accounts,(e=>(l(),s("option",{value:e,key:e.name},[o("strong",null,p(e.name),1)],8,["value"])))),128))],512),[[v,c(n).account]])])]),c(n).account?(l(),s("div",Sn,[o("div",Cn,[o("span",null,p((a=c(n).account.balance,R.currencyDecimal(a).slice(0,-3))),1),o("small",En,"."+p(u(c(n).account.balance)),1),jn]),"bank"==c(n).account.role?(l(),s("p",On,[o(c(J),null,{default:i((()=>[Ln])),_:1}),o(c(K),null,{default:i((()=>[Nn])),_:1})])):"wallet"==c(n).account.role?(l(),s("p",qn,[o(c(J),null,{default:i((()=>[Dn])),_:1}),o(c(K),null,{default:i((()=>[Fn])),_:1})])):(l(),s("p",Un,[o(c(J),null,{default:i((()=>[In])),_:1}),o(c(K),null,{default:i((()=>[Rn])),_:1})])),o("h4",Vn,[o(c(J),null,{default:i((()=>[Bn])),_:1}),o(c(K),null,{default:i((()=>[Xn])),_:1})]),o("form",Yn,[o("div",null,[o("div",$n,[y(o("input",{"onUpdate:modelValue":t[2]||(t[2]=e=>c(n).tx.value=e),type:"number",max:Math.round(c(n).account.balance/100),step:"any",min:"0",class:"form-control text-right"},null,8,["max"]),[[x,c(n).tx.value]]),zn,o("label",Kn,[o(c(J),null,{default:i((()=>[Jn])),_:1}),o(c(K),null,{default:i((()=>[Gn])),_:1})]),y(o("select",{"onUpdate:modelValue":t[3]||(t[3]=e=>c(n).tx.to=e),id:"accountTxTo",class:"form-control p-1 select-text-center"},[o("option",Qn,[o(c(J),null,{default:i((()=>[Wn])),_:1}),o(c(K),null,{default:i((()=>[Zn])),_:1})]),(l(!0),s(_,null,w(c(n).otherAccounts,(e=>(l(),s("option",{value:e.name,key:e.name},[o("strong",null,p(e.name),1)],8,["value"])))),128))],512),[[v,c(n).tx.to]]),o("button",{type:"button",class:"btn btn-primary",onClick:t[4]||(t[4]=e=>(n.tx.from=n.account.name,R.doTx(n.tx)&&(n.tx.message=""),void r()))},"ök!")]),o("div",Hn,[o("label",ea,[o(c(J),null,{default:i((()=>[ta])),_:1}),o(c(K),null,{default:i((()=>[na])),_:1})]),y(o("input",{"onUpdate:modelValue":t[5]||(t[5]=e=>c(n).tx.message=e),type:"text",maxlength:"32",class:"form-control",id:"txMessage"},null,512),[[x,c(n).tx.message]])])])]),o("h4",aa,[o(c(J),null,{default:i((()=>[la])),_:1}),o(c(K),null,{default:i((()=>[sa])),_:1})]),o(c(yn),{class:"p-2 stats",data:c(n).stats,gradientDirection:"top",gradient:["#f560a2","#e83283","#bd125e"],padding:10,radius:8,"stroke-width":1.5,"stroke-linecap":"butt",min:0,max:1e3,"auto-draw":"",smooth:""},null,8,["data","stroke-width"]),o("h4",ra,[o(c(J),null,{default:i((()=>[ua])),_:1}),o(c(K),null,{default:i((()=>[oa])),_:1})]),o("ul",ca,[(l(!0),s(_,null,w(c(n).transactions,(e=>(l(),s("li",{key:e.id,class:"list-group-item list-group-item-action p-2"},[o("div",{class:"d-flex w-100 justify-content-between",onClick:t=>c(n).tx.to=e.from==c(n).account.name?e.to:e.from},[o("div",null,[e.from==c(n).account.name?(l(),s("h5",ia,[o("span",da,p(c(R).currencyDecimal(e.value))+" Ü",1),o("span",ma,[o(c(J),null,{default:i((()=>[fa])),_:1}),o(c(K),null,{default:i((()=>[pa])),_:1})]),o("strong",null,[o("span",null,p(e.to),1)])])):(l(),s("h5",ya,[o("span",ga,p(c(R).currencyDecimal(e.value))+" Ü",1),o("span",ba,[o(c(J),null,{default:i((()=>[ha])),_:1}),o(c(K),null,{default:i((()=>[xa])),_:1})]),o("strong",null,[o("span",null,p(e.from),1)])]))]),o("small",va,p(m(e.time)),1)],8,["onClick"]),o("span",_a,p(d(e.message)),1)])))),128))])])):g("",!0)])]);var a}}},ka={class:"text-center mb-3"},Ta=d("accounts"),Aa=d("comptes"),Ma=d("EN_info-accounts"),Pa=d("FR_info-accounts"),Sa={class:"table table-hover"},Ca=d("stats"),Ea=d("stats"),ja=d("näme"),Oa=d("nöm"),La=d("röle"),Na=d("röle"),qa=d("balance"),Da=d("solde"),Fa={class:"text-center"},Ua=d("Üman"),Ia=d("Ümain"),Ra=d("wället"),Va=d("sïmple"),Ba={key:2,class:"btn btn-sm btn-danger fw-bold role",disabled:""},Xa=d("bänk"),Ya=d("bänque"),$a={class:"text-right"},za=o("small",null," Ü ",-1),Ka=d("reset"),Ja=d("raz"),Ga=o("i",{class:"fa fa-trash"},null,-1),Qa={class:"input-group"},Wa={value:"human"},Za=d("Üman"),Ha=d("Ümain"),el={value:"wallet"},tl=d("wället"),nl=d("sïmple"),al=d("nëw!"),ll=d("noüveau!"),sl={expose:[],setup(t){const n=e({onlySelected:!1,sortKey:"name",sortOrder:1,newAccount:{name:"",role:"human"}}),a=b((()=>{let e=R.accounts.filter((e=>"bank"!=e.role));return n.onlySelected&&(e=e.filter((e=>R.isSelected(e)))),e.sort(((e,t)=>{let a=e[n.sortKey],l=t[n.sortKey];return(a===l?0:a>l?1:-1)*n.sortOrder}))})),r=e=>{e==n.sortKey&&(n.sortOrder=-n.sortOrder),n.sortKey=e},u=e=>{let t="human"==e.role?"wallet":"human";R.updateAccount(e,{role:t})},m=e=>{const t=R.selectedAccounts.get(e.name);return null==t?null:t.color};return(e,t)=>(l(),s("div",null,[o("h4",ka,[o(c(J),null,{default:i((()=>[Ta])),_:1}),o(c(K),null,{default:i((()=>[Aa])),_:1}),o(we,{class:"position-absolute",info:"info-accounts"})]),o(ve,{infoId:"info-accounts"},{default:i((()=>[o(c(J),null,{default:i((()=>[Ma])),_:1}),o(c(K),null,{default:i((()=>[Pa])),_:1})])),_:1}),o("table",Sa,[o("thead",null,[o("tr",null,[o("th",{onClick:t[1]||(t[1]=e=>c(n).onlySelected=!c(n).onlySelected),class:[{"bg-primary":c(n).onlySelected},"pointer"],style:{width:"25px"}},[o(c(J),null,{default:i((()=>[Ca])),_:1}),o(c(K),null,{default:i((()=>[Ea])),_:1})],2),o("th",{onClick:t[2]||(t[2]=e=>r("name")),class:"pointer"},[o(c(J),null,{default:i((()=>[ja])),_:1}),o(c(K),null,{default:i((()=>[Oa])),_:1})]),o("th",{onClick:t[3]||(t[3]=e=>r("role")),class:"text-center pointer"},[o(c(J),null,{default:i((()=>[La])),_:1}),o(c(K),null,{default:i((()=>[Na])),_:1})]),o("th",{onClick:t[4]||(t[4]=e=>r("balance")),class:"text-right pointer"},[o(c(J),null,{default:i((()=>[qa])),_:1}),o(c(K),null,{default:i((()=>[Da])),_:1})])])]),o("tbody",null,[(l(!0),s(_,null,w(c(a),(e=>(l(),s("tr",{key:e.name},[o("td",{style:{"background-color":m(e)},onClick:t=>c(R).select(e),class:"pointer"},null,12,["onClick"]),o("td",{onClick:t=>c(R).select(e),class:"pointer"},p(e.name),9,["onClick"]),o("td",Fa,["human"==e.role?(l(),s("button",{key:0,class:"btn btn-sm btn-primary fw-bold role",onClick:t=>u(e)},[o(c(J),null,{default:i((()=>[Ua])),_:1}),o(c(K),null,{default:i((()=>[Ia])),_:1})],8,["onClick"])):"wallet"==e.role?(l(),s("button",{key:1,class:"btn btn-sm btn-secondary fw-bold role",onClick:t=>u(e)},[o(c(J),null,{default:i((()=>[Ra])),_:1}),o(c(K),null,{default:i((()=>[Va])),_:1})],8,["onClick"])):(l(),s("button",Ba,[o(c(J),null,{default:i((()=>[Xa])),_:1}),o(c(K),null,{default:i((()=>[Ya])),_:1})]))]),o("td",$a,["bank"!=e.role?(l(),s(_,{key:0},[o("strong",null,[d(p(c(R).currencyDecimal(e.balance)),1),za]),o("a",{href:"#",onClick:T((t=>(e=>{R.updateAccount(e,{balance:0})})(e)),["stop","prevent"]),class:"mx-2"},[o(c(J),null,{default:i((()=>[Ka])),_:1}),o(c(K),null,{default:i((()=>[Ja])),_:1})],8,["onClick"])],64)):g("",!0),e.name!=c(R).name?(l(),s("a",{key:1,href:"#",onClick:T((t=>(e=>{const t=e.name;confirm($({fr:"êtes vous sûr de supprimer "+t+" ?",en:"Are you sure to delete "+t+"?"}))&&R.deleteAccount(e)})(e)),["stop","prevent"]),class:"text-warning"},[Ga],8,["onClick"])):g("",!0)])])))),128))])]),o("div",Qa,[y(o("input",{placeholder:c($)({en:"näme",fr:"nöm"}),"onUpdate:modelValue":t[5]||(t[5]=e=>c(n).newAccount.name=e),type:"text",class:"form-control",id:"accountName",maxlength:"10"},null,8,["placeholder"]),[[x,c(n).newAccount.name]]),y(o("select",{"onUpdate:modelValue":t[6]||(t[6]=e=>c(n).newAccount.role=e),class:"form-control",style:{"max-width":"100px"}},[o("option",Wa,[o(c(J),null,{default:i((()=>[Za])),_:1}),o(c(K),null,{default:i((()=>[Ha])),_:1})]),o("option",el,[o(c(J),null,{default:i((()=>[tl])),_:1}),o(c(K),null,{default:i((()=>[nl])),_:1})])],512),[[v,c(n).newAccount.role]]),o("button",{type:"button",disabled:3>c(n).newAccount.name.length||c(R).accounts.some((e=>e.name==c(n).newAccount.name)),class:"btn btn-primary",onClick:t[7]||(t[7]=e=>(n.newAccount.name=n.newAccount.name.trim(),void R.createAccount(n.newAccount)))},[o(c(J),null,{default:i((()=>[al])),_:1}),o(c(K),null,{default:i((()=>[ll])),_:1})],8,["disabled"])])]))}},rl={class:"text-center mb-3"},ul=d("stats"),ol=d("stats"),cl=d("EN_info-stats"),il=d("FR_info-stats"),dl={class:"input-group mx-auto mt-3 mb-1",style:{"max-width":"250px"}},ml={class:"input-group-text px-1"},fl=d("referential"),pl=d("référentiel"),yl={value:"relative"},gl=d("relative"),bl=d("relatif"),hl={value:"quantitative"},xl=d("quantitative"),vl=d("quantitatif"),_l={value:"average"},wl=d("average"),kl=d("moyenne"),Tl={class:"input-group-text p-1"},Al=d("EN_info-stats-referential"),Ml=d("FR_info-stats-referential"),Pl={expose:[],setup(t){const n=e({referential:"relative",stats:[],colors:[]}),r=()=>{let e=R.getAccountStats(R.name),t=null,a=[],l=[];R.selectedAccounts.forEach(((s,r)=>{if(r!=R.name&&(t=R.getAccountStats(r),t)){if("average"==n.referential)for(let n=0;n<t.length;n++)t[n]=0==e[n].average?0:t[n]/e[n].average*1e5;else if("quantitative"==n.referential)for(let n=0;n<t.length;n++)t[n]=t[n]*(e[n].quantitative/R.currency.quantitative);a.push(t),l.push(s.color)}})),"average"==n.referential?t=new Array(e.length).fill(1e5):"relative"==n.referential?t=e.map((e=>e.average)):"quantitative"==n.referential&&(t=e.map((e=>e.average*(e.quantitative/R.currency.quantitative)))),a.push(t),l.push(R.selectedAccounts.get(R.name).color),n.stats=a,n.colors=l};return h((()=>R.selectedAccounts),r,{deep:!0}),h((()=>R.currency),r,{deep:!0}),h((()=>n.referential),r),a(r),(e,t)=>(l(),s("div",null,[o("h4",rl,[o(c(J),null,{default:i((()=>[ul])),_:1}),o(c(K),null,{default:i((()=>[ol])),_:1}),o(we,{class:"position-absolute",info:"info-stats"})]),o(ve,{infoId:"info-stats"},{default:i((()=>[o(c(J),null,{default:i((()=>[cl])),_:1}),o(c(K),null,{default:i((()=>[il])),_:1})])),_:1}),o(c(gn),{class:"p-2 stats",data:c(n).stats,colors:c(n).colors,padding:10,radius:8,"stroke-width":1.4,"stroke-linecap":"butt",min:0,"auto-draw":"",smooth:""},null,8,["data","colors","stroke-width"]),o("div",dl,[o("label",ml,[o(c(J),null,{default:i((()=>[fl])),_:1}),o(c(K),null,{default:i((()=>[pl])),_:1})]),y(o("select",{"onUpdate:modelValue":t[1]||(t[1]=e=>c(n).referential=e),class:"form-control px-1 select-text-center"},[o("option",yl,[o(c(J),null,{default:i((()=>[gl])),_:1}),o(c(K),null,{default:i((()=>[bl])),_:1})]),o("option",hl,[o(c(J),null,{default:i((()=>[xl])),_:1}),o(c(K),null,{default:i((()=>[vl])),_:1})]),o("option",_l,[o(c(J),null,{default:i((()=>[wl])),_:1}),o(c(K),null,{default:i((()=>[kl])),_:1})])],512),[[v,c(n).referential]]),o("label",Tl,[o(we,{class:"px-0",info:"info-stats-referential"})])]),o(ve,{infoId:"info-stats-referential"},{default:i((()=>[o(c(J),null,{default:i((()=>[Al])),_:1}),o(c(K),null,{default:i((()=>[Ml])),_:1})])),_:1})]))}};const Sl={class:"container mt-3 mb-5"},Cl=o("h1",{class:"display-1 text-center mb-3"},[o("img",{src:"/favicon90x90.png",class:"icon"}),o("span",{class:"align-middle"},[d(" f"),o("small",null,"Ü"),d("ne")])],-1),El={class:"justify-content-center mb-3 input-group mx-auto fit-content"},jl={class:"lead text-center mb-3"},Ol=o("strong",null,[d("f"),o("small",null,"Ü"),d("ne")],-1),Ll=d(" is a web app to test and play with a simple "),Nl=o("a",{href:"https://libre-currency.org"},"Libre Currency",-1),ql=d(" called "),Dl=o("strong",null,[d("f"),o("small",null,"Ü"),d("ne")],-1),Fl=d(" (pronounced /fən/ like fun) "),Ul=o("strong",null,[d("f"),o("small",null,"Ü"),d("ne")],-1),Il=d(" est une appli web qui permet de jouer avec une simple "),Rl=o("a",{href:"https://monnaie-libre.fr/"},"Monnaie Libre",-1),Vl=d(" appelée "),Bl=o("strong",null,[d("f"),o("small",null,"Ü"),d("ne")],-1),Xl=d(" (prononcée /fən/ comme fun en anglais) "),Yl=d("EN_info-home-libreCurrency"),$l=d("FR_info-home-libreCurrency"),zl={class:"lead text-center"},Kl=d(" a "),Jl=o("strong",null,"Üman",-1),Gl=d(" account create some new Ü (the Ünit of the f"),Ql=o("small",null,"Ü",-1),Wl=d("ne money) every "),Zl=d(" un compte "),Hl=o("strong",null,"Ümain",-1),es=d(" crée de nouvelles "),ts=o("small",null,"Ü",-1),ns=d(" (l'Ünité de la monnaie f"),as=o("small",null,"Ü",-1),ls=d("ne) chaque "),ss={value:"day"},rs={value:"month"},us={value:"year"},os={class:"lead text-center"},cs=d(" the old created Ünits melt according to a "),is=o("strong",null,"mathematical",-1),ds=d("s formula at each "),ms=o("strong",null,"revaluation period",-1),fs=d(" les anciennes Ünités fondent suivant une "),ps=o("strong",null,"formule",-1),ys=d(" mathématique à chaque "),gs=o("strong",null,"période de réévaluation",-1),bs=d("EN_info-home-funiter"),hs=d("FR_info-home-funiter"),xs={class:"d-flex align-items-start flex-wrap p-2 mt-3",style:{"justify-content":"space-evenly"}},vs={style:{"min-width":"30vw"}},_s={class:"mx-auto",style:{"min-width":"35vw","max-width":"600px"}},ws={style:{"min-width":"30vw"}};let ks=JSON.parse(localStorage.getItem("state"));R.restoreState(ks);var Ts={mounted:(e,t)=>{if("function"!=typeof t.value)return;let n=null,a=null;const l=e=>{"click"===e.type&&0!==e.button||(e.preventDefault(),null===n&&(r(),n=setTimeout((()=>{a=setInterval((()=>{r()}),50),r()}),200)))},s=()=>{null!==n&&(clearTimeout(n),n=null),a&&(clearInterval(a),a=null)},r=e=>{t.value(e)};["mousedown","touchstart"].forEach((t=>e.addEventListener(t,l))),["click","mouseout","touchend","touchcancel"].forEach((t=>e.addEventListener(t,s)))}};A({expose:[],setup(e){u("info");const t=()=>{localStorage.setItem("state",JSON.stringify(R.getState()))};h((()=>R.currency),t,{deep:!0}),h((()=>R.selectedAccounts),t,{deep:!0});const n=[];if(R.accounts.length<=1){const e={name:"Alice",balance:1e4,role:"human"},t={name:"Bob",balance:2e4,role:"human"},n={name:"Carole",balance:0,role:"human"};R.addAccounts([e,t,n]),R.select(e),R.select(t),R.select(n)}return(e,t)=>(l(),s("div",null,[o("div",Sl,[Cl,o("div",El,[o("button",{class:["btn btn-sm text-light",{"btn-outline-secondary":"fr"!=c(X),"btn-primary":"fr"==c(X)}],onClick:t[1]||(t[1]=e=>c(z)("fr"))},"FR",2),o("button",{class:["btn btn-sm text-light",{"btn-outline-secondary":"en"!=c(X),"btn-primary":"en"==c(X)}],onClick:t[2]||(t[2]=e=>c(z)("en"))},"EN",2)]),o("p",jl,[o(c(J),null,{default:i((()=>[Ol,Ll,Nl,ql,Dl,Fl])),_:1}),o(c(K),null,{default:i((()=>[Ul,Il,Rl,Vl,Bl,Xl])),_:1}),o(we,{class:"px-0",info:"info-home-libreCurrency"})]),o(ve,{infoId:"info-home-libreCurrency"},{default:i((()=>[o(c(J),null,{default:i((()=>[Yl])),_:1}),o(c(K),null,{default:i((()=>[$l])),_:1})])),_:1}),o("p",zl,[o(c(J),null,{default:i((()=>[Kl,Jl,Gl,Ql,Wl])),_:1}),o(c(K),null,{default:i((()=>[Zl,Hl,es,ts,ns,as,ls])),_:1}),y(o("select",{class:"form-control select-text-center d-inline fit-content","onUpdate:modelValue":t[3]||(t[3]=e=>c(R).creationPeriod=e)},[o("option",ss,p(c(G)("day")),1),o("option",rs,p(c(G)("month")),1),o("option",us,p(c(G)("year")),1)],512),[[v,c(R).creationPeriod]])]),o("p",os,[o(c(J),null,{default:i((()=>[cs,is,ds,ms])),_:1}),o(c(K),null,{default:i((()=>[fs,ps,ys,gs])),_:1})]),o(ve,{infoId:"info-home-funiter",class:"mx-auto w-auto mt-3"},{default:i((()=>[o(c(J),null,{default:i((()=>[bs])),_:1}),o(c(K),null,{default:i((()=>[hs])),_:1})])),_:1})]),o(B,{accounts:n,selectedAccounts:n,class:"mt-3"},{default:i((()=>[o(ue,{class:"mx-auto",style:{"max-width":"400px"}}),o(ge,{class:"mx-auto sticky-top"}),o("div",xs,[o("div",vs,[o(Bt,{class:"mb-3 mx-auto",style:{width:"380px"}})]),o("div",_s,[o(Pl,{class:"mb-3"}),o(rn,{class:"mb-3 mx-auto",style:{"max-width":"450px"}})]),o("div",ws,[o(sl,{class:"mb-3 mx-auto",style:{"max-width":"450px"}})]),o(wa,{class:"mb-3 mx-auto",style:{"min-width":"35vw","max-width":"600px"}})])])),_:1})]))}}).directive("longclick",Ts).mount("#app");

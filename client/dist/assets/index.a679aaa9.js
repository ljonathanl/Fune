import{r as e,a as t,e as n,o as a,b as l,c as s,d as r,f as o,g as u,u as i,w as c,h as d,F as m,i as f,t as p,j as y,k as b,l as h,m as g,v as x,n as v,p as _,q as w,s as T,x as k,y as A}from"./vendor.5278ef37.js";!function(e=".",t="__import__"){try{self[t]=new Function("u","return import(u)")}catch(n){const a=new URL(e,location),l=e=>{URL.revokeObjectURL(e.src),e.remove()};self[t]=e=>new Promise(((n,s)=>{const r=new URL(e,a);if(self[t].moduleMap[r])return n(self[t].moduleMap[r]);const o=new Blob([`import * as m from '${r}';`,`${t}.moduleMap['${r}']=m;`],{type:"text/javascript"}),u=Object.assign(document.createElement("script"),{type:"module",src:URL.createObjectURL(o),onerror(){s(new Error(`Failed to import: ${e}`)),l(u)},onload(){n(self[t].moduleMap[r]),l(u)}});document.head.appendChild(u)})),self[t].moduleMap={}}}("/assets/");const M="human",P="bank",S="grew",C="melt";let E=0;const U={name:"fÜne",logo:"fї",uValue:1e3,isPlaying:!1,txLimit:100,statLimit:100,symbol:"Ü",version:"0.1.1",stepTime:1},N={version:1,beginStat:0};U.doTx=(e,t=!0)=>{let n=Object.assign({from:"",to:"",message:"",value:0,date:(new Date).toISOString(),time:N.currency.elapsedTime},e);var a=N.accounts[n.from],l=N.accounts[n.to];return n.value<=0||!a||!l||a==l||a.role!=P&&a.balance-n.value<0?null:(l.role!=P&&(l.balance+=n.value),a.role!=P&&(a.balance-=n.value,a.balance<10&&(a.balance=0)),n.balanceFrom=a.balance,n.balanceTo=l.balance,N.transactions.push(n),N.transactions.length>U.txLimit&&(N.transactions=N.transactions.slice(N.transactions.length-U.txLimit)),t&&F(),n)},U.getCurrency=()=>Object.assign({},N.currency),U.updateCurrency=e=>{const t=U.isPlaying;return t&&U.stop(),Object.assign(N.currency,e),F(),t&&U.play(),Object.assign({},N.currency)},U.getAccount=e=>N.accounts[e],U.getAccounts=()=>Object.values(N.accounts),U.createAccount=e=>{if(e.name=e.name.trim(),!e.name||N.accounts[e.name])return null;let t=N.accounts[e.name]=Object.assign({name:"",balance:0,role:"wallet",date:(new Date).toISOString(),time:N.currency.elapsedTime},e);return F(),t},U.updateAccount=(e,t)=>{let n=N.accounts[e];return!n||"bank"==n.role||t.name&&e!=t.name?null:(n=Object.assign(n,t),F(),n)},U.deleteAccount=e=>{let t=N.accounts[e];return t&&t.name!=U.name?(delete N.accounts[e],delete N.stats[e],F(),t):null},U.getAccountTx=(e,t)=>{if(!N.accounts[e])return null;let n=N.transactions.filter((t=>t.from==e||t.to==e));return t>0&&t<n.length&&(n=n.slice(-t)),n},U.getAccountStats=e=>{if(!N.accounts[e])return null;const t=N.stats[e];if(!t)return[];let n=N.currency.elapsedTime%U.statLimit;return N.beginStat==n?[t[N.beginStat],t[N.beginStat]]:n>N.beginStat?t.slice(N.beginStat,n+1):t.slice(N.beginStat).concat(t.slice(0,n+1))};const j={uPerTime:1,elapsedTime:0,revaluationTime:1,nbMembers:0,monetaryMass:0,mode:C,lastMelt:0,average:0,quantitative:1,expression:"0.1"};U.expressionParser=(e,t)=>parseFloat(e);const O=/^!(.*)/,q=U.uValue,L=(e,t)=>{const n=N.currency.elapsedTime%U.statLimit;let a=N.stats[e];a||(a=new Array(U.statLimit).fill(0),N.stats[e]=a),a[n]=t},D=e=>{const t=e.name.match(O);let n=1;if(t){try{n=Math.round(U.expressionParser(t[1],{M:N.currency.monetaryMass,N:N.currency.nbMembers,T:N.currency.elapsedTime}))}catch(a){}n<1&&(n=1)}return n},F=()=>{let e=0,t=0;Object.values(N.accounts).forEach((n=>{if(n.role!=P){const a=D(n);n.role==M&&(t+=a),e+=n.balance,L(n.name,Math.floor(n.balance/a))}})),N.currency.nbMembers=t,N.currency.monetaryMass=e,N.currency.average=t>0?Math.floor(e/t):0,L(U.name,Object.assign({},N.currency))},X=(e=!0)=>{if(N.currency.elapsedTime>=999)return void U.stop();N.currency.elapsedTime++,N.currency.elapsedTime>=U.statLimit&&N.currency.elapsedTime%U.statLimit==N.beginStat&&(N.beginStat=(N.beginStat+1)%U.statLimit);let t=0,n=0;const a=N.currency.uPerTime>=0?Math.floor(N.currency.uPerTime):0,l=q*N.currency.revaluationTime*a,s=N.accounts[U.name],r=N.currency.elapsedTime%N.currency.revaluationTime==0;r&&N.currency.nbMembers>0&&(t=U.expressionParser(N.currency.expression,{M:N.currency.monetaryMass/l,N:N.currency.nbMembers,T:N.currency.elapsedTime}),N.currency.mode==S&&(t=1-1/(1+t)),t=Math.max(0,Math.min(1,t)),n=(100*t).toFixed(2)),Object.values(N.accounts).forEach((e=>{if(e.role!=P){const o=D(e);if(r&&t>0&&e.balance>9){let a=e.balance*t;a=Math.min(a>l?Math.ceil(a):Math.floor(a),e.balance),a<10&&(a=10),U.doTx({from:e.name,to:s.name,message:"!revaluation%"+n,value:a},!1)}e.role==M&&a>0&&U.doTx({from:s.name,to:e.name,message:"!Ucreation",value:o*q*a},!1)}})),r&&(N.currency.lastMelt=n,N.currency.quantitative=N.currency.quantitative*(1+1/(1/t-1))),F(),e&&(E=setTimeout(X,1e3*U.stepTime,!0)),U.onTimeChange(N.currency.elapsedTime)};U.getState=()=>Object.assign({},N),U.restoreState=e=>!(!e||!e.version||1!=e.version)&&(e.currency&&(N.currency=Object.assign(j,e.currency)),e.accounts&&(N.accounts=e.accounts),e.transactions&&(N.transactions=e.transactions),e.stats&&(N.stats=e.stats),e.beginStat&&(N.beginStat=e.beginStat),!0),U.start=(e,t)=>{U.restoreState(t),e&&(U.expressionParser=e),N.currency||(N.currency=j),N.accounts||(N.accounts={}),N.accounts[U.name]={name:U.name,balance:0,role:P,date:(new Date).toISOString(),time:0},N.transactions||(N.transactions=[]),N.stats||(N.stats={})},U.onTimeChange=()=>{},U.reset=()=>{U.stop(),Object.values(N.accounts).forEach((e=>{if(e.balance=0,0!=N.beginStat)return;const t=N.stats[e.name][0];t<=0||(e.balance=D(e)*t)})),N.transactions=[],N.stats={},N.currency.elapsedTime=0,N.currency.lastMelt=0,N.currency.quantitative=1,N.beginStat=0,F()},U.play=(e=!0)=>{if(!U.isPlaying)return 0!=E&&(clearTimeout(E),E=0),U.isPlaying=e,X(e),!0},U.unplay=()=>{if(!U.isPlaying&&N.currency.elapsedTime>0){const e=(N.currency.elapsedTime-1)%U.statLimit,t=N.stats[U.name][e];if(t&&t.elapsedTime==N.currency.elapsedTime-1)return N.currency=t,Object.values(N.accounts).forEach((t=>{if(t.role!=P){const n=D(t);t.balance=N.stats[t.name][e]*n}})),F(),N.transactions=N.transactions.filter((t=>t.time<=e)),!0}return!1},U.stop=()=>{U.isPlaying&&(0!=E&&(clearTimeout(E),E=0),U.isPlaying=!1)},console.log(U.name+" v"+U.version);const R={color:"#FFFFFF"},Y=e({name:U.name,isPlaying:!1,uValue:U.uValue,uSymbol:"Ü",creationPeriod:"year",stepTime:1,currency:{},accounts:[],selectedAccounts:new Map});Y.selectedAccounts.set(U.name,R);const I=U.uValue;Y.isSelected=e=>null!=Y.selectedAccounts.get(e.name),Y.select=e=>{if("bank"==e.role)return;let n=Y.selectedAccounts.get(e.name);!n&&U.getAccount(e.name)?(n={color:t.randomColor()},Y.selectedAccounts.set(e.name,n)):Y.selectedAccounts.delete(e.name)},Y.doTx=e=>{const t=U.doTx({from:e.from,to:e.to,message:e.message,value:Math.floor(e.value*I)});return t&&Y.refresh(),t},Y.updateCurrency=e=>(Y.currency=U.updateCurrency(e),Y.currency),Y.addAccounts=e=>{e&&(e.forEach((e=>{U.createAccount(e)||U.updateAccount(e.name,e)})),Y.refresh())},Y.createAccount=e=>{let t=U.createAccount(e);return t&&(Y.accounts.push(t),Y.refresh()),t},Y.updateAccount=(e,t)=>{let n=U.updateAccount(e.name,t);return n&&(n=Object.assign(e,n),Y.refresh()),n},Y.deleteAccount=e=>{let t=null;return U.deleteAccount(e.name)&&(Y.isSelected(e)&&Y.select(e),t=e,Y.refresh()),t},Y.getAccountTx=(e,t)=>U.getAccountTx(e,t),Y.getAccountStats=e=>U.getAccountStats(e),Y.onTimeChange=()=>{Y.refresh()},Y.refresh=()=>{Y.accounts=U.getAccounts(),Y.currency=U.getCurrency()},Y.reset=()=>{U.reset(),Y.refresh(),Y.isPlaying=U.isPlaying},Y.play=e=>{U.stepTime=Y.stepTime,U.play(e)&&Y.refresh(),Y.isPlaying=U.isPlaying},Y.unplay=()=>{U.unplay()&&Y.refresh(),Y.isPlaying=U.isPlaying},Y.stop=()=>{U.stop(),Y.isPlaying=U.isPlaying},Y.getState=()=>{const e=U.getState();return e.selectedAccounts=Object.fromEntries(Y.selectedAccounts),e.creationPeriod=Y.creationPeriod,e},Y.restoreState=e=>{e&&(e.selectedAccounts&&e.selectedAccounts[U.name]&&(Y.selectedAccounts=new Map(Object.entries(e.selectedAccounts)),Y.selectedAccounts.set(U.name,R)),e.creationPeriod&&(Y.creationPeriod=e.creationPeriod),U.restoreState(e),Y.refresh())},Y.currencyWithoutDecimal=e=>Math.floor(e/I),Y.currencyDecimal=e=>(e/I).toFixed(2),U.onTimeChange=Y.onTimeChange,U.start(n,{}),Y.refresh();const V={expose:[],props:{currency:Object,accounts:Array,selectedAccounts:Array,autoPlay:Boolean},setup(e){const{currency:t,accounts:n,selectedAccounts:o}=e;return a((()=>{t&&Y.updateCurrency(t),n&&Y.addAccounts(n),o&&o.forEach((e=>{Y.select(e)}))})),(e,t)=>(l(),s("div",null,[r(e.$slots,"default")]))}},B=o("en"),$=e=>({render(){if(B.value==e)return this.$slots.default()}}),z=e=>e[B.value],K=e=>{B.value="fr"==e?"fr":"en"};K((navigator.userLanguage||navigator.languages&&navigator.languages.length&&navigator.languages[0]||navigator.language||navigator.browserLanguage||navigator.systemLanguage).substring(0,2));const G=$("fr"),J=$("en"),Q=(e,t=0)=>{switch(e){case"day":return z({en:"day",fr:"jour"})+(t>1?"s":"");case"month":return z({en:"month",fr:"mois"})+(t>1&&"fr"!=B.value?"s":"");case"year":return z({en:"year",fr:"an"})+(t>1?"s":"")}return e},W={class:"mb-3 text-center"},Z={class:"input-group d-inline"},H=u("i",{class:"fa fa-upload"},null,-1),ee=d(" load"),te=d(" charger"),ne=u("i",{class:"fa fa-download"},null,-1),ae=d(" save"),le=d(" sauvegarder"),se=u("i",{class:"fa fa-undo"},null,-1),re=d(" reset"),oe=d(" RAZ"),ue={expose:[],setup(e){const t=e=>{const t=e.target.files[0];if(t){const e=new FileReader;e.onload=function(e){var t=e.target.result;n(t)},e.readAsText(t)}else alert(z({en:"file not found",fr:"fichier introuvable"}));e.target.value=null},n=e=>{try{const t=JSON.parse(e);Y.stop(),Y.restoreState(t)}catch(t){console.log(t),alert(z({en:"can not read the file",fr:"le fichier ne peut pas être lu"}))}};return(e,n)=>(l(),s("div",W,[u("div",Z,[u("label",{class:["btn btn-dark mb-0 emboss",{disabled:i(Y).isPlaying}]},[H,u(i(J),null,{default:c((()=>[ee])),_:1}),u(i(G),null,{default:c((()=>[te])),_:1}),u("input",{type:"file",hidden:"",onChange:t},null,32)],2),u("button",{class:"btn btn-light text-dark emboss",onClick:n[1]||(n[1]=e=>(()=>{const e=Y.getState(),t=JSON.stringify(e);var n=new Blob([t],{type:"text/plain;charset=utf-8"});m.saveAs(n,"fune_"+(new Date).toISOString().substring(0,16)+".fun")})()),disabled:i(Y).isPlaying},[ne,u(i(J),null,{default:c((()=>[ae])),_:1}),u(i(G),null,{default:c((()=>[le])),_:1})],8,["disabled"])]),u("button",{class:"btn btn-secondary ml-3 emboss",onClick:n[2]||(n[2]=e=>i(Y).reset())},[se,u(i(J),null,{default:c((()=>[re])),_:1}),u(i(G),null,{default:c((()=>[oe])),_:1})])]))}};const ie={class:"navbar navbar-dark bg-dark w-100 control"},ce={class:"d-flex mx-auto align-items-center",style:{width:"400px"}},de={class:"ml-auto"},me={class:"ml-1 display-5 font-monospace mr-auto"},fe={class:"input-group d-inline mx-auto fit-content"},pe=u("i",{class:"fa fa-step-backward"},null,-1),ye=u("i",{class:"fa fa-step-forward"},null,-1),be=u("i",{class:"fa fa-play"},null,-1),he=u("i",{class:"fa fa-pause"},null,-1),ge={expose:[],setup(e){const t=()=>{Y.play(!1)},n=()=>{Y.unplay()};return(e,a)=>{const r=f("longclick");return l(),s("nav",ie,[u("div",ce,[u("img",{src:"/favicon64x64.png",class:"icon mr-auto ml-1 pointer",onClick:a[1]||(a[1]=e=>{window.scroll(0,0)})}),u("span",de,p(i(Q)(i(Y).creationPeriod)),1),u("span",me,p(1e3>=i(Y).currency.elapsedTime?("000"+i(Y).currency.elapsedTime).slice(-3):i(Y).currency.elapsedTime),1),u("div",fe,[y(u("button",{class:"btn btn-outline-light bg-light text-dark btn-sm pr-1 pl-2 emboss",disabled:i(Y).isPlaying},[pe],8,["disabled"]),[[r,n]]),y(u("button",{class:"btn btn-outline-light bg-dark text-light btn-sm pl-1 pr-2 emboss",disabled:i(Y).isPlaying},[ye],8,["disabled"]),[[r,t]])]),i(Y).isPlaying?b("",!0):(l(),s("button",{key:0,class:"btn btn-primary mr-2 emboss ml-auto",onClick:a[2]||(a[2]=e=>i(Y).play()),style:{width:"63px"}},[be])),i(Y).isPlaying?(l(),s("button",{key:1,class:"btn btn-light mr-2 emboss ml-auto",onClick:a[3]||(a[3]=e=>i(Y).stop()),style:{width:"63px"}},[he])):b("",!0)])])}}},xe={key:0,class:"alert alert-info alert-dismissible"},ve=e({}),_e=e=>{ve[e]?delete ve[e]:ve[e]=!0},we={expose:[],props:{infoId:String},setup(e){const{infoId:t}=e,n=h((()=>null!=ve[t]));return(e,a)=>i(n)?(l(),s("div",xe,[r(e.$slots,"default"),u("button",{type:"button",class:"btn-close",onClick:a[1]||(a[1]=e=>{_e(t)}),"aria-label":"Close"})])):b("",!0)}},Te=u("i",{class:"fa fa-info-circle"},null,-1),ke={expose:[],props:{info:String},setup(e){const{info:t}=e;return(e,n)=>(l(),s("span",{class:"text-info pl-1 pointer",onClick:n[1]||(n[1]=e=>i(_e)(t))},[Te]))}},Ae={class:"text-center mb-3"},Me=d("currency"),Pe=d("monnaie"),Se=d("EN_info-currency"),Ce=d("FR_info-currency"),Ee={class:"input-group mb-1"},Ue={class:"input-group-text",for:"currencyUPerTime"},Ne=d("Ü per "),je=d("Ü par "),Oe={class:"input-group-text pr-1"},qe=d("Ü "),Le=d("EN_info-currency-uPerTime"),De=d("FR_info-currency-uPerTime"),Fe={class:"input-group mb-1"},Xe={class:"input-group-text",for:"currencyRevaluationTime"},Re=d("revaluation (r)"),Ye=d("réévaluation (r)"),Ie={class:"input-group-text pr-1"},Ve=d("EN_info-currency-revaluationTime"),Be=d("FR_info-currency-revaluationTime"),$e={class:"input-group mb-1"},ze=u("option",{value:"melt"}," Ü(t-r) = ( 1 - ",-1),Ke=u("option",{value:"grew"}," Ü(t+r) = ( 1 + ",-1),Ge={class:"form-control px-1 text-left",style:{"flex-grow":"0.71"}},Je=d(" ) Ü(t) "),Qe=d("EN_info-currency-expression"),We=d("FR_info-currency-expression"),Ze={key:0,class:"d-flex align-items-start flex-wrap mb-1",style:{"justify-content":"space-evenly"}},He=d("ündo!"),et=d("annüler!"),tt=d("üpdate!"),nt=d("valïder!"),at={class:"input-group mb-1 mt-3"},lt=d("more data"),st=d("plus de données"),rt=u("i",{class:"fa fa-plus-square position-absolute end-0 mr-3 pt-1"},null,-1),ot=d("less data"),ut=d("moins de données"),it=u("i",{class:"fa fa-minus-square position-absolute end-0 mr-3 pt-1"},null,-1),ct={key:1},dt={class:"input-group mb-1"},mt={class:"input-group-text",for:"currencyMass"},ft=d("monetary mass (M)"),pt=d("masse monétaire (M)"),yt=u("span",{class:"input-group-text"},"Ü",-1),bt={class:"input-group mb-1"},ht={class:"input-group-text",for:"currencyNbMembers"},gt=d("Üman accounts (N)"),xt=d("comptes Ümains (N)"),vt={class:"input-group mb-1"},_t={class:"input-group-text",for:"currencyAvg"},wt=d("average"),Tt=d("moyenne"),kt={class:"input-group-text"},At=d("Ü / Üman"),Mt=d("Ü / Ümain"),Pt={class:"input-group mb-1"},St={class:"input-group-text",for:"currencyQuantitative"},Ct=d("quantitative"),Et=d("quantitatif"),Ut={class:"input-group-text"},Nt=d("Ü / Ü(0)"),jt=d("Ü / Ü(0)"),Ot={class:"input-group mb-1"},qt={class:"input-group-text",for:"currencyLastGrew"},Lt=d("last growth"),Dt=d("dernière croissance"),Ft=u("span",{class:"input-group-text"},"%",-1),Xt={class:"input-group mb-1"},Rt={class:"input-group-text",for:"currencyLastMelt"},Yt=d("last melting"),It=d("dernière fonte"),Vt=u("span",{class:"input-group-text"},"%",-1),Bt={expose:[],setup(t){const n=o(!1),r=e({expression:"",mode:"melt",uPerTime:1,revaluationTime:0}),m=h((()=>0==Y.currency.lastMelt?0:(1/(1/(Y.currency.lastMelt/100)-1)*100).toFixed(2))),f=h((()=>!(!Y||!Y.currency)&&(Y.currency.expression!=r.expression||Y.currency.mode!=r.mode||Y.currency.uPerTime!=r.uPerTime||Y.currency.revaluationTime!=r.revaluationTime)));return g((()=>[Y.currency.expression,Y.currency.mode,Y.currency.uPerTime,Y.currency.revaluationTime]),(()=>{Object.assign(r,Y.currency)})),a((()=>{Object.assign(r,Y.currency)})),(e,t)=>{return l(),s("div",null,[u("h4",Ae,[u(i(J),null,{default:c((()=>[Me])),_:1}),u(i(G),null,{default:c((()=>[Pe])),_:1}),u(ke,{class:"position-absolute",info:"info-currency"})]),u(we,{infoId:"info-currency"},{default:c((()=>[u(i(J),null,{default:c((()=>[Se])),_:1}),u(i(G),null,{default:c((()=>[Ce])),_:1})])),_:1}),u("form",null,[u("div",Ee,[u("label",Ue,[u(i(J),null,{default:c((()=>[Ne])),_:1}),u(i(G),null,{default:c((()=>[je])),_:1}),d(" "+p(i(Q)(i(Y).creationPeriod)),1)]),y(u("input",{id:"currencyUPerTime","onUpdate:modelValue":t[1]||(t[1]=e=>i(r).uPerTime=e),type:"number",min:"0",max:"1000",step:"1",class:["form-control text-right",{"bg-primary":i(r).uPerTime!=i(Y).currency.uPerTime}],disabled:i(Y).isPlaying},null,10,["disabled"]),[[x,i(r).uPerTime]]),u("span",Oe,[qe,u(ke,{class:"px-0 ml-2",info:"info-currency-uPerTime"})])]),u(we,{infoId:"info-currency-uPerTime"},{default:c((()=>[u(i(J),null,{default:c((()=>[Le])),_:1}),u(i(G),null,{default:c((()=>[De])),_:1})])),_:1}),u("div",Fe,[u("label",Xe,[u(i(J),null,{default:c((()=>[Re])),_:1}),u(i(G),null,{default:c((()=>[Ye])),_:1})]),y(u("input",{id:"currencyRevaluationTime","onUpdate:modelValue":t[2]||(t[2]=e=>i(r).revaluationTime=e),type:"number",min:"1",max:"400",step:"1",class:["form-control text-right",{"bg-primary":i(r).revaluationTime!=i(Y).currency.revaluationTime}],disabled:i(Y).isPlaying},null,10,["disabled"]),[[x,i(r).revaluationTime]]),u("span",Ie,[d(p(i(Q)(i(Y).creationPeriod,i(r).revaluationTime))+" ",1),u(ke,{class:"px-0 ml-2",info:"info-currency-revaluationTime"})])]),u(we,{infoId:"info-currency-revaluationTime"},{default:c((()=>[u(i(J),null,{default:c((()=>[Ve])),_:1}),u(i(G),null,{default:c((()=>[Be])),_:1})])),_:1}),u("div",$e,[y(u("select",{"onUpdate:modelValue":t[3]||(t[3]=e=>i(r).mode=e),id:"currencyMode",class:["form-control select-text-center",{"bg-primary":i(r).mode!=i(Y).currency.mode}],disabled:i(Y).isPlaying},[ze,Ke],10,["disabled"]),[[v,i(r).mode]]),y(u("input",{id:"currencyExpression","onUpdate:modelValue":t[4]||(t[4]=e=>i(r).expression=e),type:"text",class:["form-control text-right",{"bg-primary":i(r).expression!=i(Y).currency.expression}],disabled:i(Y).isPlaying},null,10,["disabled"]),[[x,i(r).expression]]),u("span",Ge,[Je,u(ke,{class:"px-0 ml-2",info:"info-currency-expression"})])]),u(we,{infoId:"info-currency-expression"},{default:c((()=>[u(i(J),null,{default:c((()=>[Qe])),_:1}),u(i(G),null,{default:c((()=>[We])),_:1})])),_:1}),i(f)?(l(),s("div",Ze,[u("button",{type:"button",class:"btn btn-secondary mr-auto",onClick:t[5]||(t[5]=e=>Object.assign(i(r),i(Y).currency))},[u(i(J),null,{default:c((()=>[He])),_:1}),u(i(G),null,{default:c((()=>[et])),_:1})]),u("button",{type:"button",class:"btn btn-primary",onClick:t[6]||(t[6]=e=>(()=>{const{expression:e,mode:t,uPerTime:n,revaluationTime:a}=r;Y.updateCurrency({expression:e,mode:t,uPerTime:n,revaluationTime:a})})())},[u(i(J),null,{default:c((()=>[tt])),_:1}),u(i(G),null,{default:c((()=>[nt])),_:1})])])):b("",!0),u("div",at,[n.value?(l(),s("button",{key:1,type:"button",class:"btn btn-secondary form-control text-left",onClick:t[8]||(t[8]=e=>n.value=!1)},[u(i(J),null,{default:c((()=>[ot])),_:1}),u(i(G),null,{default:c((()=>[ut])),_:1}),it])):(l(),s("button",{key:0,type:"button",class:"btn btn-secondary form-control text-left",onClick:t[7]||(t[7]=e=>n.value=!0)},[u(i(J),null,{default:c((()=>[lt])),_:1}),u(i(G),null,{default:c((()=>[st])),_:1}),rt]))]),n.value?(l(),s("div",ct,[u("div",dt,[u("label",mt,[u(i(J),null,{default:c((()=>[ft])),_:1}),u(i(G),null,{default:c((()=>[pt])),_:1})]),u("input",{id:"currencyMass",value:i(Y).currencyWithoutDecimal(i(Y).currency.monetaryMass),type:"text",class:"form-control text-right",disabled:""},null,8,["value"]),yt]),u("div",bt,[u("label",ht,[u(i(J),null,{default:c((()=>[gt])),_:1}),u(i(G),null,{default:c((()=>[xt])),_:1})]),u("input",{id:"currencyNbMembers",value:i(Y).currency.nbMembers,type:"text",class:"form-control text-right",disabled:""},null,8,["value"])]),u("div",vt,[u("label",_t,[u(i(J),null,{default:c((()=>[wt])),_:1}),u(i(G),null,{default:c((()=>[Tt])),_:1})]),u("input",{id:"currencyAvg",value:i(Y).currencyDecimal(i(Y).currency.average),type:"text",class:"form-control text-right",disabled:""},null,8,["value"]),u("span",kt,[u(i(J),null,{default:c((()=>[At])),_:1}),u(i(G),null,{default:c((()=>[Mt])),_:1})])]),u("div",Pt,[u("label",St,[u(i(J),null,{default:c((()=>[Ct])),_:1}),u(i(G),null,{default:c((()=>[Et])),_:1})]),u("input",{id:"currencyQuantitative",value:(a=i(Y).currency.quantitative,a<1e6?a.toFixed(2):a.toExponential(3)),type:"text",class:"form-control text-right",disabled:""},null,8,["value"]),u("span",Ut,[u(i(J),null,{default:c((()=>[Nt])),_:1}),u(i(G),null,{default:c((()=>[jt])),_:1})])]),u("div",Ot,[u("label",qt,[u(i(J),null,{default:c((()=>[Lt])),_:1}),u(i(G),null,{default:c((()=>[Dt])),_:1})]),u("input",{id:"currencyLastGrew",value:i(m),type:"text",class:"form-control text-right",disabled:""},null,8,["value"]),Ft]),u("div",Xt,[u("label",Rt,[u(i(J),null,{default:c((()=>[Yt])),_:1}),u(i(G),null,{default:c((()=>[It])),_:1})]),u("input",{id:"currencyLastMelt",value:i(Y).currency.lastMelt,type:"text",class:"form-control text-right",disabled:""},null,8,["value"]),Vt])])):b("",!0)])]);var a}}},$t={class:"text-center mb-3"},zt=d("transaction"),Kt=d("transaction"),Gt=d("EN_info-transaction"),Jt=d("FR_info-transaction"),Qt={class:"text-center"},Wt={class:"input-group mb-1"},Zt={class:"input-group-text",for:"txFrom"},Ht=d(" fröm "),en=d(" de "),tn={class:"input-group-text",for:"txTo"},nn=d(" tö "),an=d(" à "),ln=u("option",{disabled:"",value:""},"select öne",-1),sn=u("option",{disabled:"",value:""},"qüi",-1),rn={class:"input-group mb-1"},on=u("span",{class:"input-group-text"},"Ü",-1),un={expose:[],setup(t){const n=e({from:"fÜne",to:"",value:1}),a=h((()=>Y.accounts)),r=h((()=>Y.accounts));return(e,t)=>(l(),s("div",null,[u("h4",$t,[u(i(J),null,{default:c((()=>[zt])),_:1}),u(i(G),null,{default:c((()=>[Kt])),_:1}),u(ke,{class:"position-absolute",info:"info-transaction"})]),u(we,{infoId:"info-transaction"},{default:c((()=>[u(i(J),null,{default:c((()=>[Gt])),_:1}),u(i(G),null,{default:c((()=>[Jt])),_:1})])),_:1}),u("form",Qt,[u("div",Wt,[u("label",Zt,[u(i(J),null,{default:c((()=>[Ht])),_:1}),u(i(G),null,{default:c((()=>[en])),_:1})]),y(u("select",{"onUpdate:modelValue":t[1]||(t[1]=e=>i(n).from=e),id:"txFrom",class:"form-control select-text-center"},[(l(!0),s(_,null,w(i(a),(e=>(l(),s("option",{value:e.name,key:e.name},p(e.name),9,["value"])))),128))],512),[[v,i(n).from]]),u("label",tn,[u(i(J),null,{default:c((()=>[nn])),_:1}),u(i(G),null,{default:c((()=>[an])),_:1})]),y(u("select",{"onUpdate:modelValue":t[2]||(t[2]=e=>i(n).to=e),id:"txTo",class:"form-control select-text-center"},[u(i(J),null,{default:c((()=>[ln])),_:1}),u(i(G),null,{default:c((()=>[sn])),_:1}),(l(!0),s(_,null,w(i(r),(e=>(l(),s("option",{value:e.name,key:e.name},p(e.name),9,["value"])))),128))],512),[[v,i(n).to]])]),u("div",rn,[y(u("input",{"onUpdate:modelValue":t[3]||(t[3]=e=>i(n).value=e),type:"number",step:"any",class:"form-control text-right"},null,512),[[x,i(n).value]]),on,u("button",{type:"button",class:"btn btn-primary",onClick:t[4]||(t[4]=e=>i(Y).doTx(i(n)))},"ök!")])])]))}};function cn(e){return parseInt(e,10)}function dn(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function mn(e,t,n){var a=e.x-t.x,l=e.y-t.y,s=Math.sqrt(a*a+l*l),r=a/s,o=l/s;return{x:t.x+r*n,y:t.y+o*n}}function fn(e,t){var n=e.shift();return"M"+n.x+" "+n.y+e.map((function(a,l){var s,r,o,u=e[l+1],i=e[l-1]||n,c=u&&(r=a,o=i,cn((s=u).x+o.x)===cn(2*r.x)&&cn(s.y+o.y)===cn(2*r.y));if(!u||c)return"L"+a.x+" "+a.y;var d=Math.min(dn(i,a),dn(u,a)),m=d/2<t?d/2:t,f=mn(i,a,m),p=mn(u,a,m);return"L"+f.x+" "+f.y+"S"+a.x+" "+a.y+" "+p.x+" "+p.y})).join("")}var pn={props:["smooth","data","boundary","radius","id","max","min","color","dash"],render:function(){var e,t=this,n=t.data,a=t.smooth,l=t.boundary,s=t.radius,r=t.id,o=t.max,u=t.min,i=t.dash,c=fn(function(e,t,n){var a=t.minX,l=t.minY,s=t.maxX,r=t.maxY,o=n.max,u=n.min,i=e.map((function(e){return e&&!isNaN(e)?e:0})),c=Math.min.apply(Math,i.concat([u]))-.001,d=(s-a)/(i.length-1),m=(r-l)/(Math.max.apply(Math,i.concat([o]))+.001-c);return i.map((function(e,t){return{x:t*d+a,y:r-(e-c)*m+1e-5*+(t===i.length-1)-1e-5*+(0===t)}}))}(n,l,{max:o,min:u}),a?s:0);return e=this.color?this.color:"url(#"+r+")",T("path",{d:c,fill:"none",stroke:e,"stroke-dasharray":i})}},yn={props:["boundary","max","min","xUnit","yUnit"],render:function(){var e=this.boundary;return[T("text",{x:e.minX,y:e.minY-3,fill:"#EEEEEEBB","font-size":"0.5em"},Math.round(this.max/1e3)+" "+this.yUnit),T("text",{x:e.minX,y:e.maxY-3,fill:"#EEEEEEBB","font-size":"0.5em"},Math.round(this.min/1e3)),T("text",{x:e.maxX,y:e.maxY-3,width:100,fill:"#EEEEEEBB",style:{"text-anchor":"end"},"font-size":"0.5em"},this.xUnit),T("line",{x1:e.minX,y1:e.minY,x2:e.maxX,y2:e.minY,stroke:"#EEEEEEBB"}),T("line",{x1:e.minX,y1:e.maxY,x2:e.maxX,y2:e.maxY,stroke:"#EEEEEEBB"})]}},bn={props:["gradient","gradientDirection","id"],render:function(){var e=this,t=e.gradient,n=e.gradientDirection,a=e.id,l=t.length-1||1,s=t.slice().reverse().map((function(e,t){return T("stop",{offset:t/l,"stop-color":e})}));return T("defs",[T("linearGradient",{id:a,x1:+("left"===n),y1:+("top"===n),x2:+("right"===n),y2:+("bottom"===n)},s)])}},hn={name:"Trend",props:{data:{type:Array,required:!0},autoDraw:Boolean,autoDrawDuration:{type:Number,default:2e3},autoDrawEasing:{type:String,default:"ease"},gradient:{type:Array,default:function(){return["#000"]}},gradientDirection:{type:String,default:"top"},max:{type:Number,default:-1/0},min:{type:Number,default:1/0},height:Number,width:Number,padding:{type:Number,default:8},radius:{type:Number,default:10},smooth:Boolean,xUnit:{type:String,default:""},yUnit:{type:String,default:""}},watch:{data:{immediate:!0,handler:function(e){var t=this;this.$nextTick((function(){if(!t.$isServer&&t.$refs.path&&t.autoDraw){var e=t.$refs.path.$el,n=e.getTotalLength();e.style.transition="none",e.style.strokeDasharray=n+" "+n,e.style.strokeDashoffset=Math.abs(n-(t.lastLength||0)),e.getBoundingClientRect(),e.style.transition="stroke-dashoffset "+t.autoDrawDuration+"ms "+t.autoDrawEasing,e.style.strokeDashoffset=0,t.lastLength=n}}))}}},render:function(){if(this.data&&!(this.data.length<2)){var e=this.width,t=this.height,n=this.padding,a=e||300,l=t||150,s={minX:n,minY:n,maxX:a-n,maxY:l-n};return T("svg",{width:e||"100%",height:t||"25%",viewBox:"0 0 "+a+" "+l},[T(bn,{gradient:this.gradient,gradientDirection:this.gradientDirection,id:"stats"}),T(yn,{boundary:s,max:Math.max.apply(Math,this.data.concat([this.max])),min:Math.min.apply(Math,this.data.concat([this.min])),xUnit:this.xUnit,yUnit:this.yUnit}),T(pn,{smooth:this.smooth,data:this.data,boundary:s,radius:this.radius,max:this.max,min:this.min,id:"stats",ref:"path",dash:"0"})])}}},gn={name:"Trends",props:{data:{type:Array,required:!0},colors:{type:Array,required:!0},min:{type:Number,default:1/0},height:Number,width:Number,padding:{type:Number,default:8},radius:{type:Number,default:10},smooth:Boolean,xUnit:{type:String,default:""},yUnit:{type:String,default:""}},data:()=>({pt:null,boundary:null,maxX:0,maxY:0}),methods:{getCoordinates(e,t){this.pt.x=e,this.pt.y=t;const n={x:0,y:0};if(this.maxX<=0)return n;const a=this.pt.matrixTransform(this.$el.getScreenCTM().inverse());return a.x<this.boundary.minX?n.x=0:a.x>this.boundary.maxX?n.x=this.maxX:n.x=Math.round(this.maxX*(a.x-this.boundary.minX)/(this.boundary.maxX-this.boundary.minX)),a.y<this.boundary.minY?n.y=this.maxY:a.y>this.boundary.maxY?n.y=0:n.y=Math.round(this.maxY*(this.boundary.maxY-a.y)/(this.boundary.maxY-this.boundary.minY)),n}},mounted(){this.pt=this.$el.createSVGPoint()},render:function(){var e=this.width,t=this.height,n=this.padding,a=e||300,l=t||200;this.boundary={minX:n,minY:n,maxX:a-n,maxY:l-n};var s=1e3;for(let o=0;o<this.data.length;o++){const e=this.data[o];if(e&&e.length>1)for(let t=0;t<e.length;t++)s=Math.max(s,e[t])}this.maxY=s,this.data.length>=1?this.maxX=this.data[0].length-1:this.maxX=0;var r=[];for(let o=0;o<this.data.length;o++){const e=this.data[o];e&&e.length>1&&r.push(T(pn,{smooth:this.smooth,data:e,boundary:this.boundary,radius:this.radius,max:s,min:this.min,id:"stats",ref:"path"+o,color:this.colors[o],dash:o==this.data.length-1?"2 2":"0"}))}return T("svg",{width:e||"100%",height:t||"25%",viewBox:"0 0 "+a+" "+l},[r,T(yn,{boundary:this.boundary,max:s,min:this.min,xUnit:this.xUnit,yUnit:this.yUnit})])}};const xn={class:"text-center mb-3"},vn=d("account"),_n=d("compte"),wn=d("EN_info-account"),Tn=d("FR_info-account"),kn={class:"mt-3 mb-3"},An={class:"text-center mb-6"},Mn={class:"mx-auto input-group",style:{"max-width":"300px"}},Pn={disabled:"",value:null},Sn=d("whö"),Cn=d("qüi"),En={key:0},Un={class:"display-3 text-center"},Nn={class:"align-baseline",style:{"font-size":"50%"}},jn=u("small",null," Ü",-1),On={key:0,class:"display-5 text-center"},qn=d("bank"),Ln=d("banque"),Dn={key:1,class:"display-5 text-center"},Fn=d("wallet"),Xn=d("compte simple"),Rn={key:2,class:"display-5 text-center"},Yn=d("Üman"),In=d("Ümain"),Vn={class:"text-center mt-4"},Bn=d("transaction"),$n=d("transaction"),zn={class:"mb-4 justify-content-center mx-auto",style:{"max-width":"500px"}},Kn={class:"input-group mb-1"},Gn=u("small",{class:"input-group-text"},"Ü",-1),Jn={class:"input-group-text",for:"accountTxTo"},Qn=d(" tö "),Wn=d(" à "),Zn={disabled:"",value:""},Hn=d("someöne"),ea=d("qüi"),ta={class:"input-group"},na={class:"input-group-text",for:"txMessage"},aa=d("message"),la=d("message"),sa={class:"text-center mt-4"},ra=d("stats"),oa=d("stats"),ua={class:"text-center mt-4"},ia=d("diary"),ca=d("journal"),da={class:"list-group list-group-flush pointer mx-auto",style:{"max-width":"450px"}},ma={key:0},fa={style:{"min-width":"85px"},class:"badge bg-light text-dark text-right"},pa={style:{width:"70px"},class:"d-inline-block text-center"},ya=d(" to "),ba=d(" à "),ha={key:1},ga={style:{"min-width":"85px"},class:"badge bg-primary text-right"},xa={style:{width:"70px"},class:"d-inline-block text-center"},va=d(" from "),_a=d(" de "),wa={class:"text-right"},Ta={class:"fw-bold"},ka={expose:[],setup(t){const n=e({account:null,accounts:h((()=>Y.accounts.filter((e=>"bank"!=e.role)))),otherAccounts:h((()=>n.account?Y.accounts.filter((e=>"bank"!=e.role&&e.name!=n.account.name)):null)),stats:[],transactions:[],tx:{from:"",to:"",message:"",value:1}}),r=()=>{n.account&&(n.transactions=Y.getAccountTx(n.account.name,10).reverse(),n.stats=Y.getAccountStats(n.account.name,"day"))};g((()=>n.account),(()=>{r()})),g((()=>Y.currency),r,{deep:!0});const o=e=>Y.currencyDecimal(e).slice(-2),d=e=>{if(!e)return"";if("!Ucreation"==e)return z({en:"> u crëate Ü!",fr:"> crëation de Ü !"});if(0==e.indexOf("!revaluation%")){let t=e.split("%")[1];return z({en:"> all the Ü melt by "+t+"%!",fr:"> tous les Ü fondent de "+t+"% !"})}return e?"> "+e:""},m=e=>{if(e>=Y.currency.elapsedTime)switch(Y.creationPeriod){case"day":return z({en:"today",fr:"aujourd'hui"});case"month":return z({en:"this month",fr:"ce mois-ci"});case"year":return z({en:"this year",fr:"cette année"})}const t=Y.currency.elapsedTime-e,n=Q(Y.creationPeriod,t);return z({en:t+" "+n+" ago",fr:"il y a "+t+" "+n})};return a((()=>{if(!n.account){n.accounts.length>1&&(n.account=n.accounts[0])}})),(e,t)=>{return l(),s("div",null,[u("h4",xn,[u(i(J),null,{default:c((()=>[vn])),_:1}),u(i(G),null,{default:c((()=>[_n])),_:1}),u(ke,{class:"position-absolute",info:"info-account"})]),u(we,{infoId:"info-account"},{default:c((()=>[u(i(J),null,{default:c((()=>[wn])),_:1}),u(i(G),null,{default:c((()=>[Tn])),_:1})])),_:1}),u("div",kn,[u("h3",An,[u("div",Mn,[y(u("select",{"onUpdate:modelValue":t[1]||(t[1]=e=>i(n).account=e),class:"text-center mx-auto form-control select-text-center",style:{"font-size":"1.3em"}},[u("option",Pn,[u(i(J),null,{default:c((()=>[Sn])),_:1}),u(i(G),null,{default:c((()=>[Cn])),_:1})]),(l(!0),s(_,null,w(i(n).accounts,(e=>(l(),s("option",{value:e,key:e.name},[u("strong",null,p(e.name),1)],8,["value"])))),128))],512),[[v,i(n).account]])])]),i(n).account?(l(),s("div",En,[u("div",Un,[u("span",null,p((a=i(n).account.balance,Y.currencyDecimal(a).slice(0,-3))),1),u("small",Nn,"."+p(o(i(n).account.balance)),1),jn]),"bank"==i(n).account.role?(l(),s("p",On,[u(i(J),null,{default:c((()=>[qn])),_:1}),u(i(G),null,{default:c((()=>[Ln])),_:1})])):"wallet"==i(n).account.role?(l(),s("p",Dn,[u(i(J),null,{default:c((()=>[Fn])),_:1}),u(i(G),null,{default:c((()=>[Xn])),_:1})])):(l(),s("p",Rn,[u(i(J),null,{default:c((()=>[Yn])),_:1}),u(i(G),null,{default:c((()=>[In])),_:1})])),u("h4",Vn,[u(i(J),null,{default:c((()=>[Bn])),_:1}),u(i(G),null,{default:c((()=>[$n])),_:1})]),u("form",zn,[u("div",null,[u("div",Kn,[y(u("input",{"onUpdate:modelValue":t[2]||(t[2]=e=>i(n).tx.value=e),type:"number",max:Math.round(i(n).account.balance/100),step:"any",min:"0",class:"form-control text-right"},null,8,["max"]),[[x,i(n).tx.value]]),Gn,u("label",Jn,[u(i(J),null,{default:c((()=>[Qn])),_:1}),u(i(G),null,{default:c((()=>[Wn])),_:1})]),y(u("select",{"onUpdate:modelValue":t[3]||(t[3]=e=>i(n).tx.to=e),id:"accountTxTo",class:"form-control p-1 select-text-center"},[u("option",Zn,[u(i(J),null,{default:c((()=>[Hn])),_:1}),u(i(G),null,{default:c((()=>[ea])),_:1})]),(l(!0),s(_,null,w(i(n).otherAccounts,(e=>(l(),s("option",{value:e.name,key:e.name},[u("strong",null,p(e.name),1)],8,["value"])))),128))],512),[[v,i(n).tx.to]]),u("button",{type:"button",class:"btn btn-primary",onClick:t[4]||(t[4]=e=>(n.tx.from=n.account.name,Y.doTx(n.tx)&&(n.tx.message=""),void r()))},"ök!")]),u("div",ta,[u("label",na,[u(i(J),null,{default:c((()=>[aa])),_:1}),u(i(G),null,{default:c((()=>[la])),_:1})]),y(u("input",{"onUpdate:modelValue":t[5]||(t[5]=e=>i(n).tx.message=e),type:"text",maxlength:"32",class:"form-control",id:"txMessage"},null,512),[[x,i(n).tx.message]])])])]),u("h4",sa,[u(i(J),null,{default:c((()=>[ra])),_:1}),u(i(G),null,{default:c((()=>[oa])),_:1})]),u(i(hn),{class:"p-2 stats",data:i(n).stats,gradientDirection:"top",gradient:["#f560a2","#e83283","#bd125e"],padding:10,radius:8,"stroke-width":1.5,"stroke-linecap":"butt",min:0,max:1e3,xUnit:i(Y).currency.elapsedTime+" "+i(Q)(i(Y).creationPeriod,i(Y).currency.elapsedTime),yUnit:"Ü","auto-draw":"",smooth:""},null,8,["data","stroke-width","xUnit"]),u("h4",ua,[u(i(J),null,{default:c((()=>[ia])),_:1}),u(i(G),null,{default:c((()=>[ca])),_:1})]),u("ul",da,[(l(!0),s(_,null,w(i(n).transactions,(e=>(l(),s("li",{key:e.id,class:"list-group-item list-group-item-action p-2"},[u("div",{class:"d-flex w-100 justify-content-between",onClick:t=>i(n).tx.to=e.from==i(n).account.name?e.to:e.from},[u("div",null,[e.from==i(n).account.name?(l(),s("h5",ma,[u("span",fa,p(i(Y).currencyDecimal(e.value))+" Ü",1),u("span",pa,[u(i(J),null,{default:c((()=>[ya])),_:1}),u(i(G),null,{default:c((()=>[ba])),_:1})]),u("strong",null,[u("span",null,p(e.to),1)])])):(l(),s("h5",ha,[u("span",ga,p(i(Y).currencyDecimal(e.value))+" Ü",1),u("span",xa,[u(i(J),null,{default:c((()=>[va])),_:1}),u(i(G),null,{default:c((()=>[_a])),_:1})]),u("strong",null,[u("span",null,p(e.from),1)])]))]),u("small",wa,p(m(e.time)),1)],8,["onClick"]),u("span",Ta,p(d(e.message)),1)])))),128))])])):b("",!0)])]);var a}}},Aa={class:"text-center mb-3"},Ma=d("accounts"),Pa=d("comptes"),Sa=d("EN_info-accounts"),Ca=d("FR_info-accounts"),Ea={class:"table table-hover"},Ua=d("stats"),Na=d("stats"),ja=d("näme"),Oa=d("nöm"),qa=d("röle"),La=d("röle"),Da=d("balance"),Fa=d("solde"),Xa=u("th",null,null,-1),Ra={class:"text-center"},Ya=d("Üman"),Ia=d("Ümain"),Va=d("wället"),Ba=d("sïmple"),$a={key:2,class:"btn btn-sm btn-danger fw-bold emboss role",disabled:""},za=d("bänk"),Ka=d("bänque"),Ga={class:"text-right"},Ja={key:0},Qa=u("small",null," Ü ",-1),Wa={class:"text-right"},Za=d("reset"),Ha=d("raz"),el=u("i",{class:"fa fa-trash"},null,-1),tl={class:"input-group"},nl={value:"human"},al=d("Üman"),ll=d("Ümain"),sl={value:"wallet"},rl=d("wället"),ol=d("sïmple"),ul=d("nëw!"),il=d("noüveau!"),cl={expose:[],setup(t){const n=e({onlySelected:!1,sortKey:"name",sortOrder:1,newAccount:{name:"",role:"human"}}),a=h((()=>{let e=Y.accounts.filter((e=>"bank"!=e.role));return n.onlySelected&&(e=e.filter((e=>Y.isSelected(e)))),e.sort(((e,t)=>{let a=e[n.sortKey],l=t[n.sortKey];return(a===l?0:a>l?1:-1)*n.sortOrder}))})),r=e=>{e==n.sortKey&&(n.sortOrder=-n.sortOrder),n.sortKey=e},o=e=>{let t="human"==e.role?"wallet":"human";Y.updateAccount(e,{role:t})},m=e=>{const t=Y.selectedAccounts.get(e.name);return null==t?"#444444":t.color};return(e,t)=>(l(),s("div",null,[u("h4",Aa,[u(i(J),null,{default:c((()=>[Ma])),_:1}),u(i(G),null,{default:c((()=>[Pa])),_:1}),u(ke,{class:"position-absolute",info:"info-accounts"})]),u(we,{infoId:"info-accounts"},{default:c((()=>[u(i(J),null,{default:c((()=>[Sa])),_:1}),u(i(G),null,{default:c((()=>[Ca])),_:1})])),_:1}),u("table",Ea,[u("thead",null,[u("tr",null,[u("th",{onClick:t[1]||(t[1]=e=>i(n).onlySelected=!i(n).onlySelected),class:[{"bg-primary":i(n).onlySelected},"pointer"],style:{width:"25px"}},[u(i(J),null,{default:c((()=>[Ua])),_:1}),u(i(G),null,{default:c((()=>[Na])),_:1})],2),u("th",{onClick:t[2]||(t[2]=e=>r("name")),class:"pointer"},[u(i(J),null,{default:c((()=>[ja])),_:1}),u(i(G),null,{default:c((()=>[Oa])),_:1})]),u("th",{onClick:t[3]||(t[3]=e=>r("role")),class:"text-center pointer"},[u(i(J),null,{default:c((()=>[qa])),_:1}),u(i(G),null,{default:c((()=>[La])),_:1})]),u("th",{onClick:t[4]||(t[4]=e=>r("balance")),class:"text-right pointer"},[u(i(J),null,{default:c((()=>[Da])),_:1}),u(i(G),null,{default:c((()=>[Fa])),_:1})]),Xa])]),u("tbody",null,[(l(!0),s(_,null,w(i(a),(e=>(l(),s("tr",{key:e.name},[u("td",{onClick:t=>i(Y).select(e),class:"pointer"},[u("div",{style:[{"background-color":m(e)},{width:"25px",height:"25px"}],class:"icon"},null,4)],8,["onClick"]),u("td",{onClick:t=>i(Y).select(e),class:"pointer"},p(e.name),9,["onClick"]),u("td",Ra,["human"==e.role?(l(),s("button",{key:0,class:"btn btn-sm btn-primary fw-bold emboss role",onClick:t=>o(e)},[u(i(J),null,{default:c((()=>[Ya])),_:1}),u(i(G),null,{default:c((()=>[Ia])),_:1})],8,["onClick"])):"wallet"==e.role?(l(),s("button",{key:1,class:"btn btn-sm btn-secondary fw-bold emboss role",onClick:t=>o(e)},[u(i(J),null,{default:c((()=>[Va])),_:1}),u(i(G),null,{default:c((()=>[Ba])),_:1})],8,["onClick"])):(l(),s("button",$a,[u(i(J),null,{default:c((()=>[za])),_:1}),u(i(G),null,{default:c((()=>[Ka])),_:1})]))]),u("td",Ga,["bank"!=e.role?(l(),s("strong",Ja,[d(p(i(Y).currencyDecimal(e.balance)),1),Qa])):b("",!0)]),u("td",Wa,["bank"!=e.role?(l(),s("a",{key:0,href:"#",onClick:k((t=>(e=>{Y.updateAccount(e,{balance:0})})(e)),["stop","prevent"]),class:"mr-2"},[u(i(J),null,{default:c((()=>[Za])),_:1}),u(i(G),null,{default:c((()=>[Ha])),_:1})],8,["onClick"])):b("",!0),e.name!=i(Y).name?(l(),s("a",{key:1,href:"#",onClick:k((t=>(e=>{const t=e.name;confirm(z({fr:"êtes vous sûr de supprimer "+t+" ?",en:"Are you sure to delete "+t+"?"}))&&Y.deleteAccount(e)})(e)),["stop","prevent"]),class:"text-warning"},[el],8,["onClick"])):b("",!0)])])))),128))])]),u("div",tl,[y(u("input",{placeholder:i(z)({en:"näme",fr:"nöm"}),"onUpdate:modelValue":t[5]||(t[5]=e=>i(n).newAccount.name=e),type:"text",class:"form-control",id:"accountName",maxlength:"16"},null,8,["placeholder"]),[[x,i(n).newAccount.name]]),y(u("select",{"onUpdate:modelValue":t[6]||(t[6]=e=>i(n).newAccount.role=e),class:"form-control",style:{"max-width":"100px"}},[u("option",nl,[u(i(J),null,{default:c((()=>[al])),_:1}),u(i(G),null,{default:c((()=>[ll])),_:1})]),u("option",sl,[u(i(J),null,{default:c((()=>[rl])),_:1}),u(i(G),null,{default:c((()=>[ol])),_:1})])],512),[[v,i(n).newAccount.role]]),u("button",{type:"button",disabled:3>i(n).newAccount.name.length||i(Y).accounts.some((e=>e.name==i(n).newAccount.name)),class:"btn btn-primary",onClick:t[7]||(t[7]=e=>(n.newAccount.name=n.newAccount.name.trim(),void Y.createAccount(n.newAccount)))},[u(i(J),null,{default:c((()=>[ul])),_:1}),u(i(G),null,{default:c((()=>[il])),_:1})],8,["disabled"])])]))}},dl={class:"position-relative"},ml={class:"text-center mb-3"},fl=d("stats"),pl=d("stats"),yl=d("EN_info-stats"),bl=d("FR_info-stats"),hl={class:"input-group mx-auto mt-3 mb-1",style:{"max-width":"250px"}},gl={class:"input-group-text px-1"},xl=d("referential"),vl=d("référentiel"),_l={value:"relative"},wl=d("relative"),Tl=d("relatif"),kl={value:"quantitative"},Al=d("quantitative"),Ml=d("quantitatif"),Pl={value:"average"},Sl=d("average"),Cl=d("moyenne"),El={class:"input-group-text p-1"},Ul=d("EN_info-stats-referential"),Nl=d("FR_info-stats-referential"),jl={expose:[],setup(t){const n=o(null),r=o("-------------"),d=e=>{const t=n.value.getCoordinates(e.clientX,e.clientY);t&&(r.value=Y.currencyDecimal(t.y)+" "+m.yUnit+" | "+t.x+" "+Q(Y.creationPeriod,t.x))},m=e({referential:"relative",stats:[],colors:[],xUnit:"",yUnit:"Ü"}),f=()=>{m.xUnit=Y.currency.elapsedTime+" "+Q(Y.creationPeriod,Y.currency.elapsedTime);let e=Y.getAccountStats(Y.name),t=null,n=[],a=[];Y.selectedAccounts.forEach(((l,s)=>{if(s!=Y.name&&(t=Y.getAccountStats(s),t)){if("average"==m.referential)for(let n=0;n<t.length;n++)t[n]=0==e[n].average?0:t[n]/e[n].average*1e5;else if("quantitative"==m.referential)for(let n=0;n<t.length;n++)t[n]=t[n]*(e[n].quantitative/Y.currency.quantitative);n.push(t),a.push(l.color)}})),"average"==m.referential?(m.yUnit="% M/N",t=new Array(e.length).fill(1e5)):"relative"==m.referential?(m.yUnit="Ü",t=e.map((e=>e.average))):"quantitative"==m.referential&&(m.yUnit="Ü(0) / Ü",t=e.map((e=>e.average*(e.quantitative/Y.currency.quantitative)))),n.push(t),a.push(Y.selectedAccounts.get(Y.name).color),m.stats=n,m.colors=a};return g((()=>Y.selectedAccounts),f,{deep:!0}),g((()=>Y.currency),f,{deep:!0}),g((()=>[m.referential,Y.creationPeriod]),f),a((()=>{f()})),(e,t)=>(l(),s("div",dl,[u("h4",ml,[u(i(J),null,{default:c((()=>[fl])),_:1}),u(i(G),null,{default:c((()=>[pl])),_:1}),u(ke,{class:"position-absolute",info:"info-stats"})]),u(we,{infoId:"info-stats"},{default:c((()=>[u(i(J),null,{default:c((()=>[yl])),_:1}),u(i(G),null,{default:c((()=>[bl])),_:1})])),_:1}),u("div",{title:r.value},[u(i(gn),{class:"p-2 stats",data:i(m).stats,colors:i(m).colors,padding:10,radius:8,"stroke-width":1.4,"stroke-linecap":"butt",min:0,xUnit:i(m).xUnit,yUnit:i(m).yUnit,onMousemove:d,ref:n,"auto-draw":"",smooth:""},null,8,["data","colors","stroke-width","xUnit","yUnit"])],8,["title"]),u("div",hl,[u("label",gl,[u(i(J),null,{default:c((()=>[xl])),_:1}),u(i(G),null,{default:c((()=>[vl])),_:1})]),y(u("select",{"onUpdate:modelValue":t[1]||(t[1]=e=>i(m).referential=e),class:"form-control px-1 select-text-center"},[u("option",_l,[u(i(J),null,{default:c((()=>[wl])),_:1}),u(i(G),null,{default:c((()=>[Tl])),_:1})]),u("option",kl,[u(i(J),null,{default:c((()=>[Al])),_:1}),u(i(G),null,{default:c((()=>[Ml])),_:1})]),u("option",Pl,[u(i(J),null,{default:c((()=>[Sl])),_:1}),u(i(G),null,{default:c((()=>[Cl])),_:1})])],512),[[v,i(m).referential]]),u("label",El,[u(ke,{class:"px-0",info:"info-stats-referential"})])]),u(we,{infoId:"info-stats-referential"},{default:c((()=>[u(i(J),null,{default:c((()=>[Ul])),_:1}),u(i(G),null,{default:c((()=>[Nl])),_:1})])),_:1})]))}};const Ol={class:"container mt-3 mb-5"},ql=u("h1",{class:"display-1 text-center mb-3"},[u("img",{src:"/favicon90x90.png",class:"icon"}),u("span",{class:"align-middle"},[d(" f"),u("small",null,"Ü"),d("ne")])],-1),Ll={class:"justify-content-center mb-3 input-group mx-auto fit-content"},Dl={class:"lead text-center mb-3"},Fl=u("strong",null,[d("f"),u("small",null,"Ü"),d("ne")],-1),Xl=d(" is a web app to test and play with a simple "),Rl=u("a",{href:"https://libre-currency.org"},"Libre Currency",-1),Yl=d(" called "),Il=u("strong",null,[d("f"),u("small",null,"Ü"),d("ne")],-1),Vl=d(" (pronounced /fən/ like fun) "),Bl=u("strong",null,[d("f"),u("small",null,"Ü"),d("ne")],-1),$l=d(" est une appli web qui permet de jouer avec une simple "),zl=u("a",{href:"https://monnaie-libre.fr/"},"Monnaie Libre",-1),Kl=d(" appelée "),Gl=u("strong",null,[d("f"),u("small",null,"Ü"),d("ne")],-1),Jl=d(" (prononcée /fən/ comme fun en anglais) "),Ql=d("EN_info-home-libreCurrency"),Wl=d("FR_info-home-libreCurrency"),Zl={class:"lead text-center"},Hl=d(" a "),es=u("strong",null,"Üman",-1),ts=d(" account create some new Ü (the Ünit of the f"),ns=u("small",null,"Ü",-1),as=d("ne money) every "),ls=d(" un compte "),ss=u("strong",null,"Ümain",-1),rs=d(" crée de nouvelles "),os=u("small",null,"Ü",-1),us=d(" (l'Ünité de la monnaie f"),is=u("small",null,"Ü",-1),cs=d("ne) chaque "),ds={class:"input-group fit-content d-inline-block"},ms={value:"day"},fs={value:"month"},ps={value:"year"},ys={class:"lead text-center"},bs=d(" the old created Ünits melt according to a "),hs=u("strong",null,"mathematical",-1),gs=d("s formula at each "),xs=u("strong",null,"revaluation period",-1),vs=d(" les anciennes Ünités fondent suivant une "),_s=u("strong",null,"formule",-1),ws=d(" mathématique à chaque "),Ts=u("strong",null,"période de réévaluation",-1),ks=d("EN_info-home-funiter"),As=d("FR_info-home-funiter"),Ms={class:"d-flex align-items-start flex-wrap p-2 mt-3",style:{"justify-content":"space-evenly"}},Ps={style:{"min-width":"30vw"}},Ss={class:"mx-auto",style:{"min-width":"35vw","max-width":"600px"}},Cs={style:{"min-width":"30vw"}};let Es=JSON.parse(localStorage.getItem("state"));Y.restoreState(Es);var Us={mounted:(e,t)=>{if("function"!=typeof t.value)return;let n=null,a=null;const l=e=>{"click"===e.type&&0!==e.button||(e.preventDefault(),null===n&&(r(),n=setTimeout((()=>{a=setInterval((()=>{r()}),50),r()}),300)))},s=()=>{null!==n&&(clearTimeout(n),n=null),a&&(clearInterval(a),a=null)},r=e=>{t.value(e)};["mousedown","touchstart"].forEach((t=>e.addEventListener(t,l))),["click","mouseout","touchend","touchcancel"].forEach((t=>e.addEventListener(t,s)))}};A({expose:[],setup(e){o("info");const t=()=>{localStorage.setItem("state",JSON.stringify(Y.getState()))};g((()=>Y.currency),t,{deep:!0}),g((()=>Y.selectedAccounts),t,{deep:!0});const n=[];if(Y.accounts.length<=1){const e={name:"Alice",balance:1e4,role:"human"},t={name:"Bob",balance:2e4,role:"human"},n={name:"Carole",balance:0,role:"human"};Y.addAccounts([e,t,n]),Y.select(e),Y.select(t),Y.select(n)}return(e,t)=>(l(),s("div",null,[u("div",Ol,[ql,u("div",Ll,[u("button",{class:["btn btn-sm text-light",{"btn-outline-secondary":"fr"!=i(B),"btn-primary":"fr"==i(B)}],onClick:t[1]||(t[1]=e=>i(K)("fr"))},"FR",2),u("button",{class:["btn btn-sm text-light",{"btn-outline-secondary":"en"!=i(B),"btn-primary":"en"==i(B)}],onClick:t[2]||(t[2]=e=>i(K)("en"))},"EN",2)]),u("p",Dl,[u(i(J),null,{default:c((()=>[Fl,Xl,Rl,Yl,Il,Vl])),_:1}),u(i(G),null,{default:c((()=>[Bl,$l,zl,Kl,Gl,Jl])),_:1}),u(ke,{class:"px-0",info:"info-home-libreCurrency"})]),u(we,{infoId:"info-home-libreCurrency"},{default:c((()=>[u(i(J),null,{default:c((()=>[Ql])),_:1}),u(i(G),null,{default:c((()=>[Wl])),_:1})])),_:1}),u("div",Zl,[u(i(J),null,{default:c((()=>[Hl,es,ts,ns,as])),_:1}),u(i(G),null,{default:c((()=>[ls,ss,rs,os,us,is,cs])),_:1}),u("div",ds,[y(u("select",{class:"form-control select-text-center fit-content p-1","onUpdate:modelValue":t[3]||(t[3]=e=>i(Y).creationPeriod=e)},[u("option",ms,p(i(Q)("day")),1),u("option",fs,p(i(Q)("month")),1),u("option",ps,p(i(Q)("year")),1)],512),[[v,i(Y).creationPeriod]])])]),u("p",ys,[u(i(J),null,{default:c((()=>[bs,hs,gs,xs])),_:1}),u(i(G),null,{default:c((()=>[vs,_s,ws,Ts])),_:1})]),u(we,{infoId:"info-home-funiter",class:"mx-auto w-auto mt-3"},{default:c((()=>[u(i(J),null,{default:c((()=>[ks])),_:1}),u(i(G),null,{default:c((()=>[As])),_:1})])),_:1})]),u(V,{accounts:n,selectedAccounts:n,class:"mt-3"},{default:c((()=>[u(ue,{class:"mx-auto",style:{"max-width":"400px"}}),u(ge,{class:"mx-auto sticky-top"}),u("div",Ms,[u("div",Ps,[u(Bt,{class:"mb-3 mx-auto",style:{width:"380px"}})]),u("div",Ss,[u(jl,{class:"mb-3"}),u(un,{class:"mb-3 mx-auto",style:{"max-width":"450px"}})]),u("div",Cs,[u(cl,{class:"mb-3 mx-auto",style:{"max-width":"450px"}})]),u(ka,{class:"mb-3 mx-auto",style:{"min-width":"35vw","max-width":"600px"}})])])),_:1})]))}}).directive("longclick",Us).mount("#app");

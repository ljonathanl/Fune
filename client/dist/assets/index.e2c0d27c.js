import{r as e,a as t,e as n,o as a,b as l,c as s,d as r,f as o,g as u,u as i,w as c,h as d,F as m,i as f,t as p,j as y,k as b,l as h,m as g,v as x,n as v,p as _,q as w,s as k,x as T,y as A}from"./vendor.5278ef37.js";!function(e=".",t="__import__"){try{self[t]=new Function("u","return import(u)")}catch(n){const a=new URL(e,location),l=e=>{URL.revokeObjectURL(e.src),e.remove()};self[t]=e=>new Promise(((n,s)=>{const r=new URL(e,a);if(self[t].moduleMap[r])return n(self[t].moduleMap[r]);const o=new Blob([`import * as m from '${r}';`,`${t}.moduleMap['${r}']=m;`],{type:"text/javascript"}),u=Object.assign(document.createElement("script"),{type:"module",src:URL.createObjectURL(o),onerror(){s(new Error(`Failed to import: ${e}`)),l(u)},onload(){n(self[t].moduleMap[r]),l(u)}});document.head.appendChild(u)})),self[t].moduleMap={}}}("/assets/");const M="human",P="bank",S="grew",C="melt";let E=0;const U={name:"fÜne",logo:"fї",uValue:1e3,isPlaying:!1,txLimit:100,statLimit:200,symbol:"Ü",version:"0.1.0",stepTime:1},j={version:1,beginStat:0};U.doTx=(e,t=!0)=>{let n=Object.assign({from:"",to:"",message:"",value:0,date:(new Date).toISOString(),time:j.currency.elapsedTime},e);var a=j.accounts[n.from],l=j.accounts[n.to];return n.value<=0||!a||!l||a==l||a.role!=P&&a.balance-n.value<0?null:(l.role!=P&&(l.balance+=n.value),a.role!=P&&(a.balance-=n.value,a.balance<10&&(a.balance=0)),n.balanceFrom=a.balance,n.balanceTo=l.balance,j.transactions.push(n),j.transactions.length>U.txLimit&&(j.transactions=j.transactions.slice(j.transactions.length-U.txLimit)),t&&D(),n)},U.getCurrency=()=>Object.assign({},j.currency),U.updateCurrency=e=>{const t=U.isPlaying;return t&&U.stop(),Object.assign(j.currency,e),D(),t&&U.play(),Object.assign({},j.currency)},U.getAccount=e=>j.accounts[e],U.getAccounts=()=>Object.values(j.accounts),U.createAccount=e=>{if(e.name=e.name.trim(),!e.name||j.accounts[e.name])return null;let t=j.accounts[e.name]=Object.assign({name:"",balance:0,role:"wallet",date:(new Date).toISOString(),time:j.currency.elapsedTime},e);return D(),t},U.updateAccount=(e,t)=>{let n=j.accounts[e];return!n||"bank"==n.role||t.name&&e!=t.name?null:(n=Object.assign(n,t),D(),n)},U.deleteAccount=e=>{let t=j.accounts[e];return t&&t.name!=U.name?(delete j.accounts[e],delete j.stats[e],D(),t):null},U.getAccountTx=(e,t)=>{if(!j.accounts[e])return null;let n=j.transactions.filter((t=>t.from==e||t.to==e));return t>0&&t<n.length&&(n=n.slice(-t)),n},U.getAccountStats=e=>{if(!j.accounts[e])return null;const t=j.stats[e];if(!t)return[];let n=j.currency.elapsedTime%U.statLimit;return j.beginStat==n?[t[j.beginStat],t[j.beginStat]]:n>j.beginStat?t.slice(j.beginStat,n+1):t.slice(j.beginStat).concat(t.slice(0,n+1))};const N={uPerTime:1,elapsedTime:0,revaluationTime:1,nbMembers:0,monetaryMass:0,mode:C,lastMelt:0,average:0,quantitative:1,expression:"0.1"};U.expressionParser=(e,t)=>parseFloat(e);const O=/!x(\d+)/,L=U.uValue,q=(e,t)=>{const n=j.currency.elapsedTime%U.statLimit;let a=j.stats[e];a||(a=new Array(U.statLimit).fill(0),j.stats[e]=a),a[n]=t},D=()=>{let e=0,t=0;Object.values(j.accounts).forEach((n=>{const a=n.name.match(O);let l=1;a&&(l=parseInt(a[1])),n.role==M&&(t+=l),n.role!=P&&(e+=n.balance*l,q(n.name,n.balance))})),j.currency.nbMembers=t,j.currency.monetaryMass=e,j.currency.average=t>0?Math.floor(e/t):0,q(U.name,Object.assign({},j.currency))},F=(e=!0)=>{if(j.currency.elapsedTime>=U.statLimit)return void U.stop();j.currency.elapsedTime++,j.currency.elapsedTime>=U.statLimit&&j.currency.elapsedTime%U.statLimit==j.beginStat&&(j.beginStat=(j.beginStat+1)%U.statLimit);let t=0,n=0;const a=j.currency.uPerTime>=0?Math.floor(j.currency.uPerTime):0,l=L*j.currency.revaluationTime*a,s=j.accounts[U.name],r=j.currency.elapsedTime%j.currency.revaluationTime==0;r&&j.currency.nbMembers>0&&(t=U.expressionParser(j.currency.expression,{M:j.currency.monetaryMass/l,N:j.currency.nbMembers,T:j.currency.elapsedTime}),j.currency.mode==S&&(t=1-1/(1+t)),t=Math.max(0,Math.min(1,t)),n=(100*t).toFixed(2)),Object.values(j.accounts).forEach((e=>{if(r&&t>0&&e.balance>9){let a=e.balance*t;a=Math.min(a>l?Math.ceil(a):Math.floor(a),e.balance),a<10&&(a=10),U.doTx({from:e.name,to:s.name,message:"!revaluation%"+n,value:a},!1)}e.role==M&&a>0&&U.doTx({from:s.name,to:e.name,message:"!Ucreation",value:L*a},!1)})),r&&(j.currency.lastMelt=n,j.currency.quantitative=j.currency.quantitative*(1+1/(1/t-1))),D(),e&&(E=setTimeout(F,1e3*U.stepTime,!0)),U.onTimeChange(j.currency.elapsedTime)};U.getState=()=>Object.assign({},j),U.restoreState=e=>!(!e||!e.version||1!=e.version)&&(e.currency&&(j.currency=Object.assign(N,e.currency)),e.accounts&&(j.accounts=e.accounts),e.transactions&&(j.transactions=e.transactions),e.stats&&(j.stats=e.stats),e.beginStat&&(j.beginStat=e.beginStat),!0),U.start=(e,t)=>{U.restoreState(t),e&&(U.expressionParser=e),j.currency||(j.currency=N),j.accounts||(j.accounts={}),j.accounts[U.name]={name:U.name,balance:0,role:P,date:(new Date).toISOString(),time:0},j.transactions||(j.transactions=[]),j.stats||(j.stats={})},U.onTimeChange=()=>{},U.reset=()=>{U.stop(),Object.values(j.accounts).forEach((e=>{e.balance=0})),j.transactions=[],j.stats={},j.currency.elapsedTime=0,j.currency.lastMelt=0,j.currency.quantitative=1,j.beginStat=0,D()},U.play=(e=!0)=>{if(!U.isPlaying)return 0!=E&&(clearTimeout(E),E=0),U.isPlaying=e,F(e),!0},U.unplay=()=>{if(!U.isPlaying&&j.currency.elapsedTime>0){const e=(j.currency.elapsedTime-1)%U.statLimit,t=j.stats[U.name][e];if(t&&t.elapsedTime==j.currency.elapsedTime-1)return j.currency=t,Object.values(j.accounts).forEach((t=>{t.role!=P&&(t.balance=j.stats[t.name][e])})),D(),j.transactions=j.transactions.filter((t=>t.time<=e)),!0}return!1},U.stop=()=>{U.isPlaying&&(0!=E&&(clearTimeout(E),E=0),U.isPlaying=!1)};const X={color:"#FFFFFF"},I=e({name:U.name,isPlaying:!1,uValue:U.uValue,uSymbol:"Ü",creationPeriod:"year",stepTime:1,currency:{},accounts:[],selectedAccounts:new Map});I.selectedAccounts.set(U.name,X);const R=U.uValue;I.isSelected=e=>null!=I.selectedAccounts.get(e.name),I.select=e=>{if("bank"==e.role)return;let n=I.selectedAccounts.get(e.name);!n&&U.getAccount(e.name)?(n={color:t.randomColor()},I.selectedAccounts.set(e.name,n)):I.selectedAccounts.delete(e.name)},I.doTx=e=>{const t=U.doTx({from:e.from,to:e.to,message:e.message,value:Math.floor(e.value*R)});return t&&I.refresh(),t},I.updateCurrency=e=>(I.currency=U.updateCurrency(e),I.currency),I.addAccounts=e=>{e&&(e.forEach((e=>{U.createAccount(e)||U.updateAccount(e.name,e)})),I.refresh())},I.createAccount=e=>{let t=U.createAccount(e);return t&&(I.accounts.push(t),I.refresh()),t},I.updateAccount=(e,t)=>{let n=U.updateAccount(e.name,t);return n&&(n=Object.assign(e,n),I.refresh()),n},I.deleteAccount=e=>{let t=null;return U.deleteAccount(e.name)&&(I.isSelected(e)&&I.select(e),t=e,I.refresh()),t},I.getAccountTx=(e,t)=>U.getAccountTx(e,t),I.getAccountStats=e=>U.getAccountStats(e),I.onTimeChange=()=>{I.refresh()},I.refresh=()=>{I.accounts=U.getAccounts(),I.currency=U.getCurrency()},I.reset=()=>{U.reset(),I.refresh(),I.isPlaying=U.isPlaying},I.play=e=>{U.stepTime=I.stepTime,U.play(e)&&I.refresh(),I.isPlaying=U.isPlaying},I.unplay=()=>{U.unplay()&&I.refresh(),I.isPlaying=U.isPlaying},I.stop=()=>{U.stop(),I.isPlaying=U.isPlaying},I.getState=()=>{const e=U.getState();return e.selectedAccounts=Object.fromEntries(I.selectedAccounts),e.creationPeriod=I.creationPeriod,e},I.restoreState=e=>{e&&(e.selectedAccounts&&e.selectedAccounts[U.name]&&(I.selectedAccounts=new Map(Object.entries(e.selectedAccounts)),I.selectedAccounts.set(U.name,X)),e.creationPeriod&&(I.creationPeriod=e.creationPeriod),U.restoreState(e),I.refresh())},I.currencyWithoutDecimal=e=>Math.floor(e/R),I.currencyDecimal=e=>(e/R).toFixed(2),U.onTimeChange=I.onTimeChange,U.start(n,{}),I.refresh();const Y={expose:[],props:{currency:Object,accounts:Array,selectedAccounts:Array,autoPlay:Boolean},setup(e){const{currency:t,accounts:n,selectedAccounts:o}=e;return a((()=>{t&&I.updateCurrency(t),n&&I.addAccounts(n),o&&o.forEach((e=>{I.select(e)}))})),(e,t)=>(l(),s("div",null,[r(e.$slots,"default")]))}},V=o("en"),B=e=>({render(){if(V.value==e)return this.$slots.default()}}),$=e=>e[V.value],z=e=>{V.value="fr"==e?"fr":"en"};z((navigator.userLanguage||navigator.languages&&navigator.languages.length&&navigator.languages[0]||navigator.language||navigator.browserLanguage||navigator.systemLanguage).substring(0,2));const K=B("fr"),G=B("en"),J=(e,t=0)=>{switch(e){case"day":return $({en:"day",fr:"jour"})+(t>1?"s":"");case"month":return $({en:"month",fr:"mois"})+(t>1&&"fr"!=V.value?"s":"");case"year":return $({en:"year",fr:"an"})+(t>1?"s":"")}return e},Q={class:"mb-3 text-center"},W={class:"input-group d-inline"},Z=u("i",{class:"fa fa-upload"},null,-1),H=d(" load"),ee=d(" charger"),te=u("i",{class:"fa fa-download"},null,-1),ne=d(" save"),ae=d(" sauvegarder"),le=u("i",{class:"fa fa-undo"},null,-1),se=d(" reset"),re=d(" RAZ"),oe={expose:[],setup(e){const t=e=>{const t=e.target.files[0];if(t){const e=new FileReader;e.onload=function(e){var t=e.target.result;n(t)},e.readAsText(t)}else alert($({en:"file not found",fr:"fichier introuvable"}));e.target.value=null},n=e=>{try{const t=JSON.parse(e);I.stop(),I.restoreState(t)}catch(t){console.log(t),alert($({en:"can not read the file",fr:"le fichier ne peut pas être lu"}))}};return(e,n)=>(l(),s("div",Q,[u("div",W,[u("label",{class:["btn btn-dark mb-0 emboss",{disabled:i(I).isPlaying}]},[Z,u(i(G),null,{default:c((()=>[H])),_:1}),u(i(K),null,{default:c((()=>[ee])),_:1}),u("input",{type:"file",hidden:"",onChange:t},null,32)],2),u("button",{class:"btn btn-light text-dark emboss",onClick:n[1]||(n[1]=e=>(()=>{const e=I.getState(),t=JSON.stringify(e);var n=new Blob([t],{type:"text/plain;charset=utf-8"});m.saveAs(n,"fune_"+(new Date).toISOString().substring(0,16)+".fun")})()),disabled:i(I).isPlaying},[te,u(i(G),null,{default:c((()=>[ne])),_:1}),u(i(K),null,{default:c((()=>[ae])),_:1})],8,["disabled"])]),u("button",{class:"btn btn-secondary ml-3 emboss",onClick:n[2]||(n[2]=e=>i(I).reset())},[le,u(i(G),null,{default:c((()=>[se])),_:1}),u(i(K),null,{default:c((()=>[re])),_:1})])]))}};const ue={class:"navbar navbar-dark bg-dark w-100 control"},ie={class:"d-flex mx-auto align-items-center",style:{width:"400px"}},ce={class:"ml-auto"},de={class:"ml-1 display-5 font-monospace mr-auto"},me={class:"input-group d-inline mx-auto fit-content"},fe=u("i",{class:"fa fa-step-backward"},null,-1),pe=u("i",{class:"fa fa-step-forward"},null,-1),ye=u("i",{class:"fa fa-play"},null,-1),be=u("i",{class:"fa fa-pause"},null,-1),he={expose:[],setup(e){const t=()=>{I.play(!1)},n=()=>{I.unplay()};return(e,a)=>{const r=f("longclick");return l(),s("nav",ue,[u("div",ie,[u("img",{src:"/favicon64x64.png",class:"icon mr-auto ml-1 pointer",onClick:a[1]||(a[1]=e=>{window.scroll(0,0)})}),u("span",ce,p(i(J)(i(I).creationPeriod)),1),u("span",de,p(1e3>=i(I).currency.elapsedTime?("000"+i(I).currency.elapsedTime).slice(-3):i(I).currency.elapsedTime),1),u("div",me,[y(u("button",{class:"btn btn-outline-light bg-light text-dark btn-sm pr-1 pl-2 emboss",disabled:i(I).isPlaying},[fe],8,["disabled"]),[[r,n]]),y(u("button",{class:"btn btn-outline-light bg-dark text-light btn-sm pl-1 pr-2 emboss",disabled:i(I).isPlaying},[pe],8,["disabled"]),[[r,t]])]),i(I).isPlaying?b("",!0):(l(),s("button",{key:0,class:"btn btn-primary mr-2 emboss ml-auto",onClick:a[2]||(a[2]=e=>i(I).play()),style:{width:"63px"}},[ye])),i(I).isPlaying?(l(),s("button",{key:1,class:"btn btn-light mr-2 emboss ml-auto",onClick:a[3]||(a[3]=e=>i(I).stop()),style:{width:"63px"}},[be])):b("",!0)])])}}},ge={key:0,class:"alert alert-info alert-dismissible"},xe=e({}),ve=e=>{xe[e]?delete xe[e]:xe[e]=!0},_e={expose:[],props:{infoId:String},setup(e){const{infoId:t}=e,n=h((()=>null!=xe[t]));return(e,a)=>i(n)?(l(),s("div",ge,[r(e.$slots,"default"),u("button",{type:"button",class:"btn-close",onClick:a[1]||(a[1]=e=>{ve(t)}),"aria-label":"Close"})])):b("",!0)}},we=u("i",{class:"fa fa-info-circle"},null,-1),ke={expose:[],props:{info:String},setup(e){const{info:t}=e;return(e,n)=>(l(),s("span",{class:"text-info pl-1 pointer",onClick:n[1]||(n[1]=e=>i(ve)(t))},[we]))}},Te={class:"text-center mb-3"},Ae=d("currency"),Me=d("monnaie"),Pe=d("EN_info-currency"),Se=d("FR_info-currency"),Ce={class:"input-group mb-1"},Ee={class:"input-group-text",for:"currencyUPerTime"},Ue=d("Ü per "),je=d("Ü par "),Ne={class:"input-group-text pr-1"},Oe=d("Ü "),Le=d("EN_info-currency-uPerTime"),qe=d("FR_info-currency-uPerTime"),De={class:"input-group mb-1"},Fe={class:"input-group-text",for:"currencyRevaluationTime"},Xe=d("revaluation (r)"),Ie=d("réévaluation (r)"),Re={class:"input-group-text pr-1"},Ye=d("EN_info-currency-revaluationTime"),Ve=d("FR_info-currency-revaluationTime"),Be={class:"input-group mb-1"},$e=u("option",{value:"melt"}," Ü(t-r) = ( 1 - ",-1),ze=u("option",{value:"grew"}," Ü(t+r) = ( 1 + ",-1),Ke={class:"form-control px-1 text-left",style:{"flex-grow":"0.71"}},Ge=d(" ) Ü(t) "),Je=d("EN_info-currency-expression"),Qe=d("FR_info-currency-expression"),We={key:0,class:"d-flex align-items-start flex-wrap mb-1",style:{"justify-content":"space-evenly"}},Ze=d("ündo!"),He=d("annüler!"),et=d("üpdate!"),tt=d("valïder!"),nt={class:"input-group mb-1 mt-3"},at=d("more data"),lt=d("plus de données"),st=u("i",{class:"fa fa-plus-square position-absolute end-0 mr-3 pt-1"},null,-1),rt=d("less data"),ot=d("moins de données"),ut=u("i",{class:"fa fa-minus-square position-absolute end-0 mr-3 pt-1"},null,-1),it={key:1},ct={class:"input-group mb-1"},dt={class:"input-group-text",for:"currencyMass"},mt=d("monetary mass (M)"),ft=d("masse monétaire (M)"),pt=u("span",{class:"input-group-text"},"Ü",-1),yt={class:"input-group mb-1"},bt={class:"input-group-text",for:"currencyNbMembers"},ht=d("Üman accounts (N)"),gt=d("comptes Ümains (N)"),xt={class:"input-group mb-1"},vt={class:"input-group-text",for:"currencyAvg"},_t=d("average"),wt=d("moyenne"),kt={class:"input-group-text"},Tt=d("Ü / Üman"),At=d("Ü / Ümain"),Mt={class:"input-group mb-1"},Pt={class:"input-group-text",for:"currencyQuantitative"},St=d("quantitative"),Ct=d("quantitatif"),Et={class:"input-group-text"},Ut=d("Ü / Ü(0)"),jt=d("Ü / Ü(0)"),Nt={class:"input-group mb-1"},Ot={class:"input-group-text",for:"currencyLastGrew"},Lt=d("last growth"),qt=d("dernière croissance"),Dt=u("span",{class:"input-group-text"},"%",-1),Ft={class:"input-group mb-1"},Xt={class:"input-group-text",for:"currencyLastMelt"},It=d("last melting"),Rt=d("dernière fonte"),Yt=u("span",{class:"input-group-text"},"%",-1),Vt={expose:[],setup(t){const n=o(!1),r=e({expression:"",mode:"melt",uPerTime:1,revaluationTime:0}),m=h((()=>0==I.currency.lastMelt?0:(1/(1/(I.currency.lastMelt/100)-1)*100).toFixed(2))),f=h((()=>!(!I||!I.currency)&&(I.currency.expression!=r.expression||I.currency.mode!=r.mode||I.currency.uPerTime!=r.uPerTime||I.currency.revaluationTime!=r.revaluationTime)));return g((()=>[I.currency.expression,I.currency.mode,I.currency.uPerTime,I.currency.revaluationTime]),(()=>{Object.assign(r,I.currency)})),a((()=>{Object.assign(r,I.currency)})),(e,t)=>{return l(),s("div",null,[u("h4",Te,[u(i(G),null,{default:c((()=>[Ae])),_:1}),u(i(K),null,{default:c((()=>[Me])),_:1}),u(ke,{class:"position-absolute",info:"info-currency"})]),u(_e,{infoId:"info-currency"},{default:c((()=>[u(i(G),null,{default:c((()=>[Pe])),_:1}),u(i(K),null,{default:c((()=>[Se])),_:1})])),_:1}),u("form",null,[u("div",Ce,[u("label",Ee,[u(i(G),null,{default:c((()=>[Ue])),_:1}),u(i(K),null,{default:c((()=>[je])),_:1}),d(" "+p(i(J)(i(I).creationPeriod)),1)]),y(u("input",{id:"currencyUPerTime","onUpdate:modelValue":t[1]||(t[1]=e=>i(r).uPerTime=e),type:"number",min:"0",max:"1000",step:"1",class:["form-control text-right",{"bg-primary":i(r).uPerTime!=i(I).currency.uPerTime}],disabled:i(I).isPlaying},null,10,["disabled"]),[[x,i(r).uPerTime]]),u("span",Ne,[Oe,u(ke,{class:"px-0 ml-2",info:"info-currency-uPerTime"})])]),u(_e,{infoId:"info-currency-uPerTime"},{default:c((()=>[u(i(G),null,{default:c((()=>[Le])),_:1}),u(i(K),null,{default:c((()=>[qe])),_:1})])),_:1}),u("div",De,[u("label",Fe,[u(i(G),null,{default:c((()=>[Xe])),_:1}),u(i(K),null,{default:c((()=>[Ie])),_:1})]),y(u("input",{id:"currencyRevaluationTime","onUpdate:modelValue":t[2]||(t[2]=e=>i(r).revaluationTime=e),type:"number",min:"1",max:"400",step:"1",class:["form-control text-right",{"bg-primary":i(r).revaluationTime!=i(I).currency.revaluationTime}],disabled:i(I).isPlaying},null,10,["disabled"]),[[x,i(r).revaluationTime]]),u("span",Re,[d(p(i(J)(i(I).creationPeriod,i(r).revaluationTime))+" ",1),u(ke,{class:"px-0 ml-2",info:"info-currency-revaluationTime"})])]),u(_e,{infoId:"info-currency-revaluationTime"},{default:c((()=>[u(i(G),null,{default:c((()=>[Ye])),_:1}),u(i(K),null,{default:c((()=>[Ve])),_:1})])),_:1}),u("div",Be,[y(u("select",{"onUpdate:modelValue":t[3]||(t[3]=e=>i(r).mode=e),id:"currencyMode",class:["form-control select-text-center",{"bg-primary":i(r).mode!=i(I).currency.mode}],disabled:i(I).isPlaying},[$e,ze],10,["disabled"]),[[v,i(r).mode]]),y(u("input",{id:"currencyExpression","onUpdate:modelValue":t[4]||(t[4]=e=>i(r).expression=e),type:"text",class:["form-control text-right",{"bg-primary":i(r).expression!=i(I).currency.expression}],disabled:i(I).isPlaying},null,10,["disabled"]),[[x,i(r).expression]]),u("span",Ke,[Ge,u(ke,{class:"px-0 ml-2",info:"info-currency-expression"})])]),u(_e,{infoId:"info-currency-expression"},{default:c((()=>[u(i(G),null,{default:c((()=>[Je])),_:1}),u(i(K),null,{default:c((()=>[Qe])),_:1})])),_:1}),i(f)?(l(),s("div",We,[u("button",{type:"button",class:"btn btn-secondary mr-auto",onClick:t[5]||(t[5]=e=>Object.assign(i(r),i(I).currency))},[u(i(G),null,{default:c((()=>[Ze])),_:1}),u(i(K),null,{default:c((()=>[He])),_:1})]),u("button",{type:"button",class:"btn btn-primary",onClick:t[6]||(t[6]=e=>(()=>{const{expression:e,mode:t,uPerTime:n,revaluationTime:a}=r;I.updateCurrency({expression:e,mode:t,uPerTime:n,revaluationTime:a})})())},[u(i(G),null,{default:c((()=>[et])),_:1}),u(i(K),null,{default:c((()=>[tt])),_:1})])])):b("",!0),u("div",nt,[n.value?(l(),s("button",{key:1,type:"button",class:"btn btn-secondary form-control text-left",onClick:t[8]||(t[8]=e=>n.value=!1)},[u(i(G),null,{default:c((()=>[rt])),_:1}),u(i(K),null,{default:c((()=>[ot])),_:1}),ut])):(l(),s("button",{key:0,type:"button",class:"btn btn-secondary form-control text-left",onClick:t[7]||(t[7]=e=>n.value=!0)},[u(i(G),null,{default:c((()=>[at])),_:1}),u(i(K),null,{default:c((()=>[lt])),_:1}),st]))]),n.value?(l(),s("div",it,[u("div",ct,[u("label",dt,[u(i(G),null,{default:c((()=>[mt])),_:1}),u(i(K),null,{default:c((()=>[ft])),_:1})]),u("input",{id:"currencyMass",value:i(I).currencyWithoutDecimal(i(I).currency.monetaryMass),type:"text",class:"form-control text-right",disabled:""},null,8,["value"]),pt]),u("div",yt,[u("label",bt,[u(i(G),null,{default:c((()=>[ht])),_:1}),u(i(K),null,{default:c((()=>[gt])),_:1})]),u("input",{id:"currencyNbMembers",value:i(I).currency.nbMembers,type:"text",class:"form-control text-right",disabled:""},null,8,["value"])]),u("div",xt,[u("label",vt,[u(i(G),null,{default:c((()=>[_t])),_:1}),u(i(K),null,{default:c((()=>[wt])),_:1})]),u("input",{id:"currencyAvg",value:i(I).currencyDecimal(i(I).currency.average),type:"text",class:"form-control text-right",disabled:""},null,8,["value"]),u("span",kt,[u(i(G),null,{default:c((()=>[Tt])),_:1}),u(i(K),null,{default:c((()=>[At])),_:1})])]),u("div",Mt,[u("label",Pt,[u(i(G),null,{default:c((()=>[St])),_:1}),u(i(K),null,{default:c((()=>[Ct])),_:1})]),u("input",{id:"currencyQuantitative",value:(a=i(I).currency.quantitative,a<1e6?a.toFixed(2):a.toExponential(3)),type:"text",class:"form-control text-right",disabled:""},null,8,["value"]),u("span",Et,[u(i(G),null,{default:c((()=>[Ut])),_:1}),u(i(K),null,{default:c((()=>[jt])),_:1})])]),u("div",Nt,[u("label",Ot,[u(i(G),null,{default:c((()=>[Lt])),_:1}),u(i(K),null,{default:c((()=>[qt])),_:1})]),u("input",{id:"currencyLastGrew",value:i(m),type:"text",class:"form-control text-right",disabled:""},null,8,["value"]),Dt]),u("div",Ft,[u("label",Xt,[u(i(G),null,{default:c((()=>[It])),_:1}),u(i(K),null,{default:c((()=>[Rt])),_:1})]),u("input",{id:"currencyLastMelt",value:i(I).currency.lastMelt,type:"text",class:"form-control text-right",disabled:""},null,8,["value"]),Yt])])):b("",!0)])]);var a}}},Bt={class:"text-center mb-3"},$t=d("transaction"),zt=d("transaction"),Kt=d("EN_info-transaction"),Gt=d("FR_info-transaction"),Jt={class:"text-center"},Qt={class:"input-group mb-1"},Wt={class:"input-group-text",for:"txFrom"},Zt=d(" fröm "),Ht=d(" de "),en={class:"input-group-text",for:"txTo"},tn=d(" tö "),nn=d(" à "),an=u("option",{disabled:"",value:""},"select öne",-1),ln=u("option",{disabled:"",value:""},"qüi",-1),sn={class:"input-group mb-1"},rn=u("span",{class:"input-group-text"},"Ü",-1),on={expose:[],setup(t){const n=e({from:"fÜne",to:"",value:1}),a=h((()=>I.accounts)),r=h((()=>I.accounts));return(e,t)=>(l(),s("div",null,[u("h4",Bt,[u(i(G),null,{default:c((()=>[$t])),_:1}),u(i(K),null,{default:c((()=>[zt])),_:1}),u(ke,{class:"position-absolute",info:"info-transaction"})]),u(_e,{infoId:"info-transaction"},{default:c((()=>[u(i(G),null,{default:c((()=>[Kt])),_:1}),u(i(K),null,{default:c((()=>[Gt])),_:1})])),_:1}),u("form",Jt,[u("div",Qt,[u("label",Wt,[u(i(G),null,{default:c((()=>[Zt])),_:1}),u(i(K),null,{default:c((()=>[Ht])),_:1})]),y(u("select",{"onUpdate:modelValue":t[1]||(t[1]=e=>i(n).from=e),id:"txFrom",class:"form-control select-text-center"},[(l(!0),s(_,null,w(i(a),(e=>(l(),s("option",{value:e.name,key:e.name},p(e.name),9,["value"])))),128))],512),[[v,i(n).from]]),u("label",en,[u(i(G),null,{default:c((()=>[tn])),_:1}),u(i(K),null,{default:c((()=>[nn])),_:1})]),y(u("select",{"onUpdate:modelValue":t[2]||(t[2]=e=>i(n).to=e),id:"txTo",class:"form-control select-text-center"},[u(i(G),null,{default:c((()=>[an])),_:1}),u(i(K),null,{default:c((()=>[ln])),_:1}),(l(!0),s(_,null,w(i(r),(e=>(l(),s("option",{value:e.name,key:e.name},p(e.name),9,["value"])))),128))],512),[[v,i(n).to]])]),u("div",sn,[y(u("input",{"onUpdate:modelValue":t[3]||(t[3]=e=>i(n).value=e),type:"number",step:"any",class:"form-control text-right"},null,512),[[x,i(n).value]]),rn,u("button",{type:"button",class:"btn btn-primary",onClick:t[4]||(t[4]=e=>i(I).doTx(i(n)))},"ök!")])])]))}};function un(e){return parseInt(e,10)}function cn(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function dn(e,t,n){var a=e.x-t.x,l=e.y-t.y,s=Math.sqrt(a*a+l*l),r=a/s,o=l/s;return{x:t.x+r*n,y:t.y+o*n}}function mn(e,t){var n=e.shift();return"M"+n.x+" "+n.y+e.map((function(a,l){var s,r,o,u=e[l+1],i=e[l-1]||n,c=u&&(r=a,o=i,un((s=u).x+o.x)===un(2*r.x)&&un(s.y+o.y)===un(2*r.y));if(!u||c)return"L"+a.x+" "+a.y;var d=Math.min(cn(i,a),cn(u,a)),m=d/2<t?d/2:t,f=dn(i,a,m),p=dn(u,a,m);return"L"+f.x+" "+f.y+"S"+a.x+" "+a.y+" "+p.x+" "+p.y})).join("")}var fn={props:["smooth","data","boundary","radius","id","max","min","color","dash"],render:function(){var e,t=this,n=t.data,a=t.smooth,l=t.boundary,s=t.radius,r=t.id,o=t.max,u=t.min,i=t.dash,c=mn(function(e,t,n){var a=t.minX,l=t.minY,s=t.maxX,r=t.maxY,o=n.max,u=n.min,i=e.map((function(e){return e&&!isNaN(e)?e:0})),c=Math.min.apply(Math,i.concat([u]))-.001,d=(s-a)/(i.length-1),m=(r-l)/(Math.max.apply(Math,i.concat([o]))+.001-c);return i.map((function(e,t){return{x:t*d+a,y:r-(e-c)*m+1e-5*+(t===i.length-1)-1e-5*+(0===t)}}))}(n,l,{max:o,min:u}),a?s:0);return e=this.color?this.color:"url(#"+r+")",k("path",{d:c,fill:"none",stroke:e,"stroke-dasharray":i})}},pn={props:["boundary","max","min","xUnit","yUnit"],render:function(){var e=this.boundary;return[k("text",{x:e.minX,y:e.minY-3,fill:"#EEEEEEBB","font-size":"0.5em"},Math.round(this.max/1e3)+" "+this.yUnit),k("text",{x:e.minX,y:e.maxY-3,fill:"#EEEEEEBB","font-size":"0.5em"},Math.round(this.min/1e3)),k("text",{x:e.maxX,y:e.maxY-3,width:100,fill:"#EEEEEEBB",style:{"text-anchor":"end"},"font-size":"0.5em"},this.xUnit),k("line",{x1:e.minX,y1:e.minY,x2:e.maxX,y2:e.minY,stroke:"#EEEEEEBB"}),k("line",{x1:e.minX,y1:e.maxY,x2:e.maxX,y2:e.maxY,stroke:"#EEEEEEBB"})]}},yn={props:["gradient","gradientDirection","id"],render:function(){var e=this,t=e.gradient,n=e.gradientDirection,a=e.id,l=t.length-1||1,s=t.slice().reverse().map((function(e,t){return k("stop",{offset:t/l,"stop-color":e})}));return k("defs",[k("linearGradient",{id:a,x1:+("left"===n),y1:+("top"===n),x2:+("right"===n),y2:+("bottom"===n)},s)])}},bn={name:"Trend",props:{data:{type:Array,required:!0},autoDraw:Boolean,autoDrawDuration:{type:Number,default:2e3},autoDrawEasing:{type:String,default:"ease"},gradient:{type:Array,default:function(){return["#000"]}},gradientDirection:{type:String,default:"top"},max:{type:Number,default:-1/0},min:{type:Number,default:1/0},height:Number,width:Number,padding:{type:Number,default:8},radius:{type:Number,default:10},smooth:Boolean,xUnit:{type:String,default:""},yUnit:{type:String,default:""}},watch:{data:{immediate:!0,handler:function(e){var t=this;this.$nextTick((function(){if(!t.$isServer&&t.$refs.path&&t.autoDraw){var e=t.$refs.path.$el,n=e.getTotalLength();e.style.transition="none",e.style.strokeDasharray=n+" "+n,e.style.strokeDashoffset=Math.abs(n-(t.lastLength||0)),e.getBoundingClientRect(),e.style.transition="stroke-dashoffset "+t.autoDrawDuration+"ms "+t.autoDrawEasing,e.style.strokeDashoffset=0,t.lastLength=n}}))}}},render:function(){if(this.data&&!(this.data.length<2)){var e=this.width,t=this.height,n=this.padding,a=e||300,l=t||150,s={minX:n,minY:n,maxX:a-n,maxY:l-n};return k("svg",{width:e||"100%",height:t||"25%",viewBox:"0 0 "+a+" "+l},[k(yn,{gradient:this.gradient,gradientDirection:this.gradientDirection,id:"stats"}),k(pn,{boundary:s,max:Math.max.apply(Math,this.data.concat([this.max])),min:Math.min.apply(Math,this.data.concat([this.min])),xUnit:this.xUnit,yUnit:this.yUnit}),k(fn,{smooth:this.smooth,data:this.data,boundary:s,radius:this.radius,max:this.max,min:this.min,id:"stats",ref:"path",dash:"0"})])}}},hn={name:"Trends",props:{data:{type:Array,required:!0},colors:{type:Array,required:!0},min:{type:Number,default:1/0},height:Number,width:Number,padding:{type:Number,default:8},radius:{type:Number,default:10},smooth:Boolean,xUnit:{type:String,default:""},yUnit:{type:String,default:""}},data:()=>({pt:null,boundary:null,maxX:0,maxY:0}),methods:{getCoordinates(e,t){this.pt.x=e,this.pt.y=t;const n={x:0,y:0};if(this.maxX<=0)return n;const a=this.pt.matrixTransform(this.$el.getScreenCTM().inverse());return a.x<this.boundary.minX?n.x=0:a.x>this.boundary.maxX+this.boundary.minX?n.x=this.maxX:n.x=Math.round(this.maxX*(a.x-this.boundary.minX)/this.boundary.maxX),a.y<this.boundary.minY?n.y=this.maxY:a.y>this.boundary.maxY?n.y=0:n.y=Math.round(this.maxY*(this.boundary.maxY+this.boundary.minY-a.y)/this.boundary.maxY),n}},mounted(){this.pt=this.$el.createSVGPoint()},render:function(){var e=this.width,t=this.height,n=this.padding,a=e||300,l=t||200;this.boundary={minX:n,minY:n,maxX:a-n,maxY:l-n};var s=1e3;for(let o=0;o<this.data.length;o++){const e=this.data[o];if(e&&e.length>1)for(let t=0;t<e.length;t++)s=Math.max(s,e[t])}this.maxY=s,this.data.length>=1?this.maxX=this.data[0].length-1:this.maxX=0;var r=[];for(let o=0;o<this.data.length;o++){const e=this.data[o];e&&e.length>1&&r.push(k(fn,{smooth:this.smooth,data:e,boundary:this.boundary,radius:this.radius,max:s,min:this.min,id:"stats",ref:"path"+o,color:this.colors[o],dash:o==this.data.length-1?"2 2":"0"}))}return k("svg",{width:e||"100%",height:t||"25%",viewBox:"0 0 "+a+" "+l},[r,k(pn,{boundary:this.boundary,max:s,min:this.min,xUnit:this.xUnit,yUnit:this.yUnit})])}};const gn={class:"text-center mb-3"},xn=d("account"),vn=d("compte"),_n=d("EN_info-account"),wn=d("FR_info-account"),kn={class:"mt-3 mb-3"},Tn={class:"text-center mb-6"},An={class:"mx-auto input-group",style:{"max-width":"300px"}},Mn={disabled:"",value:null},Pn=d("whö"),Sn=d("qüi"),Cn={key:0},En={class:"display-3 text-center"},Un={class:"align-baseline",style:{"font-size":"50%"}},jn=u("small",null," Ü",-1),Nn={key:0,class:"display-5 text-center"},On=d("bank"),Ln=d("banque"),qn={key:1,class:"display-5 text-center"},Dn=d("wallet"),Fn=d("compte simple"),Xn={key:2,class:"display-5 text-center"},In=d("Üman"),Rn=d("Ümain"),Yn={class:"text-center mt-4"},Vn=d("transaction"),Bn=d("transaction"),$n={class:"mb-4 justify-content-center mx-auto",style:{"max-width":"500px"}},zn={class:"input-group mb-1"},Kn=u("small",{class:"input-group-text"},"Ü",-1),Gn={class:"input-group-text",for:"accountTxTo"},Jn=d(" tö "),Qn=d(" à "),Wn={disabled:"",value:""},Zn=d("someöne"),Hn=d("qüi"),ea={class:"input-group"},ta={class:"input-group-text",for:"txMessage"},na=d("message"),aa=d("message"),la={class:"text-center mt-4"},sa=d("stats"),ra=d("stats"),oa={class:"text-center mt-4"},ua=d("diary"),ia=d("journal"),ca={class:"list-group list-group-flush pointer mx-auto",style:{"max-width":"450px"}},da={key:0},ma={style:{width:"85px"},class:"badge bg-light text-dark text-right"},fa={style:{width:"70px"},class:"d-inline-block text-center"},pa=d(" to "),ya=d(" à "),ba={key:1},ha={style:{width:"85px"},class:"badge bg-primary text-right"},ga={style:{width:"70px"},class:"d-inline-block text-center"},xa=d(" from "),va=d(" de "),_a={class:"text-right"},wa={class:"fw-bold"},ka={expose:[],setup(t){const n=e({account:null,accounts:h((()=>I.accounts.filter((e=>"bank"!=e.role)))),otherAccounts:h((()=>n.account?I.accounts.filter((e=>"bank"!=e.role&&e.name!=n.account.name)):null)),stats:[],transactions:[],tx:{from:"",to:"",message:"",value:1}}),r=()=>{n.account&&(n.transactions=I.getAccountTx(n.account.name,10).reverse(),n.stats=I.getAccountStats(n.account.name,"day"))};g((()=>n.account),(()=>{r()})),g((()=>I.currency),r,{deep:!0});const o=e=>I.currencyDecimal(e).slice(-2),d=e=>{if(!e)return"";if("!Ucreation"==e)return $({en:"> u crëate Ü!",fr:"> crëation de Ü !"});if(0==e.indexOf("!revaluation%")){let t=e.split("%")[1];return $({en:"> all the Ü melt by "+t+"%!",fr:"> tous les Ü fondent de "+t+"% !"})}return e?"> "+e:""},m=e=>{if(e>=I.currency.elapsedTime)switch(I.creationPeriod){case"day":return $({en:"today",fr:"aujourd'hui"});case"month":return $({en:"this month",fr:"ce mois-ci"});case"year":return $({en:"this year",fr:"cette année"})}const t=I.currency.elapsedTime-e,n=J(I.creationPeriod,t);return $({en:t+" "+n+" ago",fr:"il y a "+t+" "+n})};return a((()=>{if(!n.account){n.accounts.length>1&&(n.account=n.accounts[0])}})),(e,t)=>{return l(),s("div",null,[u("h4",gn,[u(i(G),null,{default:c((()=>[xn])),_:1}),u(i(K),null,{default:c((()=>[vn])),_:1}),u(ke,{class:"position-absolute",info:"info-account"})]),u(_e,{infoId:"info-account"},{default:c((()=>[u(i(G),null,{default:c((()=>[_n])),_:1}),u(i(K),null,{default:c((()=>[wn])),_:1})])),_:1}),u("div",kn,[u("h3",Tn,[u("div",An,[y(u("select",{"onUpdate:modelValue":t[1]||(t[1]=e=>i(n).account=e),class:"text-center mx-auto form-control select-text-center",style:{"font-size":"1.3em"}},[u("option",Mn,[u(i(G),null,{default:c((()=>[Pn])),_:1}),u(i(K),null,{default:c((()=>[Sn])),_:1})]),(l(!0),s(_,null,w(i(n).accounts,(e=>(l(),s("option",{value:e,key:e.name},[u("strong",null,p(e.name),1)],8,["value"])))),128))],512),[[v,i(n).account]])])]),i(n).account?(l(),s("div",Cn,[u("div",En,[u("span",null,p((a=i(n).account.balance,I.currencyDecimal(a).slice(0,-3))),1),u("small",Un,"."+p(o(i(n).account.balance)),1),jn]),"bank"==i(n).account.role?(l(),s("p",Nn,[u(i(G),null,{default:c((()=>[On])),_:1}),u(i(K),null,{default:c((()=>[Ln])),_:1})])):"wallet"==i(n).account.role?(l(),s("p",qn,[u(i(G),null,{default:c((()=>[Dn])),_:1}),u(i(K),null,{default:c((()=>[Fn])),_:1})])):(l(),s("p",Xn,[u(i(G),null,{default:c((()=>[In])),_:1}),u(i(K),null,{default:c((()=>[Rn])),_:1})])),u("h4",Yn,[u(i(G),null,{default:c((()=>[Vn])),_:1}),u(i(K),null,{default:c((()=>[Bn])),_:1})]),u("form",$n,[u("div",null,[u("div",zn,[y(u("input",{"onUpdate:modelValue":t[2]||(t[2]=e=>i(n).tx.value=e),type:"number",max:Math.round(i(n).account.balance/100),step:"any",min:"0",class:"form-control text-right"},null,8,["max"]),[[x,i(n).tx.value]]),Kn,u("label",Gn,[u(i(G),null,{default:c((()=>[Jn])),_:1}),u(i(K),null,{default:c((()=>[Qn])),_:1})]),y(u("select",{"onUpdate:modelValue":t[3]||(t[3]=e=>i(n).tx.to=e),id:"accountTxTo",class:"form-control p-1 select-text-center"},[u("option",Wn,[u(i(G),null,{default:c((()=>[Zn])),_:1}),u(i(K),null,{default:c((()=>[Hn])),_:1})]),(l(!0),s(_,null,w(i(n).otherAccounts,(e=>(l(),s("option",{value:e.name,key:e.name},[u("strong",null,p(e.name),1)],8,["value"])))),128))],512),[[v,i(n).tx.to]]),u("button",{type:"button",class:"btn btn-primary",onClick:t[4]||(t[4]=e=>(n.tx.from=n.account.name,I.doTx(n.tx)&&(n.tx.message=""),void r()))},"ök!")]),u("div",ea,[u("label",ta,[u(i(G),null,{default:c((()=>[na])),_:1}),u(i(K),null,{default:c((()=>[aa])),_:1})]),y(u("input",{"onUpdate:modelValue":t[5]||(t[5]=e=>i(n).tx.message=e),type:"text",maxlength:"32",class:"form-control",id:"txMessage"},null,512),[[x,i(n).tx.message]])])])]),u("h4",la,[u(i(G),null,{default:c((()=>[sa])),_:1}),u(i(K),null,{default:c((()=>[ra])),_:1})]),u(i(bn),{class:"p-2 stats",data:i(n).stats,gradientDirection:"top",gradient:["#f560a2","#e83283","#bd125e"],padding:10,radius:8,"stroke-width":1.5,"stroke-linecap":"butt",min:0,max:1e3,xUnit:i(I).currency.elapsedTime+" "+i(J)(i(I).creationPeriod,i(I).currency.elapsedTime),yUnit:"Ü","auto-draw":"",smooth:""},null,8,["data","stroke-width","xUnit"]),u("h4",oa,[u(i(G),null,{default:c((()=>[ua])),_:1}),u(i(K),null,{default:c((()=>[ia])),_:1})]),u("ul",ca,[(l(!0),s(_,null,w(i(n).transactions,(e=>(l(),s("li",{key:e.id,class:"list-group-item list-group-item-action p-2"},[u("div",{class:"d-flex w-100 justify-content-between",onClick:t=>i(n).tx.to=e.from==i(n).account.name?e.to:e.from},[u("div",null,[e.from==i(n).account.name?(l(),s("h5",da,[u("span",ma,p(i(I).currencyDecimal(e.value))+" Ü",1),u("span",fa,[u(i(G),null,{default:c((()=>[pa])),_:1}),u(i(K),null,{default:c((()=>[ya])),_:1})]),u("strong",null,[u("span",null,p(e.to),1)])])):(l(),s("h5",ba,[u("span",ha,p(i(I).currencyDecimal(e.value))+" Ü",1),u("span",ga,[u(i(G),null,{default:c((()=>[xa])),_:1}),u(i(K),null,{default:c((()=>[va])),_:1})]),u("strong",null,[u("span",null,p(e.from),1)])]))]),u("small",_a,p(m(e.time)),1)],8,["onClick"]),u("span",wa,p(d(e.message)),1)])))),128))])])):b("",!0)])]);var a}}},Ta={class:"text-center mb-3"},Aa=d("accounts"),Ma=d("comptes"),Pa=d("EN_info-accounts"),Sa=d("FR_info-accounts"),Ca={class:"table table-hover"},Ea=d("stats"),Ua=d("stats"),ja=d("näme"),Na=d("nöm"),Oa=d("röle"),La=d("röle"),qa=d("balance"),Da=d("solde"),Fa=u("th",null,null,-1),Xa={class:"text-center"},Ia=d("Üman"),Ra=d("Ümain"),Ya=d("wället"),Va=d("sïmple"),Ba={key:2,class:"btn btn-sm btn-danger fw-bold emboss role",disabled:""},$a=d("bänk"),za=d("bänque"),Ka={class:"text-right"},Ga={key:0},Ja=u("small",null," Ü ",-1),Qa={class:"text-right"},Wa=d("reset"),Za=d("raz"),Ha=u("i",{class:"fa fa-trash"},null,-1),el={class:"input-group"},tl={value:"human"},nl=d("Üman"),al=d("Ümain"),ll={value:"wallet"},sl=d("wället"),rl=d("sïmple"),ol=d("nëw!"),ul=d("noüveau!"),il={expose:[],setup(t){const n=e({onlySelected:!1,sortKey:"name",sortOrder:1,newAccount:{name:"",role:"human"}}),a=h((()=>{let e=I.accounts.filter((e=>"bank"!=e.role));return n.onlySelected&&(e=e.filter((e=>I.isSelected(e)))),e.sort(((e,t)=>{let a=e[n.sortKey],l=t[n.sortKey];return(a===l?0:a>l?1:-1)*n.sortOrder}))})),r=e=>{e==n.sortKey&&(n.sortOrder=-n.sortOrder),n.sortKey=e},o=e=>{let t="human"==e.role?"wallet":"human";I.updateAccount(e,{role:t})},m=e=>{const t=I.selectedAccounts.get(e.name);return null==t?"#444444":t.color};return(e,t)=>(l(),s("div",null,[u("h4",Ta,[u(i(G),null,{default:c((()=>[Aa])),_:1}),u(i(K),null,{default:c((()=>[Ma])),_:1}),u(ke,{class:"position-absolute",info:"info-accounts"})]),u(_e,{infoId:"info-accounts"},{default:c((()=>[u(i(G),null,{default:c((()=>[Pa])),_:1}),u(i(K),null,{default:c((()=>[Sa])),_:1})])),_:1}),u("table",Ca,[u("thead",null,[u("tr",null,[u("th",{onClick:t[1]||(t[1]=e=>i(n).onlySelected=!i(n).onlySelected),class:[{"bg-primary":i(n).onlySelected},"pointer"],style:{width:"25px"}},[u(i(G),null,{default:c((()=>[Ea])),_:1}),u(i(K),null,{default:c((()=>[Ua])),_:1})],2),u("th",{onClick:t[2]||(t[2]=e=>r("name")),class:"pointer"},[u(i(G),null,{default:c((()=>[ja])),_:1}),u(i(K),null,{default:c((()=>[Na])),_:1})]),u("th",{onClick:t[3]||(t[3]=e=>r("role")),class:"text-center pointer"},[u(i(G),null,{default:c((()=>[Oa])),_:1}),u(i(K),null,{default:c((()=>[La])),_:1})]),u("th",{onClick:t[4]||(t[4]=e=>r("balance")),class:"text-right pointer"},[u(i(G),null,{default:c((()=>[qa])),_:1}),u(i(K),null,{default:c((()=>[Da])),_:1})]),Fa])]),u("tbody",null,[(l(!0),s(_,null,w(i(a),(e=>(l(),s("tr",{key:e.name},[u("td",{onClick:t=>i(I).select(e),class:"pointer"},[u("div",{style:[{"background-color":m(e)},{width:"25px",height:"25px"}],class:"icon"},null,4)],8,["onClick"]),u("td",{onClick:t=>i(I).select(e),class:"pointer"},p(e.name),9,["onClick"]),u("td",Xa,["human"==e.role?(l(),s("button",{key:0,class:"btn btn-sm btn-primary fw-bold emboss role",onClick:t=>o(e)},[u(i(G),null,{default:c((()=>[Ia])),_:1}),u(i(K),null,{default:c((()=>[Ra])),_:1})],8,["onClick"])):"wallet"==e.role?(l(),s("button",{key:1,class:"btn btn-sm btn-secondary fw-bold emboss role",onClick:t=>o(e)},[u(i(G),null,{default:c((()=>[Ya])),_:1}),u(i(K),null,{default:c((()=>[Va])),_:1})],8,["onClick"])):(l(),s("button",Ba,[u(i(G),null,{default:c((()=>[$a])),_:1}),u(i(K),null,{default:c((()=>[za])),_:1})]))]),u("td",Ka,["bank"!=e.role?(l(),s("strong",Ga,[d(p(i(I).currencyDecimal(e.balance)),1),Ja])):b("",!0)]),u("td",Qa,["bank"!=e.role?(l(),s("a",{key:0,href:"#",onClick:T((t=>(e=>{I.updateAccount(e,{balance:0})})(e)),["stop","prevent"]),class:"mr-2"},[u(i(G),null,{default:c((()=>[Wa])),_:1}),u(i(K),null,{default:c((()=>[Za])),_:1})],8,["onClick"])):b("",!0),e.name!=i(I).name?(l(),s("a",{key:1,href:"#",onClick:T((t=>(e=>{const t=e.name;confirm($({fr:"êtes vous sûr de supprimer "+t+" ?",en:"Are you sure to delete "+t+"?"}))&&I.deleteAccount(e)})(e)),["stop","prevent"]),class:"text-warning"},[Ha],8,["onClick"])):b("",!0)])])))),128))])]),u("div",el,[y(u("input",{placeholder:i($)({en:"näme",fr:"nöm"}),"onUpdate:modelValue":t[5]||(t[5]=e=>i(n).newAccount.name=e),type:"text",class:"form-control",id:"accountName",maxlength:"10"},null,8,["placeholder"]),[[x,i(n).newAccount.name]]),y(u("select",{"onUpdate:modelValue":t[6]||(t[6]=e=>i(n).newAccount.role=e),class:"form-control",style:{"max-width":"100px"}},[u("option",tl,[u(i(G),null,{default:c((()=>[nl])),_:1}),u(i(K),null,{default:c((()=>[al])),_:1})]),u("option",ll,[u(i(G),null,{default:c((()=>[sl])),_:1}),u(i(K),null,{default:c((()=>[rl])),_:1})])],512),[[v,i(n).newAccount.role]]),u("button",{type:"button",disabled:3>i(n).newAccount.name.length||i(I).accounts.some((e=>e.name==i(n).newAccount.name)),class:"btn btn-primary",onClick:t[7]||(t[7]=e=>(n.newAccount.name=n.newAccount.name.trim(),void I.createAccount(n.newAccount)))},[u(i(G),null,{default:c((()=>[ol])),_:1}),u(i(K),null,{default:c((()=>[ul])),_:1})],8,["disabled"])])]))}},cl={class:"position-relative"},dl={class:"text-center mb-3"},ml=d("stats"),fl=d("stats"),pl=d("EN_info-stats"),yl=d("FR_info-stats"),bl={class:"input-group mx-auto mt-3 mb-1",style:{"max-width":"250px"}},hl={class:"input-group-text px-1"},gl=d("referential"),xl=d("référentiel"),vl={value:"relative"},_l=d("relative"),wl=d("relatif"),kl={value:"quantitative"},Tl=d("quantitative"),Al=d("quantitatif"),Ml={value:"average"},Pl=d("average"),Sl=d("moyenne"),Cl={class:"input-group-text p-1"},El=d("EN_info-stats-referential"),Ul=d("FR_info-stats-referential"),jl={expose:[],setup(t){const n=o(null),r=o("-------------"),d=e=>{const t=n.value.getCoordinates(e.clientX,e.clientY);t&&(r.value=I.currencyDecimal(t.y)+" Ü  / "+t.x+" "+J(I.creationPeriod,t.x))},m=e({referential:"relative",stats:[],colors:[],xUnit:"",yUnit:"Ü"}),f=()=>{m.xUnit=I.currency.elapsedTime+" "+J(I.creationPeriod,I.currency.elapsedTime);let e=I.getAccountStats(I.name),t=null,n=[],a=[];I.selectedAccounts.forEach(((l,s)=>{if(s!=I.name&&(t=I.getAccountStats(s),t)){if("average"==m.referential)for(let n=0;n<t.length;n++)t[n]=0==e[n].average?0:t[n]/e[n].average*1e5;else if("quantitative"==m.referential)for(let n=0;n<t.length;n++)t[n]=t[n]*(e[n].quantitative/I.currency.quantitative);n.push(t),a.push(l.color)}})),"average"==m.referential?(m.yUnit="% M/N",t=new Array(e.length).fill(1e5)):"relative"==m.referential?(m.yUnit="Ü",t=e.map((e=>e.average))):"quantitative"==m.referential&&(m.yUnit="Ü(0) / Ü",t=e.map((e=>e.average*(e.quantitative/I.currency.quantitative)))),n.push(t),a.push(I.selectedAccounts.get(I.name).color),m.stats=n,m.colors=a};return g((()=>I.selectedAccounts),f,{deep:!0}),g((()=>I.currency),f,{deep:!0}),g((()=>[m.referential,I.creationPeriod]),f),a((()=>{f()})),(e,t)=>(l(),s("div",cl,[u("h4",dl,[u(i(G),null,{default:c((()=>[ml])),_:1}),u(i(K),null,{default:c((()=>[fl])),_:1}),u(ke,{class:"position-absolute",info:"info-stats"})]),u(_e,{infoId:"info-stats"},{default:c((()=>[u(i(G),null,{default:c((()=>[pl])),_:1}),u(i(K),null,{default:c((()=>[yl])),_:1})])),_:1}),u("div",{title:r.value},[u(i(hn),{class:"p-2 stats",data:i(m).stats,colors:i(m).colors,padding:10,radius:8,"stroke-width":1.4,"stroke-linecap":"butt",min:0,xUnit:i(m).xUnit,yUnit:i(m).yUnit,onMousemove:d,ref:n,"auto-draw":"",smooth:""},null,8,["data","colors","stroke-width","xUnit","yUnit"])],8,["title"]),u("div",bl,[u("label",hl,[u(i(G),null,{default:c((()=>[gl])),_:1}),u(i(K),null,{default:c((()=>[xl])),_:1})]),y(u("select",{"onUpdate:modelValue":t[1]||(t[1]=e=>i(m).referential=e),class:"form-control px-1 select-text-center"},[u("option",vl,[u(i(G),null,{default:c((()=>[_l])),_:1}),u(i(K),null,{default:c((()=>[wl])),_:1})]),u("option",kl,[u(i(G),null,{default:c((()=>[Tl])),_:1}),u(i(K),null,{default:c((()=>[Al])),_:1})]),u("option",Ml,[u(i(G),null,{default:c((()=>[Pl])),_:1}),u(i(K),null,{default:c((()=>[Sl])),_:1})])],512),[[v,i(m).referential]]),u("label",Cl,[u(ke,{class:"px-0",info:"info-stats-referential"})])]),u(_e,{infoId:"info-stats-referential"},{default:c((()=>[u(i(G),null,{default:c((()=>[El])),_:1}),u(i(K),null,{default:c((()=>[Ul])),_:1})])),_:1})]))}};const Nl={class:"container mt-3 mb-5"},Ol=u("h1",{class:"display-1 text-center mb-3"},[u("img",{src:"/favicon90x90.png",class:"icon"}),u("span",{class:"align-middle"},[d(" f"),u("small",null,"Ü"),d("ne")])],-1),Ll={class:"justify-content-center mb-3 input-group mx-auto fit-content"},ql={class:"lead text-center mb-3"},Dl=u("strong",null,[d("f"),u("small",null,"Ü"),d("ne")],-1),Fl=d(" is a web app to test and play with a simple "),Xl=u("a",{href:"https://libre-currency.org"},"Libre Currency",-1),Il=d(" called "),Rl=u("strong",null,[d("f"),u("small",null,"Ü"),d("ne")],-1),Yl=d(" (pronounced /fən/ like fun) "),Vl=u("strong",null,[d("f"),u("small",null,"Ü"),d("ne")],-1),Bl=d(" est une appli web qui permet de jouer avec une simple "),$l=u("a",{href:"https://monnaie-libre.fr/"},"Monnaie Libre",-1),zl=d(" appelée "),Kl=u("strong",null,[d("f"),u("small",null,"Ü"),d("ne")],-1),Gl=d(" (prononcée /fən/ comme fun en anglais) "),Jl=d("EN_info-home-libreCurrency"),Ql=d("FR_info-home-libreCurrency"),Wl={class:"lead text-center"},Zl=d(" a "),Hl=u("strong",null,"Üman",-1),es=d(" account create some new Ü (the Ünit of the f"),ts=u("small",null,"Ü",-1),ns=d("ne money) every "),as=d(" un compte "),ls=u("strong",null,"Ümain",-1),ss=d(" crée de nouvelles "),rs=u("small",null,"Ü",-1),os=d(" (l'Ünité de la monnaie f"),us=u("small",null,"Ü",-1),is=d("ne) chaque "),cs={class:"input-group fit-content d-inline-block"},ds={value:"day"},ms={value:"month"},fs={value:"year"},ps={class:"lead text-center"},ys=d(" the old created Ünits melt according to a "),bs=u("strong",null,"mathematical",-1),hs=d("s formula at each "),gs=u("strong",null,"revaluation period",-1),xs=d(" les anciennes Ünités fondent suivant une "),vs=u("strong",null,"formule",-1),_s=d(" mathématique à chaque "),ws=u("strong",null,"période de réévaluation",-1),ks=d("EN_info-home-funiter"),Ts=d("FR_info-home-funiter"),As={class:"d-flex align-items-start flex-wrap p-2 mt-3",style:{"justify-content":"space-evenly"}},Ms={style:{"min-width":"30vw"}},Ps={class:"mx-auto",style:{"min-width":"35vw","max-width":"600px"}},Ss={style:{"min-width":"30vw"}};let Cs=JSON.parse(localStorage.getItem("state"));I.restoreState(Cs);var Es={mounted:(e,t)=>{if("function"!=typeof t.value)return;let n=null,a=null;const l=e=>{"click"===e.type&&0!==e.button||(e.preventDefault(),null===n&&(r(),n=setTimeout((()=>{a=setInterval((()=>{r()}),50),r()}),300)))},s=()=>{null!==n&&(clearTimeout(n),n=null),a&&(clearInterval(a),a=null)},r=e=>{t.value(e)};["mousedown","touchstart"].forEach((t=>e.addEventListener(t,l))),["click","mouseout","touchend","touchcancel"].forEach((t=>e.addEventListener(t,s)))}};A({expose:[],setup(e){o("info");const t=()=>{localStorage.setItem("state",JSON.stringify(I.getState()))};g((()=>I.currency),t,{deep:!0}),g((()=>I.selectedAccounts),t,{deep:!0});const n=[];if(I.accounts.length<=1){const e={name:"Alice",balance:1e4,role:"human"},t={name:"Bob",balance:2e4,role:"human"},n={name:"Carole",balance:0,role:"human"};I.addAccounts([e,t,n]),I.select(e),I.select(t),I.select(n)}return(e,t)=>(l(),s("div",null,[u("div",Nl,[Ol,u("div",Ll,[u("button",{class:["btn btn-sm text-light",{"btn-outline-secondary":"fr"!=i(V),"btn-primary":"fr"==i(V)}],onClick:t[1]||(t[1]=e=>i(z)("fr"))},"FR",2),u("button",{class:["btn btn-sm text-light",{"btn-outline-secondary":"en"!=i(V),"btn-primary":"en"==i(V)}],onClick:t[2]||(t[2]=e=>i(z)("en"))},"EN",2)]),u("p",ql,[u(i(G),null,{default:c((()=>[Dl,Fl,Xl,Il,Rl,Yl])),_:1}),u(i(K),null,{default:c((()=>[Vl,Bl,$l,zl,Kl,Gl])),_:1}),u(ke,{class:"px-0",info:"info-home-libreCurrency"})]),u(_e,{infoId:"info-home-libreCurrency"},{default:c((()=>[u(i(G),null,{default:c((()=>[Jl])),_:1}),u(i(K),null,{default:c((()=>[Ql])),_:1})])),_:1}),u("div",Wl,[u(i(G),null,{default:c((()=>[Zl,Hl,es,ts,ns])),_:1}),u(i(K),null,{default:c((()=>[as,ls,ss,rs,os,us,is])),_:1}),u("div",cs,[y(u("select",{class:"form-control select-text-center fit-content p-1","onUpdate:modelValue":t[3]||(t[3]=e=>i(I).creationPeriod=e)},[u("option",ds,p(i(J)("day")),1),u("option",ms,p(i(J)("month")),1),u("option",fs,p(i(J)("year")),1)],512),[[v,i(I).creationPeriod]])])]),u("p",ps,[u(i(G),null,{default:c((()=>[ys,bs,hs,gs])),_:1}),u(i(K),null,{default:c((()=>[xs,vs,_s,ws])),_:1})]),u(_e,{infoId:"info-home-funiter",class:"mx-auto w-auto mt-3"},{default:c((()=>[u(i(G),null,{default:c((()=>[ks])),_:1}),u(i(K),null,{default:c((()=>[Ts])),_:1})])),_:1})]),u(Y,{accounts:n,selectedAccounts:n,class:"mt-3"},{default:c((()=>[u(oe,{class:"mx-auto",style:{"max-width":"400px"}}),u(he,{class:"mx-auto sticky-top"}),u("div",As,[u("div",Ms,[u(Vt,{class:"mb-3 mx-auto",style:{width:"380px"}})]),u("div",Ps,[u(jl,{class:"mb-3"}),u(on,{class:"mb-3 mx-auto",style:{"max-width":"450px"}})]),u("div",Ss,[u(il,{class:"mb-3 mx-auto",style:{"max-width":"450px"}})]),u(ka,{class:"mb-3 mx-auto",style:{"min-width":"35vw","max-width":"600px"}})])])),_:1})]))}}).directive("longclick",Es).mount("#app");

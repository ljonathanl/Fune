import{r as e,a as t,e as n,o as a,b as l,c as r,d as s,f as o,g as u,u as i,w as c,h as d,F as m,i as p,t as f,j as y,k as b,l as g,m as h,v as x,n as v,p as _,q as w,s as T,x as k,y as M,z as A}from"./vendor.f1018a54.js";!function(e=".",t="__import__"){try{self[t]=new Function("u","return import(u)")}catch(n){const a=new URL(e,location),l=e=>{URL.revokeObjectURL(e.src),e.remove()};self[t]=e=>new Promise(((n,r)=>{const s=new URL(e,a);if(self[t].moduleMap[s])return n(self[t].moduleMap[s]);const o=new Blob([`import * as m from '${s}';`,`${t}.moduleMap['${s}']=m;`],{type:"text/javascript"}),u=Object.assign(document.createElement("script"),{type:"module",src:URL.createObjectURL(o),onerror(){r(new Error(`Failed to import: ${e}`)),l(u)},onload(){n(self[t].moduleMap[s]),l(u)}});document.head.appendChild(u)})),self[t].moduleMap={}}}("assets/");const S="human",P="bank",C="grew",U="melt";let E=0;const N={name:"fÜne",logo:"fї",uValue:1e3,isPlaying:!1,txLimit:100,statLimit:100,symbol:"Ü",version:"0.1.1",stepTime:1},D={version:1,beginStat:0};N.doTx=(e,t=!0)=>{let n=Object.assign({from:"",to:"",message:"",value:0,date:(new Date).toISOString(),time:D.currency.elapsedTime},e);var a=D.accounts[n.from],l=D.accounts[n.to];return n.value<=0||!a||!l||a==l||a.role!=P&&a.balance-n.value<0?null:(l.role!=P&&(l.balance+=n.value),a.role!=P&&(a.balance-=n.value,a.balance<10&&(a.balance=0)),n.balanceFrom=a.balance,n.balanceTo=l.balance,D.transactions.push(n),D.transactions.length>N.txLimit&&(D.transactions=D.transactions.slice(D.transactions.length-N.txLimit)),t&&L(),n)},N.getCurrency=()=>Object.assign({},D.currency),N.updateCurrency=e=>{const t=N.isPlaying;return t&&N.stop(),Object.assign(D.currency,e),L(),t&&N.play(),Object.assign({},D.currency)},N.getAccount=e=>D.accounts[e],N.getAccounts=()=>Object.values(D.accounts),N.createAccount=e=>{if(e.name=e.name.trim(),!e.name||D.accounts[e.name])return null;let t=D.accounts[e.name]=Object.assign({name:"",balance:0,role:"wallet",date:(new Date).toISOString(),time:D.currency.elapsedTime},e);return L(),t},N.updateAccount=(e,t)=>{let n=D.accounts[e];return!n||"bank"==n.role||t.name&&e!=t.name?null:(n=Object.assign(n,t),L(),n)},N.deleteAccount=e=>{let t=D.accounts[e];return t&&t.name!=N.name?(delete D.accounts[e],delete D.stats[e],L(),t):null},N.getAccountTx=(e,t)=>{if(!D.accounts[e])return null;let n=D.transactions.filter((t=>t.from==e||t.to==e));return t>0&&t<n.length&&(n=n.slice(-t)),n},N.getAccountStats=e=>{if(!D.accounts[e])return null;const t=D.stats[e];if(!t)return[];let n=D.currency.elapsedTime%N.statLimit;return D.beginStat==n?[t[D.beginStat],t[D.beginStat]]:n>D.beginStat?t.slice(D.beginStat,n+1):t.slice(D.beginStat).concat(t.slice(0,n+1))};const j={uPerTime:1,elapsedTime:0,revaluationTime:1,nbMembers:0,monetaryMass:0,mode:U,lastMelt:0,average:0,quantitative:1,expression:"0.1"};N.expressionParser=(e,t)=>parseFloat(e);const O=/^!(.*)/,X=N.uValue,q=(e,t)=>{const n=D.currency.elapsedTime%N.statLimit;let a=D.stats[e];a||(a=new Array(N.statLimit).fill(0),D.stats[e]=a),a[n]=t},F=e=>{const t=e.name.match(O);let n=1;if(t){try{n=Math.round(N.expressionParser(t[1],{M:D.currency.monetaryMass,N:D.currency.nbMembers,T:D.currency.elapsedTime}))}catch(a){}n<1&&(n=1)}return n},L=()=>{let e=0,t=0;Object.values(D.accounts).forEach((n=>{if(n.role!=P){const a=F(n);n.role==S&&(t+=a),e+=n.balance,q(n.name,Math.floor(n.balance/a))}})),D.currency.nbMembers=t,D.currency.monetaryMass=e,D.currency.average=t>0?Math.floor(e/t):0,q(N.name,Object.assign({},D.currency))},Y=(e=!0)=>{if(D.currency.elapsedTime>=999)return void N.stop();D.currency.elapsedTime++,D.currency.elapsedTime>=N.statLimit&&D.currency.elapsedTime%N.statLimit==D.beginStat&&(D.beginStat=(D.beginStat+1)%N.statLimit);let t=0,n=0;const a=D.currency.uPerTime>=0?Math.floor(D.currency.uPerTime):0,l=X*D.currency.revaluationTime*a,r=D.accounts[N.name],s=D.currency.elapsedTime%D.currency.revaluationTime==0;s&&D.currency.nbMembers>0&&(t=N.expressionParser(D.currency.expression,{M:D.currency.monetaryMass/l,N:D.currency.nbMembers,T:D.currency.elapsedTime}),D.currency.mode==C&&(t=1-1/(1+t)),t=Math.max(0,Math.min(1,t)),n=Math.floor(1e4*t)/100),Object.values(D.accounts).forEach((e=>{if(e.role!=P){const o=F(e);if(e.role==S&&a>0&&N.doTx({from:r.name,to:e.name,message:"!Ucreation",value:o*X*a},!1),s&&t>0&&e.balance>9){let a=e.balance*t;a=Math.min(a>l?Math.ceil(a):Math.floor(a),e.balance),a<10&&(a=10),N.doTx({from:e.name,to:r.name,message:"!revaluation%"+n,value:a},!1)}}})),s&&(D.currency.lastMelt=n,D.currency.quantitative=D.currency.quantitative*(1+1/(1/t-1))),L(),e&&(E=setTimeout(Y,1e3*N.stepTime,!0)),N.onTimeChange(D.currency.elapsedTime)};N.getState=()=>Object.assign({},D),N.restoreState=e=>!(!e||!e.version||1!=e.version)&&(e.currency&&(D.currency=Object.assign(j,e.currency)),e.accounts&&(D.accounts=e.accounts),e.transactions&&(D.transactions=e.transactions),e.stats&&(D.stats=e.stats),e.beginStat&&(D.beginStat=e.beginStat),!0),N.start=(e,t)=>{N.restoreState(t),e&&(N.expressionParser=e),D.currency||(D.currency=j),D.accounts||(D.accounts={}),D.accounts[N.name]={name:N.name,balance:0,role:P,date:(new Date).toISOString(),time:0},D.transactions||(D.transactions=[]),D.stats||(D.stats={})},N.onTimeChange=()=>{},N.reset=()=>{N.stop(),Object.values(D.accounts).forEach((e=>{if(e.balance=0,0!=D.beginStat)return;const t=D.stats[e.name][0];t<=0||(e.balance=F(e)*t)})),D.transactions=[],D.stats={},D.currency.elapsedTime=0,D.currency.lastMelt=0,D.currency.quantitative=1,D.beginStat=0,L()},N.play=(e=!0)=>{if(!N.isPlaying)return 0!=E&&(clearTimeout(E),E=0),N.isPlaying=e,Y(e),!0},N.unplay=()=>{if(!N.isPlaying&&D.currency.elapsedTime>0){const e=(D.currency.elapsedTime-1)%N.statLimit,t=D.stats[N.name][e];if(t&&t.elapsedTime==D.currency.elapsedTime-1)return D.currency=t,Object.values(D.accounts).forEach((t=>{if(t.role!=P){const n=F(t);t.balance=D.stats[t.name][e]*n}})),L(),D.transactions=D.transactions.filter((t=>t.time<=e)),!0}return!1},N.stop=()=>{N.isPlaying&&(0!=E&&(clearTimeout(E),E=0),N.isPlaying=!1)},console.log(N.name+" v"+N.version);const I={color:"#FFFFFF"},B=e({name:N.name,isPlaying:!1,uValue:N.uValue,uSymbol:"Ü",creationPeriod:"year",stepTime:1,currency:{},accounts:[],selectedAccounts:new Map});B.selectedAccounts.set(N.name,I);const R=N.uValue;B.isSelected=e=>null!=B.selectedAccounts.get(e.name),B.select=e=>{if("bank"==e.role)return;let n=B.selectedAccounts.get(e.name);!n&&N.getAccount(e.name)?(n={color:t.randomColor()},B.selectedAccounts.set(e.name,n)):B.selectedAccounts.delete(e.name)},B.doTx=e=>{const t=N.doTx({from:e.from,to:e.to,message:e.message,value:Math.floor(e.value*R)});return t&&B.refresh(),t},B.updateCurrency=e=>(B.currency=N.updateCurrency(e),B.currency),B.addAccounts=e=>{e&&(e.forEach((e=>{N.createAccount(e)||N.updateAccount(e.name,e)})),B.refresh())},B.createAccount=e=>{let t=N.createAccount(e);return t&&(B.accounts.push(t),B.select(t),B.refresh()),t},B.updateAccount=(e,t)=>{let n=N.updateAccount(e.name,t);return n&&(n=Object.assign(e,n),B.refresh()),n},B.deleteAccount=e=>{let t=null;return N.deleteAccount(e.name)&&(B.isSelected(e)&&B.select(e),t=e,B.refresh()),t},B.getAccountTx=(e,t)=>N.getAccountTx(e,t),B.getAccountStats=e=>N.getAccountStats(e),B.onTimeChange=()=>{B.refresh()},B.refresh=()=>{B.accounts=N.getAccounts(),B.currency=N.getCurrency()},B.reset=()=>{N.reset(),B.refresh(),B.isPlaying=N.isPlaying},B.play=e=>{N.stepTime=B.stepTime,N.play(e)&&B.refresh(),B.isPlaying=N.isPlaying},B.unplay=()=>{N.unplay()&&B.refresh(),B.isPlaying=N.isPlaying},B.stop=()=>{N.stop(),B.isPlaying=N.isPlaying},B.getState=()=>{const e=N.getState();return e.selectedAccounts=Object.fromEntries(B.selectedAccounts),e.creationPeriod=B.creationPeriod,e},B.restoreState=e=>{e&&(e.selectedAccounts&&e.selectedAccounts[N.name]&&(B.selectedAccounts=new Map(Object.entries(e.selectedAccounts)),B.selectedAccounts.set(N.name,I)),e.creationPeriod&&(B.creationPeriod=e.creationPeriod),N.restoreState(e),B.refresh())},B.currencyWithoutDecimal=e=>Math.floor(e/R),B.currencyDecimal=e=>(e/R).toFixed(2),N.onTimeChange=B.onTimeChange,N.start(n,{}),B.refresh();const V={expose:[],props:{currency:Object,accounts:Array,selectedAccounts:Array,autoPlay:Boolean},setup(e){const{currency:t,accounts:n,selectedAccounts:o}=e;return a((()=>{t&&B.updateCurrency(t),n&&B.addAccounts(n),o&&o.forEach((e=>{B.select(e)}))})),(e,t)=>(l(),r("div",null,[s(e.$slots,"default")]))}},$=o("en"),z=e=>({render(){if($.value==e)return this.$slots.default()}}),K=e=>e[$.value],G=e=>{$.value="fr"==e?"fr":"en"};G((navigator.userLanguage||navigator.languages&&navigator.languages.length&&navigator.languages[0]||navigator.language||navigator.browserLanguage||navigator.systemLanguage).substring(0,2));const J=z("fr"),Q=z("en"),W=(e,t=0)=>{switch(e){case"day":return K({en:"day",fr:"jour"})+(t>1?"s":"");case"month":return K({en:"month",fr:"mois"})+(t>1&&"fr"!=$.value?"s":"");case"year":return K({en:"year",fr:"an"})+(t>1?"s":"")}return e},Z={class:"mb-3 text-center"},H={class:"input-group d-inline"},ee=u("i",{class:"fa fa-upload"},null,-1),te=d(" load"),ne=d(" charger"),ae=u("i",{class:"fa fa-download"},null,-1),le=d(" save"),re=d(" sauvegarder"),se=u("i",{class:"fa fa-undo"},null,-1),oe=d(" reset"),ue=d(" RAZ"),ie={expose:[],setup(e){const t=e=>{const t=e.target.files[0];if(t){const e=new FileReader;e.onload=function(e){var t=e.target.result;n(t)},e.readAsText(t)}else alert(K({en:"file not found",fr:"fichier introuvable"}));e.target.value=null},n=e=>{try{const t=JSON.parse(e);B.stop(),B.restoreState(t)}catch(t){console.log(t),alert(K({en:"can not read the file",fr:"le fichier ne peut pas être lu"}))}};return(e,n)=>(l(),r("div",Z,[u("div",H,[u("label",{class:["btn btn-dark mb-0 emboss",{disabled:i(B).isPlaying}]},[ee,u(i(Q),null,{default:c((()=>[te])),_:1}),u(i(J),null,{default:c((()=>[ne])),_:1}),u("input",{type:"file",hidden:"",onChange:t},null,32)],2),u("button",{class:"btn btn-light text-dark emboss",onClick:n[1]||(n[1]=e=>(()=>{const e=B.getState(),t=JSON.stringify(e);var n=new Blob([t],{type:"application/json;charset=utf-8"});m.saveAs(n,"fune_"+(new Date).toISOString().substring(0,16)+".fun")})()),disabled:i(B).isPlaying},[ae,u(i(Q),null,{default:c((()=>[le])),_:1}),u(i(J),null,{default:c((()=>[re])),_:1})],8,["disabled"])]),u("button",{class:"btn btn-secondary ml-3 emboss",onClick:n[2]||(n[2]=e=>i(B).reset())},[se,u(i(Q),null,{default:c((()=>[oe])),_:1}),u(i(J),null,{default:c((()=>[ue])),_:1})])]))}};const ce={class:"navbar navbar-dark bg-dark w-100 control"},de={class:"d-flex mx-auto align-items-center",style:{width:"400px"}},me={class:"ml-auto"},pe={class:"ml-1 display-5 font-monospace mr-auto"},fe={class:"input-group d-inline mx-auto fit-content"},ye=u("i",{class:"fa fa-step-backward"},null,-1),be=u("i",{class:"fa fa-step-forward"},null,-1),ge=u("i",{class:"fa fa-play"},null,-1),he=u("i",{class:"fa fa-pause"},null,-1),xe={expose:[],setup(e){const t=()=>{B.play(!1)},n=()=>{B.unplay()};return(e,a)=>{const s=p("longclick");return l(),r("nav",ce,[u("div",de,[u("img",{src:"favicon64x64.png",class:"icon mr-auto ml-1 pointer",onClick:a[1]||(a[1]=e=>{window.scroll(0,0)})}),u("span",me,f(i(W)(i(B).creationPeriod)),1),u("span",pe,f(1e3>=i(B).currency.elapsedTime?("000"+i(B).currency.elapsedTime).slice(-3):i(B).currency.elapsedTime),1),u("div",fe,[y(u("button",{class:"btn btn-outline-light bg-light text-dark btn-sm pr-1 pl-2 emboss",disabled:i(B).isPlaying},[ye],8,["disabled"]),[[s,n]]),y(u("button",{class:"btn btn-outline-light bg-dark text-light btn-sm pl-1 pr-2 emboss",disabled:i(B).isPlaying},[be],8,["disabled"]),[[s,t]])]),i(B).isPlaying?b("",!0):(l(),r("button",{key:0,class:"btn btn-primary mr-2 emboss ml-auto",onClick:a[2]||(a[2]=e=>i(B).play()),style:{width:"63px"}},[ge])),i(B).isPlaying?(l(),r("button",{key:1,class:"btn btn-light mr-2 emboss ml-auto",onClick:a[3]||(a[3]=e=>i(B).stop()),style:{width:"63px"}},[he])):b("",!0)])])}}},ve={key:0,class:"alert alert-info"},_e=e({}),we=e=>{_e[e]?delete _e[e]:_e[e]=!0},Te={expose:[],props:{infoId:String},setup(e){const{infoId:t}=e,n=g((()=>null!=_e[t]));return(e,t)=>i(n)?(l(),r("div",ve,[s(e.$slots,"default")])):b("",!0)}},ke=u("i",{class:"fa fa-info-circle"},null,-1),Me={expose:[],props:{info:String},setup(e){const{info:t}=e;return(e,n)=>(l(),r("span",{class:"text-info pl-1 pointer",onClick:n[1]||(n[1]=e=>i(we)(t))},[ke]))}},Ae={class:"text-center mb-3"},Se=d("currency"),Pe=d("monnaie"),Ce=d("EN_info-currency"),Ue=d("FR_info-currency"),Ee={class:"input-group mb-1"},Ne={class:"input-group-text",for:"currencyUPerTime"},De=d("Ü per "),je=d("Ü par "),Oe={class:"input-group-text pr-1"},Xe=d("Ü "),qe=d("EN_info-currency-uPerTime"),Fe=d("FR_info-currency-uPerTime"),Le={class:"input-group mb-1"},Ye={class:"input-group-text",for:"currencyRevaluationTime"},Ie=d("revaluation (r)"),Be=d("réévaluation (r)"),Re={class:"input-group-text pr-1"},Ve=d("EN_info-currency-revaluationTime"),$e=d("FR_info-currency-revaluationTime"),ze={class:"input-group mb-1"},Ke=u("option",{value:"melt"}," Ü(t-r) = ( 1 - ",-1),Ge=u("option",{value:"grew"}," Ü(t+r) = ( 1 + ",-1),Je={class:"form-control px-1 text-left",style:{"flex-grow":"0.71"}},Qe=d(" ) Ü(t) "),We=u("br",null,null,-1),Ze=u("br",null,null,-1),He=u("br",null,null,-1),et={key:0,class:"d-flex align-items-start flex-wrap mb-1",style:{"justify-content":"space-evenly"}},tt=d("ündo!"),nt=d("annüler!"),at=d("üpdate!"),lt=d("valïder!"),rt={class:"input-group mb-1 mt-3"},st=d("more data"),ot=d("plus de données"),ut=u("i",{class:"fa fa-plus-square position-absolute end-0 mr-3 pt-1"},null,-1),it=d("less data"),ct=d("moins de données"),dt=u("i",{class:"fa fa-minus-square position-absolute end-0 mr-3 pt-1"},null,-1),mt={key:1},pt={class:"input-group mb-1"},ft={class:"input-group-text",for:"currencyMass"},yt=d("monetary mass (M)"),bt=d("masse monétaire (M)"),gt=u("span",{class:"input-group-text"},"Ü",-1),ht={class:"input-group mb-1"},xt={class:"input-group-text",for:"currencyNbMembers"},vt=d("Üman accounts (N)"),_t=d("comptes Ümains (N)"),wt={class:"input-group mb-1"},Tt={class:"input-group-text",for:"currencyAvg"},kt=d("average"),Mt=d("moyenne"),At={class:"input-group-text"},St=d("Ü / Üman"),Pt=d("Ü / Ümain"),Ct={class:"input-group mb-1"},Ut={class:"input-group-text",for:"currencyQuantitative"},Et=d("quantitative"),Nt=d("quantitatif"),Dt={class:"input-group-text"},jt=d("Ü / Ü(0)"),Ot=d("Ü / Ü(0)"),Xt={class:"input-group mb-1"},qt={class:"input-group-text",for:"currencyLastGrew"},Ft=d("last growth"),Lt=d("dernière croissance"),Yt=u("span",{class:"input-group-text"},"%",-1),It={class:"input-group mb-1"},Bt={class:"input-group-text",for:"currencyLastMelt"},Rt=d("distribution (D)"),Vt=d("distribution (D)"),$t=u("span",{class:"input-group-text"},"%",-1),zt={expose:[],setup(t){const n=o(!1),s=e({expression:"",mode:"melt",uPerTime:1,revaluationTime:0}),m=g((()=>0==B.currency.lastMelt?0:(1/(1/(B.currency.lastMelt/100)-1)*100).toFixed(2))),p=g((()=>!(!B||!B.currency)&&(B.currency.expression!=s.expression||B.currency.mode!=s.mode||B.currency.uPerTime!=s.uPerTime||B.currency.revaluationTime!=s.revaluationTime)));return h((()=>[B.currency.expression,B.currency.mode,B.currency.uPerTime,B.currency.revaluationTime]),(()=>{Object.assign(s,B.currency)})),a((()=>{Object.assign(s,B.currency)})),(e,t)=>{return l(),r("div",null,[u("h4",Ae,[u(i(Q),null,{default:c((()=>[Se])),_:1}),u(i(J),null,{default:c((()=>[Pe])),_:1}),u(Me,{class:"position-absolute",info:"info-currency"})]),u(Te,{infoId:"info-currency"},{default:c((()=>[u(i(Q),null,{default:c((()=>[Ce])),_:1}),u(i(J),null,{default:c((()=>[Ue])),_:1})])),_:1}),u("form",null,[u("div",Ee,[u("label",Ne,[u(i(Q),null,{default:c((()=>[De])),_:1}),u(i(J),null,{default:c((()=>[je])),_:1}),d(" "+f(i(W)(i(B).creationPeriod)),1)]),y(u("input",{id:"currencyUPerTime","onUpdate:modelValue":t[1]||(t[1]=e=>i(s).uPerTime=e),type:"number",min:"0",max:"1000",step:"1",class:["form-control text-right",{"bg-primary":i(s).uPerTime!=i(B).currency.uPerTime}],disabled:i(B).isPlaying},null,10,["disabled"]),[[x,i(s).uPerTime]]),u("span",Oe,[Xe,u(Me,{class:"px-0 ml-2",info:"info-currency-uPerTime"})])]),u(Te,{infoId:"info-currency-uPerTime"},{default:c((()=>[u(i(Q),null,{default:c((()=>[qe])),_:1}),u(i(J),null,{default:c((()=>[Fe])),_:1})])),_:1}),u("div",Le,[u("label",Ye,[u(i(Q),null,{default:c((()=>[Ie])),_:1}),u(i(J),null,{default:c((()=>[Be])),_:1})]),y(u("input",{id:"currencyRevaluationTime","onUpdate:modelValue":t[2]||(t[2]=e=>i(s).revaluationTime=e),type:"number",min:"1",max:"400",step:"1",class:["form-control text-right",{"bg-primary":i(s).revaluationTime!=i(B).currency.revaluationTime}],disabled:i(B).isPlaying},null,10,["disabled"]),[[x,i(s).revaluationTime]]),u("span",Re,[d(f(i(W)(i(B).creationPeriod,i(s).revaluationTime))+" ",1),u(Me,{class:"px-0 ml-2",info:"info-currency-revaluationTime"})])]),u(Te,{infoId:"info-currency-revaluationTime"},{default:c((()=>[u(i(Q),null,{default:c((()=>[Ve])),_:1}),u(i(J),null,{default:c((()=>[$e])),_:1})])),_:1}),u("div",ze,[y(u("select",{"onUpdate:modelValue":t[3]||(t[3]=e=>i(s).mode=e),id:"currencyMode",class:["form-control select-text-center",{"bg-primary":i(s).mode!=i(B).currency.mode}],disabled:i(B).isPlaying},[Ke,Ge],10,["disabled"]),[[v,i(s).mode]]),y(u("input",{id:"currencyExpression","onUpdate:modelValue":t[4]||(t[4]=e=>i(s).expression=e),type:"text",class:["form-control text-right",{"bg-primary":i(s).expression!=i(B).currency.expression}],disabled:i(B).isPlaying},null,10,["disabled"]),[[x,i(s).expression]]),u("span",Je,[Qe,u(Me,{class:"px-0 ml-2",info:"info-currency-expression"})])]),u(Te,{infoId:"info-currency-expression"},{default:c((()=>[u("a",{href:"#",class:"info-link fa-play-circle",onClick:t[5]||(t[5]=_((e=>{i(s).expression="0.1",i(s).mode="grew"}),["prevent"]))},"Fb(Ü): Ü(t+r) = ( 1 + 0.1) Ü(t)"),We,u("a",{href:"#",class:"info-link fa-play-circle",onClick:t[6]||(t[6]=_((e=>{i(s).expression="0.1^2 * M/N",i(s).mode="grew"}),["prevent"]))},"Fg(Ü): Ü(t+r) = ( 1 + 0.1^2 * M/N) Ü(t)"),Ze,u("a",{href:"#",class:"info-link fa-play-circle",onClick:t[7]||(t[7]=_((e=>{i(s).expression="0.1",i(s).mode="melt"}),["prevent"]))},"Ff(Ü): Ü(t-r) = ( 1 - 0.1) Ü(t)"),He])),_:1}),i(p)?(l(),r("div",et,[u("button",{type:"button",class:"btn btn-secondary mr-auto",onClick:t[8]||(t[8]=e=>Object.assign(i(s),i(B).currency))},[u(i(Q),null,{default:c((()=>[tt])),_:1}),u(i(J),null,{default:c((()=>[nt])),_:1})]),u("button",{type:"button",class:"btn btn-primary",onClick:t[9]||(t[9]=e=>(()=>{const{expression:e,mode:t,uPerTime:n,revaluationTime:a}=s;B.updateCurrency({expression:e,mode:t,uPerTime:n,revaluationTime:a})})())},[u(i(Q),null,{default:c((()=>[at])),_:1}),u(i(J),null,{default:c((()=>[lt])),_:1})])])):b("",!0),u("div",rt,[n.value?(l(),r("button",{key:1,type:"button",class:"btn btn-secondary form-control text-left",onClick:t[11]||(t[11]=e=>n.value=!1)},[u(i(Q),null,{default:c((()=>[it])),_:1}),u(i(J),null,{default:c((()=>[ct])),_:1}),dt])):(l(),r("button",{key:0,type:"button",class:"btn btn-secondary form-control text-left",onClick:t[10]||(t[10]=e=>n.value=!0)},[u(i(Q),null,{default:c((()=>[st])),_:1}),u(i(J),null,{default:c((()=>[ot])),_:1}),ut]))]),n.value?(l(),r("div",mt,[u("div",pt,[u("label",ft,[u(i(Q),null,{default:c((()=>[yt])),_:1}),u(i(J),null,{default:c((()=>[bt])),_:1})]),u("input",{id:"currencyMass",value:i(B).currencyWithoutDecimal(i(B).currency.monetaryMass),type:"text",class:"form-control text-right",disabled:""},null,8,["value"]),gt]),u("div",ht,[u("label",xt,[u(i(Q),null,{default:c((()=>[vt])),_:1}),u(i(J),null,{default:c((()=>[_t])),_:1})]),u("input",{id:"currencyNbMembers",value:i(B).currency.nbMembers,type:"text",class:"form-control text-right",disabled:""},null,8,["value"])]),u("div",wt,[u("label",Tt,[u(i(Q),null,{default:c((()=>[kt])),_:1}),u(i(J),null,{default:c((()=>[Mt])),_:1})]),u("input",{id:"currencyAvg",value:i(B).currencyDecimal(i(B).currency.average),type:"text",class:"form-control text-right",disabled:""},null,8,["value"]),u("span",At,[u(i(Q),null,{default:c((()=>[St])),_:1}),u(i(J),null,{default:c((()=>[Pt])),_:1})])]),u("div",Ct,[u("label",Ut,[u(i(Q),null,{default:c((()=>[Et])),_:1}),u(i(J),null,{default:c((()=>[Nt])),_:1})]),u("input",{id:"currencyQuantitative",value:(a=i(B).currency.quantitative,a<1e6?a.toFixed(2):a.toExponential(3)),type:"text",class:"form-control text-right",disabled:""},null,8,["value"]),u("span",Dt,[u(i(Q),null,{default:c((()=>[jt])),_:1}),u(i(J),null,{default:c((()=>[Ot])),_:1})])]),u("div",Xt,[u("label",qt,[u(i(Q),null,{default:c((()=>[Ft])),_:1}),u(i(J),null,{default:c((()=>[Lt])),_:1})]),u("input",{id:"currencyLastGrew",value:i(m),type:"text",class:"form-control text-right",disabled:""},null,8,["value"]),Yt]),u("div",It,[u("label",Bt,[u(i(Q),null,{default:c((()=>[Rt])),_:1}),u(i(J),null,{default:c((()=>[Vt])),_:1})]),u("input",{id:"currencyLastMelt",value:i(B).currency.lastMelt,type:"text",class:"form-control text-right",disabled:""},null,8,["value"]),$t])])):b("",!0)])]);var a}}},Kt={class:"text-center mb-3"},Gt=d("transaction"),Jt=d("transaction"),Qt=d("EN_info-transaction"),Wt=d("FR_info-transaction"),Zt={class:"text-center"},Ht={class:"input-group mb-1"},en={class:"input-group-text",for:"txFrom"},tn=d(" fröm "),nn=d(" de "),an={class:"input-group-text",for:"txTo"},ln=d(" tö "),rn=d(" à "),sn=u("option",{disabled:"",value:""},"select öne",-1),on=u("option",{disabled:"",value:""},"qüi",-1),un={class:"input-group mb-1"},cn=u("span",{class:"input-group-text"},"Ü",-1),dn={expose:[],setup(t){const n=e({from:"fÜne",to:"",value:1}),a=g((()=>B.accounts)),s=g((()=>B.accounts));return(e,t)=>(l(),r("div",null,[u("h4",Kt,[u(i(Q),null,{default:c((()=>[Gt])),_:1}),u(i(J),null,{default:c((()=>[Jt])),_:1}),u(Me,{class:"position-absolute",info:"info-transaction"})]),u(Te,{infoId:"info-transaction"},{default:c((()=>[u(i(Q),null,{default:c((()=>[Qt])),_:1}),u(i(J),null,{default:c((()=>[Wt])),_:1})])),_:1}),u("form",Zt,[u("div",Ht,[u("label",en,[u(i(Q),null,{default:c((()=>[tn])),_:1}),u(i(J),null,{default:c((()=>[nn])),_:1})]),y(u("select",{"onUpdate:modelValue":t[1]||(t[1]=e=>i(n).from=e),id:"txFrom",class:"form-control select-text-center"},[(l(!0),r(w,null,T(i(a),(e=>(l(),r("option",{value:e.name,key:e.name},f(e.name),9,["value"])))),128))],512),[[v,i(n).from]]),u("label",an,[u(i(Q),null,{default:c((()=>[ln])),_:1}),u(i(J),null,{default:c((()=>[rn])),_:1})]),y(u("select",{"onUpdate:modelValue":t[2]||(t[2]=e=>i(n).to=e),id:"txTo",class:"form-control select-text-center"},[u(i(Q),null,{default:c((()=>[sn])),_:1}),u(i(J),null,{default:c((()=>[on])),_:1}),(l(!0),r(w,null,T(i(s),(e=>(l(),r("option",{value:e.name,key:e.name},f(e.name),9,["value"])))),128))],512),[[v,i(n).to]])]),u("div",un,[y(u("input",{"onUpdate:modelValue":t[3]||(t[3]=e=>i(n).value=e),type:"number",step:"any",class:"form-control text-right"},null,512),[[x,i(n).value]]),cn,u("button",{type:"button",class:"btn btn-primary",onClick:t[4]||(t[4]=e=>i(B).doTx(i(n)))},"ök!")])])]))}};function mn(e){return parseInt(e,10)}function pn(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function fn(e,t,n){var a=e.x-t.x,l=e.y-t.y,r=Math.sqrt(a*a+l*l),s=a/r,o=l/r;return{x:t.x+s*n,y:t.y+o*n}}function yn(e,t){var n=e.shift();return"M"+n.x+" "+n.y+e.map((function(a,l){var r,s,o,u=e[l+1],i=e[l-1]||n,c=u&&(s=a,o=i,mn((r=u).x+o.x)===mn(2*s.x)&&mn(r.y+o.y)===mn(2*s.y));if(!u||c)return"L"+a.x+" "+a.y;var d=Math.min(pn(i,a),pn(u,a)),m=d/2<t?d/2:t,p=fn(i,a,m),f=fn(u,a,m);return"L"+p.x+" "+p.y+"S"+a.x+" "+a.y+" "+f.x+" "+f.y})).join("")}var bn={props:["smooth","data","boundary","radius","id","max","min","color","dash"],render:function(){var e,t=this,n=t.data,a=t.smooth,l=t.boundary,r=t.radius,s=t.id,o=t.max,u=t.min,i=t.dash,c=yn(function(e,t,n){var a=t.minX,l=t.minY,r=t.maxX,s=t.maxY,o=n.max,u=n.min,i=e.map((function(e){return e&&!isNaN(e)?e:0})),c=Math.min.apply(Math,i.concat([u]))-.001,d=(r-a)/(i.length-1),m=(s-l)/(Math.max.apply(Math,i.concat([o]))+.001-c);return i.map((function(e,t){return{x:t*d+a,y:s-(e-c)*m+1e-5*+(t===i.length-1)-1e-5*+(0===t)}}))}(n,l,{max:o,min:u}),a?r:0);return e=this.color?this.color:"url(#"+s+")",k("path",{d:c,fill:"none",stroke:e,"stroke-dasharray":i})}},gn={props:["boundary","max","min","xUnit","yUnit"],render:function(){var e=this.boundary;return[k("text",{x:e.minX,y:e.minY-3,fill:"#EEEEEEBB","font-size":"0.5em"},Math.round(this.max/1e3)+" "+this.yUnit),k("text",{x:e.minX,y:e.maxY+10,fill:"#EEEEEEBB","font-size":"0.5em"},this.min),k("text",{x:e.maxX,y:e.maxY+10,width:100,fill:"#EEEEEEBB",style:{"text-anchor":"end"},"font-size":"0.5em"},this.xUnit),k("line",{x1:e.minX,y1:e.minY,x2:e.maxX,y2:e.minY,stroke:"#EEEEEEBB"}),k("line",{x1:e.minX,y1:e.maxY,x2:e.maxX,y2:e.maxY,stroke:"#EEEEEEBB"})]}},hn={props:["gradient","gradientDirection","id"],render:function(){var e=this,t=e.gradient,n=e.gradientDirection,a=e.id,l=t.length-1||1,r=t.slice().reverse().map((function(e,t){return k("stop",{offset:t/l,"stop-color":e})}));return k("defs",[k("linearGradient",{id:a,x1:+("left"===n),y1:+("top"===n),x2:+("right"===n),y2:+("bottom"===n)},r)])}},xn={name:"Trend",props:{data:{type:Array,required:!0},autoDraw:Boolean,autoDrawDuration:{type:Number,default:2e3},autoDrawEasing:{type:String,default:"ease"},gradient:{type:Array,default:function(){return["#000"]}},gradientDirection:{type:String,default:"top"},max:{type:Number,default:-1/0},minY:{type:Number,default:1/0},minX:{type:Number,default:0},height:Number,width:Number,padding:{type:Number,default:8},radius:{type:Number,default:10},smooth:Boolean,xUnit:{type:String,default:""},yUnit:{type:String,default:""}},watch:{data:{immediate:!0,handler:function(e){var t=this;this.$nextTick((function(){if(!t.$isServer&&t.$refs.path&&t.autoDraw){var e=t.$refs.path.$el,n=e.getTotalLength();e.style.transition="none",e.style.strokeDasharray=n+" "+n,e.style.strokeDashoffset=Math.abs(n-(t.lastLength||0)),e.getBoundingClientRect(),e.style.transition="stroke-dashoffset "+t.autoDrawDuration+"ms "+t.autoDrawEasing,e.style.strokeDashoffset=0,t.lastLength=n}}))}}},render:function(){if(this.data&&!(this.data.length<2)){var e=this.width,t=this.height,n=this.padding,a=e||300,l=t||150,r={minX:n,minY:n,maxX:a-n,maxY:l-n};return k("svg",{width:e||"100%",height:t||"25%",viewBox:"0 0 "+a+" "+l},[k(hn,{gradient:this.gradient,gradientDirection:this.gradientDirection,id:"stats"}),k(gn,{boundary:r,max:Math.max.apply(Math,this.data.concat([this.max])),min:this.minX,xUnit:this.xUnit,yUnit:this.yUnit}),k(bn,{smooth:this.smooth,data:this.data,boundary:r,radius:this.radius,max:this.max,min:this.minY,id:"stats",ref:"path",dash:"0"})])}}},vn={name:"Trends",props:{data:{type:Array,required:!0},colors:{type:Array,required:!0},minY:{type:Number,default:1/0},minX:{type:Number,default:0},height:Number,width:Number,padding:{type:Number,default:8},radius:{type:Number,default:10},smooth:Boolean,xUnit:{type:String,default:""},yUnit:{type:String,default:""}},data:()=>({pt:null,boundary:null,maxX:0,maxY:0}),methods:{getCoordinates(e,t){this.pt.x=e,this.pt.y=t;const n={x:0,y:0};if(this.maxX<=0)return n;const a=this.pt.matrixTransform(this.$el.getScreenCTM().inverse());return a.x<this.boundary.minX?n.x=0:a.x>this.boundary.maxX?n.x=this.maxX:n.x=Math.round((this.maxX-this.minX)*(a.x-this.boundary.minX)/(this.boundary.maxX-this.boundary.minX)),a.y<this.boundary.minY?n.y=this.maxY:a.y>this.boundary.maxY?n.y=0:n.y=Math.round((this.maxY-this.minY)*(this.boundary.maxY-a.y)/(this.boundary.maxY-this.boundary.minY)),n}},mounted(){this.pt=this.$el.createSVGPoint()},render:function(){var e=this.width,t=this.height,n=this.padding,a=e||300,l=t||200;this.boundary={minX:n,minY:n,maxX:a-n,maxY:l-n};var r=1e3;for(let o=0;o<this.data.length;o++){const e=this.data[o];if(e&&e.length>1)for(let t=0;t<e.length;t++)r=Math.max(r,e[t])}this.maxY=r,this.data.length>=1?this.maxX=this.data[0].length-1:this.maxX=0;var s=[];for(let o=0;o<this.data.length;o++){const e=this.data[o];e&&e.length>1&&s.push(k(bn,{smooth:this.smooth,data:e,boundary:this.boundary,radius:this.radius,max:r,min:this.minY,id:"stats",ref:"path"+o,color:this.colors[o],dash:o==this.data.length-1?"2 2":"0"}))}return k("svg",{width:e||"100%",height:t||"25%",viewBox:"0 0 "+a+" "+l},[s,k(gn,{boundary:this.boundary,max:r,min:this.minX,xUnit:this.xUnit,yUnit:this.yUnit})])}};const _n={class:"text-center mb-3"},wn=d("account"),Tn=d("compte"),kn=d("EN_info-account"),Mn=d("FR_info-account"),An={class:"mt-3 mb-3"},Sn={class:"text-center mb-6"},Pn={class:"mx-auto input-group",style:{"max-width":"300px"}},Cn={disabled:"",value:null},Un=d("whö"),En=d("qüi"),Nn={key:0},Dn={class:"display-3 text-center"},jn={class:"align-baseline",style:{"font-size":"50%"}},On=u("small",null," Ü",-1),Xn={key:0,class:"display-5 text-center"},qn=d("bank"),Fn=d("banque"),Ln={key:1,class:"display-5 text-center"},Yn=d("wallet"),In=d("compte simple"),Bn={key:2,class:"display-5 text-center"},Rn=d("Üman"),Vn=d("Ümain"),$n={class:"text-center mt-4"},zn=d("transaction"),Kn=d("transaction"),Gn={class:"mb-4 justify-content-center mx-auto",style:{"max-width":"500px"}},Jn={class:"input-group mb-1"},Qn=u("small",{class:"input-group-text"},"Ü",-1),Wn={class:"input-group-text",for:"accountTxTo"},Zn=d(" tö "),Hn=d(" à "),ea={disabled:"",value:""},ta=d("someöne"),na=d("qüi"),aa={class:"input-group"},la={class:"input-group-text",for:"txMessage"},ra=d("message"),sa=d("message"),oa={class:"text-center mt-4"},ua=d("stats"),ia=d("stats"),ca={class:"text-center mt-4"},da=d("diary"),ma=d("journal"),pa={class:"list-group list-group-flush pointer mx-auto",style:{"max-width":"450px"}},fa={key:0},ya={style:{"min-width":"85px"},class:"badge bg-light text-dark text-right"},ba={style:{width:"70px"},class:"d-inline-block text-center"},ga=d(" to "),ha=d(" à "),xa={key:1},va={style:{"min-width":"85px"},class:"badge bg-primary text-right"},_a={style:{width:"70px"},class:"d-inline-block text-center"},wa=d(" from "),Ta=d(" de "),ka={class:"text-right"},Ma={class:"fw-bold"},Aa={expose:[],setup(t){const n=e({account:null,accounts:g((()=>B.accounts.filter((e=>"bank"!=e.role)))),otherAccounts:g((()=>n.account?B.accounts.filter((e=>"bank"!=e.role&&e.name!=n.account.name)):null)),stats:[],beginStat:0,transactions:[],tx:{from:"",to:"",message:"",value:1}}),s=()=>{n.account&&(n.transactions=B.getAccountTx(n.account.name,10).reverse(),n.stats=B.getAccountStats(n.account.name),n.beginStat=0==B.currency.elapsedTime?0:B.currency.elapsedTime-(n.stats.length-1))};h((()=>n.account),(()=>{s()})),h((()=>B.currency),s,{deep:!0});const o=e=>B.currencyDecimal(e).slice(-2),d=e=>{if(!e)return"";if("!Ucreation"==e)return K({en:"> u crëate Ü!",fr:"> crëation de Ü !"});if(0==e.indexOf("!revaluation%")){let t=e.split("%")[1];return K({en:"> "+t+"% of Ü are redistributed",fr:"> "+t+"% des Ü sont redistribués"})}return e?"> "+e:""},m=e=>{if(e>=B.currency.elapsedTime)switch(B.creationPeriod){case"day":return K({en:"today",fr:"aujourd'hui"});case"month":return K({en:"this month",fr:"ce mois-ci"});case"year":return K({en:"this year",fr:"cette année"})}const t=B.currency.elapsedTime-e,n=W(B.creationPeriod,t);return K({en:t+" "+n+" ago",fr:"il y a "+t+" "+n})};return a((()=>{if(!n.account){n.accounts.length>1&&(n.account=n.accounts[0])}})),(e,t)=>{return l(),r("div",null,[u("h4",_n,[u(i(Q),null,{default:c((()=>[wn])),_:1}),u(i(J),null,{default:c((()=>[Tn])),_:1}),u(Me,{class:"position-absolute",info:"info-account"})]),u(Te,{infoId:"info-account"},{default:c((()=>[u(i(Q),null,{default:c((()=>[kn])),_:1}),u(i(J),null,{default:c((()=>[Mn])),_:1})])),_:1}),u("div",An,[u("h3",Sn,[u("div",Pn,[y(u("select",{"onUpdate:modelValue":t[1]||(t[1]=e=>i(n).account=e),class:"text-center mx-auto form-control select-text-center",style:{"font-size":"1.3em"}},[u("option",Cn,[u(i(Q),null,{default:c((()=>[Un])),_:1}),u(i(J),null,{default:c((()=>[En])),_:1})]),(l(!0),r(w,null,T(i(n).accounts,(e=>(l(),r("option",{value:e,key:e.name},[u("strong",null,f(e.name),1)],8,["value"])))),128))],512),[[v,i(n).account]])])]),i(n).account?(l(),r("div",Nn,[u("div",Dn,[u("span",null,f((a=i(n).account.balance,B.currencyDecimal(a).slice(0,-3))),1),u("small",jn,"."+f(o(i(n).account.balance)),1),On]),"bank"==i(n).account.role?(l(),r("p",Xn,[u(i(Q),null,{default:c((()=>[qn])),_:1}),u(i(J),null,{default:c((()=>[Fn])),_:1})])):"wallet"==i(n).account.role?(l(),r("p",Ln,[u(i(Q),null,{default:c((()=>[Yn])),_:1}),u(i(J),null,{default:c((()=>[In])),_:1})])):(l(),r("p",Bn,[u(i(Q),null,{default:c((()=>[Rn])),_:1}),u(i(J),null,{default:c((()=>[Vn])),_:1})])),u("h4",$n,[u(i(Q),null,{default:c((()=>[zn])),_:1}),u(i(J),null,{default:c((()=>[Kn])),_:1})]),u("form",Gn,[u("div",null,[u("div",Jn,[y(u("input",{"onUpdate:modelValue":t[2]||(t[2]=e=>i(n).tx.value=e),type:"number",max:Math.round(i(n).account.balance/100),step:"any",min:"0",class:"form-control text-right"},null,8,["max"]),[[x,i(n).tx.value]]),Qn,u("label",Wn,[u(i(Q),null,{default:c((()=>[Zn])),_:1}),u(i(J),null,{default:c((()=>[Hn])),_:1})]),y(u("select",{"onUpdate:modelValue":t[3]||(t[3]=e=>i(n).tx.to=e),id:"accountTxTo",class:"form-control p-1 select-text-center"},[u("option",ea,[u(i(Q),null,{default:c((()=>[ta])),_:1}),u(i(J),null,{default:c((()=>[na])),_:1})]),(l(!0),r(w,null,T(i(n).otherAccounts,(e=>(l(),r("option",{value:e.name,key:e.name},[u("strong",null,f(e.name),1)],8,["value"])))),128))],512),[[v,i(n).tx.to]]),u("button",{type:"button",class:"btn btn-primary",onClick:t[4]||(t[4]=e=>(n.tx.from=n.account.name,B.doTx(n.tx)&&(n.tx.message=""),void s()))},"ök!")]),u("div",aa,[u("label",la,[u(i(Q),null,{default:c((()=>[ra])),_:1}),u(i(J),null,{default:c((()=>[sa])),_:1})]),y(u("input",{"onUpdate:modelValue":t[5]||(t[5]=e=>i(n).tx.message=e),type:"text",maxlength:"32",class:"form-control",id:"txMessage"},null,512),[[x,i(n).tx.message]])])])]),u("h4",oa,[u(i(Q),null,{default:c((()=>[ua])),_:1}),u(i(J),null,{default:c((()=>[ia])),_:1})]),u(i(xn),{class:"p-2 stats",data:i(n).stats,gradientDirection:"top",gradient:["#f560a2","#e83283","#bd125e"],padding:10,radius:8,"stroke-width":1.5,"stroke-linecap":"butt",minX:i(n).beginStat,minY:0,max:1e3,xUnit:i(B).currency.elapsedTime+" "+i(W)(i(B).creationPeriod,i(B).currency.elapsedTime),yUnit:"Ü","auto-draw":"",smooth:""},null,8,["data","stroke-width","minX","xUnit"]),u("h4",ca,[u(i(Q),null,{default:c((()=>[da])),_:1}),u(i(J),null,{default:c((()=>[ma])),_:1})]),u("ul",pa,[(l(!0),r(w,null,T(i(n).transactions,(e=>(l(),r("li",{key:e.id,class:"list-group-item list-group-item-action p-2"},[u("div",{class:"d-flex w-100 justify-content-between",onClick:t=>i(n).tx.to=e.from==i(n).account.name?e.to:e.from},[u("div",null,[e.from==i(n).account.name?(l(),r("h5",fa,[u("span",ya,f(i(B).currencyDecimal(e.value))+" Ü",1),u("span",ba,[u(i(Q),null,{default:c((()=>[ga])),_:1}),u(i(J),null,{default:c((()=>[ha])),_:1})]),u("strong",null,[u("span",null,f(e.to),1)])])):(l(),r("h5",xa,[u("span",va,f(i(B).currencyDecimal(e.value))+" Ü",1),u("span",_a,[u(i(Q),null,{default:c((()=>[wa])),_:1}),u(i(J),null,{default:c((()=>[Ta])),_:1})]),u("strong",null,[u("span",null,f(e.from),1)])]))]),u("small",ka,f(m(e.time)),1)],8,["onClick"]),u("span",Ma,f(d(e.message)),1)])))),128))])])):b("",!0)])]);var a}}},Sa={class:"text-center mb-3"},Pa=d("accounts"),Ca=d("comptes"),Ua=d("EN_info-accounts"),Ea=d("FR_info-accounts"),Na={class:"table table-hover"},Da=d("stats"),ja=d("stats"),Oa=d("näme"),Xa=d("nöm"),qa=d("röle"),Fa=d("röle"),La=d("balance"),Ya=d("solde"),Ia=u("th",null,null,-1),Ba={class:"text-center"},Ra=d("Üman"),Va=d("Ümain"),$a=d("wället"),za=d("sïmple"),Ka={key:2,class:"btn btn-sm btn-danger fw-bold emboss role",disabled:""},Ga=d("bänk"),Ja=d("bänque"),Qa={class:"text-right"},Wa={key:0},Za=u("small",null," Ü ",-1),Ha={class:"text-right"},el=d("reset"),tl=d("raz"),nl=u("i",{class:"fa fa-trash"},null,-1),al={class:"input-group"},ll={value:"human"},rl=d("Üman"),sl=d("Ümain"),ol={value:"wallet"},ul=d("wället"),il=d("sïmple"),cl=d("nëw!"),dl=d("noüveau!"),ml={expose:[],setup(t){const n=e({onlySelected:!1,sortKey:"name",sortOrder:1,newAccount:{name:"",role:"human"}}),a=g((()=>{let e=B.accounts.filter((e=>"bank"!=e.role));return n.onlySelected&&(e=e.filter((e=>B.isSelected(e)))),e.sort(((e,t)=>{let a=e[n.sortKey],l=t[n.sortKey];return(a===l?0:a>l?1:-1)*n.sortOrder}))})),s=e=>{e==n.sortKey&&(n.sortOrder=-n.sortOrder),n.sortKey=e},o=e=>{let t="human"==e.role?"wallet":"human";B.updateAccount(e,{role:t})},m=e=>{const t=B.selectedAccounts.get(e.name);return null==t?"#444444":t.color};return(e,t)=>(l(),r("div",null,[u("h4",Sa,[u(i(Q),null,{default:c((()=>[Pa])),_:1}),u(i(J),null,{default:c((()=>[Ca])),_:1}),u(Me,{class:"position-absolute",info:"info-accounts"})]),u(Te,{infoId:"info-accounts"},{default:c((()=>[u(i(Q),null,{default:c((()=>[Ua])),_:1}),u(i(J),null,{default:c((()=>[Ea])),_:1})])),_:1}),u("table",Na,[u("thead",null,[u("tr",null,[u("th",{onClick:t[1]||(t[1]=e=>i(n).onlySelected=!i(n).onlySelected),class:[{"bg-primary":i(n).onlySelected},"pointer"],style:{width:"25px"}},[u(i(Q),null,{default:c((()=>[Da])),_:1}),u(i(J),null,{default:c((()=>[ja])),_:1})],2),u("th",{onClick:t[2]||(t[2]=e=>s("name")),class:"pointer"},[u(i(Q),null,{default:c((()=>[Oa])),_:1}),u(i(J),null,{default:c((()=>[Xa])),_:1})]),u("th",{onClick:t[3]||(t[3]=e=>s("role")),class:"text-center pointer"},[u(i(Q),null,{default:c((()=>[qa])),_:1}),u(i(J),null,{default:c((()=>[Fa])),_:1})]),u("th",{onClick:t[4]||(t[4]=e=>s("balance")),class:"text-right pointer"},[u(i(Q),null,{default:c((()=>[La])),_:1}),u(i(J),null,{default:c((()=>[Ya])),_:1})]),Ia])]),u("tbody",null,[(l(!0),r(w,null,T(i(a),(e=>(l(),r("tr",{key:e.name},[u("td",{onClick:t=>i(B).select(e),class:"pointer"},[u("div",{style:[{"background-color":m(e)},{width:"25px",height:"25px"}],class:"icon"},null,4)],8,["onClick"]),u("td",{onClick:t=>i(B).select(e),class:"pointer"},f(e.name),9,["onClick"]),u("td",Ba,["human"==e.role?(l(),r("button",{key:0,class:"btn btn-sm btn-primary fw-bold emboss role",onClick:t=>o(e)},[u(i(Q),null,{default:c((()=>[Ra])),_:1}),u(i(J),null,{default:c((()=>[Va])),_:1})],8,["onClick"])):"wallet"==e.role?(l(),r("button",{key:1,class:"btn btn-sm btn-secondary fw-bold emboss role",onClick:t=>o(e)},[u(i(Q),null,{default:c((()=>[$a])),_:1}),u(i(J),null,{default:c((()=>[za])),_:1})],8,["onClick"])):(l(),r("button",Ka,[u(i(Q),null,{default:c((()=>[Ga])),_:1}),u(i(J),null,{default:c((()=>[Ja])),_:1})]))]),u("td",Qa,["bank"!=e.role?(l(),r("strong",Wa,[d(f(i(B).currencyDecimal(e.balance)),1),Za])):b("",!0)]),u("td",Ha,["bank"!=e.role?(l(),r("a",{key:0,href:"#",onClick:_((t=>(e=>{B.updateAccount(e,{balance:0})})(e)),["stop","prevent"]),class:"mr-2"},[u(i(Q),null,{default:c((()=>[el])),_:1}),u(i(J),null,{default:c((()=>[tl])),_:1})],8,["onClick"])):b("",!0),e.name!=i(B).name?(l(),r("a",{key:1,href:"#",onClick:_((t=>(e=>{const t=e.name;confirm(K({fr:"êtes vous sûr de supprimer "+t+" ?",en:"Are you sure to delete "+t+"?"}))&&B.deleteAccount(e)})(e)),["stop","prevent"]),class:"text-warning"},[nl],8,["onClick"])):b("",!0)])])))),128))])]),u("div",al,[y(u("input",{placeholder:i(K)({en:"näme",fr:"nöm"}),"onUpdate:modelValue":t[5]||(t[5]=e=>i(n).newAccount.name=e),type:"text",class:"form-control",id:"accountName",maxlength:"16"},null,8,["placeholder"]),[[x,i(n).newAccount.name]]),y(u("select",{"onUpdate:modelValue":t[6]||(t[6]=e=>i(n).newAccount.role=e),class:"form-control",style:{"max-width":"100px"}},[u("option",ll,[u(i(Q),null,{default:c((()=>[rl])),_:1}),u(i(J),null,{default:c((()=>[sl])),_:1})]),u("option",ol,[u(i(Q),null,{default:c((()=>[ul])),_:1}),u(i(J),null,{default:c((()=>[il])),_:1})])],512),[[v,i(n).newAccount.role]]),u("button",{type:"button",disabled:3>i(n).newAccount.name.length||i(B).accounts.some((e=>e.name==i(n).newAccount.name)),class:"btn btn-primary",onClick:t[7]||(t[7]=e=>(n.newAccount.name=n.newAccount.name.trim(),void B.createAccount(n.newAccount)))},[u(i(Q),null,{default:c((()=>[cl])),_:1}),u(i(J),null,{default:c((()=>[dl])),_:1})],8,["disabled"])])]))}},pl={class:"position-relative"},fl={class:"text-center mb-3"},yl=d("stats"),bl=d("stats"),gl=d("EN_info-stats"),hl=d("FR_info-stats"),xl={class:"input-group mx-auto mt-3 mb-1",style:{"max-width":"350px"}},vl={class:"input-group-text px-1"},_l=d("referential"),wl=d("référentiel"),Tl={value:"relative"},kl=d("relative"),Ml=d("relatif"),Al={value:"quantitative"},Sl=d("quantitative"),Pl=d("quantitatif"),Cl={value:"average"},Ul=d("average"),El=d("moyenne"),Nl=u("i",{class:"fa fa-table"},null,-1),Dl=d(" export"),jl=d(" exporter"),Ol={expose:[],setup(t){const n=o(null),s=o("-------------");let d=M.now();const p=e=>{const t=n.value.getCoordinates(e.clientX,e.clientY),a=M.now();if(!t||a-d<100)return;d=a;const l=t.x+f.beginStat;s.value=B.currencyDecimal(t.y)+" "+f.yUnit+"\nT: "+l+" "+W(B.creationPeriod,l)+"\n"+b(f.funeStat[t.x])},f=e({referential:"relative",stats:[],accounts:[],colors:[],xUnit:"",yUnit:"Ü",beginStat:0,funeStat:[null]}),b=e=>e?"M: "+B.currencyDecimal(e.monetaryMass)+" Ü\nN: "+e.nbMembers+" Üm.\nM/N: "+B.currencyDecimal(e.average)+" Ü\nD: "+e.lastMelt+" %\n":"",g=()=>{f.xUnit=B.currency.elapsedTime+" "+W(B.creationPeriod,B.currency.elapsedTime);let e=B.getAccountStats(B.name),t=null,n=[],a=[],l=[];B.selectedAccounts.forEach(((r,s)=>{if(s!=B.name&&(t=B.getAccountStats(s),t)){if("average"==f.referential)for(let n=0;n<t.length;n++)t[n]=0==e[n].average?0:t[n]/e[n].average*1e5;else if("quantitative"==f.referential)for(let n=0;n<t.length;n++)t[n]=t[n]*(e[n].quantitative/B.currency.quantitative);n.push(t),l.push(s),a.push(r.color)}})),"average"==f.referential?(f.yUnit="% M/N",t=e.map((e=>0==e.average?0:e.uPerTime*e.revaluationTime*1e3/e.average*1e5)),n.push(t),a.push("#99999955"),t=new Array(e.length).fill(1e5)):"relative"==f.referential?(f.yUnit="Ü",t=e.map((e=>e.average))):"quantitative"==f.referential&&(f.yUnit="Ü(0) / Ü",t=e.map((e=>e.average*(e.quantitative/B.currency.quantitative)))),n.push(t),a.push(B.selectedAccounts.get(B.name).color),f.stats=n,f.colors=a,f.funeStat=e,f.beginStat=e[0].elapsedTime,f.accounts=l};return h((()=>B.selectedAccounts),g,{deep:!0}),h((()=>B.currency),g,{deep:!0}),h((()=>[f.referential,B.creationPeriod]),g),a((()=>{g()})),(e,t)=>(l(),r("div",pl,[u("h4",fl,[u(i(Q),null,{default:c((()=>[yl])),_:1}),u(i(J),null,{default:c((()=>[bl])),_:1}),u(Me,{class:"position-absolute",info:"info-stats"})]),u(Te,{infoId:"info-stats"},{default:c((()=>[u(i(Q),null,{default:c((()=>[gl])),_:1}),u(i(J),null,{default:c((()=>[hl])),_:1})])),_:1}),u("div",{title:s.value},[u(i(vn),{class:"p-2 stats",data:i(f).stats,colors:i(f).colors,padding:10,radius:8,"stroke-width":1.4,"stroke-linecap":"butt",minX:i(f).beginStat,minY:0,xUnit:i(f).xUnit,yUnit:i(f).yUnit,onMousemove:p,ref:n,"auto-draw":"",smooth:""},null,8,["data","colors","stroke-width","minX","xUnit","yUnit"])],8,["title"]),u("div",xl,[u("label",vl,[u(i(Q),null,{default:c((()=>[_l])),_:1}),u(i(J),null,{default:c((()=>[wl])),_:1})]),y(u("select",{"onUpdate:modelValue":t[1]||(t[1]=e=>i(f).referential=e),class:"form-control px-1 select-text-center"},[u("option",Tl,[u(i(Q),null,{default:c((()=>[kl])),_:1}),u(i(J),null,{default:c((()=>[Ml])),_:1})]),u("option",Al,[u(i(Q),null,{default:c((()=>[Sl])),_:1}),u(i(J),null,{default:c((()=>[Pl])),_:1})]),u("option",Cl,[u(i(Q),null,{default:c((()=>[Ul])),_:1}),u(i(J),null,{default:c((()=>[El])),_:1})])],512),[[v,i(f).referential]]),u("button",{type:"button",class:"btn btn-secondary",onClick:t[2]||(t[2]=e=>(()=>{let e='currency;"U per time: '+B.currency.uPerTime+'";"revaluation period: '+B.currency.revaluationTime+'";"expression: '+("melt"==B.currency.mode?"U(t-r) = ( 1 - ":"U(t+r) = ( 1 + ")+B.currency.expression+' ) U(t)";\nreferential;'+f.referential+";\n";e+="time;M;N;C;D;M/N;";for(let a=0;a<f.accounts.length;a++)e+='"'+f.accounts[a]+'";';e+="\n";for(let a=0;a<f.funeStat.length;a++){let n=f.funeStat[a];e+=n.elapsedTime+";"+B.currencyDecimal(n.monetaryMass)+";"+n.nbMembers+";"+(0==(t=n.lastMelt)?(0).toFixed(2):(1/(1/(t/100)-1)*100).toFixed(2))+";"+n.lastMelt.toFixed(2)+";"+B.currencyDecimal(n.average)+";";for(let t=0;t<f.accounts.length;t++)e+=B.currencyDecimal(f.stats[t][a])+";";e+="\n"}var t,n=new Blob([e],{type:"text/csv;charset=utf-8"});m.saveAs(n,"fune_"+(new Date).toISOString().substring(0,16)+".csv")})())},[Nl,u(i(Q),null,{default:c((()=>[Dl])),_:1}),u(i(J),null,{default:c((()=>[jl])),_:1})])])]))}};const Xl={class:"container mt-3 mb-5"},ql=u("h1",{class:"display-1 text-center mb-3"},[u("img",{src:"favicon90x90.png",class:"icon"}),u("span",{class:"align-middle"},[d(" f"),u("small",null,"Ü"),d("ne")])],-1),Fl={class:"justify-content-center mb-3 input-group mx-auto fit-content"},Ll={class:"lead text-center mb-3"},Yl=u("strong",null,[d("f"),u("small",null,"Ü"),d("ne")],-1),Il=d(" is a web app to test and play with a simple "),Bl=u("a",{href:"https://libre-currency.org"},"Libre Currency",-1),Rl=d(" called "),Vl=u("strong",null,[d("f"),u("small",null,"Ü"),d("ne")],-1),$l=d(" (pronounced /fən/ like fun) "),zl=u("strong",null,[d("f"),u("small",null,"Ü"),d("ne")],-1),Kl=d(" est une appli web qui permet de jouer avec une simple "),Gl=u("a",{href:"https://monnaie-libre.fr/"},"Monnaie Libre",-1),Jl=d(" appelée "),Ql=u("strong",null,[d("f"),u("small",null,"Ü"),d("ne")],-1),Wl=d(" (prononcée /fən/ comme fun en anglais) "),Zl=d("EN_info-home-libreCurrency"),Hl=d("FR_info-home-libreCurrency"),er={class:"lead text-center"},tr=d(" a "),nr=u("strong",null,"Üman",-1),ar=d(" account create some new Ü (the Ünit of the f"),lr=u("small",null,"Ü",-1),rr=d("ne money) every "),sr=d(" un compte "),or=u("strong",null,"Ümain",-1),ur=d(" crée de nouvelles "),ir=u("small",null,"Ü",-1),cr=d(" (l'Ünité de la monnaie f"),dr=u("small",null,"Ü",-1),mr=d("ne) chaque "),pr={class:"input-group fit-content d-inline-block"},fr={value:"day"},yr={value:"month"},br={value:"year"},gr={class:"lead text-center"},hr=d(" a percentage of the old Ünits is redistributed according to a "),xr=u("strong",null,"mathematical",-1),vr=d(" formula at each "),_r=u("strong",null,"revaluation period",-1),wr=d(" un pourcentage des anciennes Ünités est redistribué suivant une "),Tr=u("strong",null,"formule",-1),kr=d(" mathématique à chaque "),Mr=u("strong",null,"période de réévaluation",-1),Ar=d("EN_info-home-funiter"),Sr=d("FR_info-home-funiter"),Pr={class:"d-flex align-items-start flex-wrap p-2 mt-3",style:{"justify-content":"space-evenly"}},Cr={style:{"min-width":"30vw"}},Ur={class:"mx-auto",style:{"min-width":"35vw","max-width":"600px"}},Er={style:{"min-width":"30vw"}};let Nr=JSON.parse(localStorage.getItem("state"));B.restoreState(Nr);var Dr={mounted:(e,t)=>{if("function"!=typeof t.value)return;let n=null,a=null;const l=e=>{"click"===e.type&&0!==e.button||(e.preventDefault(),null===n&&(s(),n=setTimeout((()=>{a=setInterval((()=>{s()}),50),s()}),300)))},r=()=>{null!==n&&(clearTimeout(n),n=null),a&&(clearInterval(a),a=null)},s=e=>{t.value(e)};["mousedown","touchstart"].forEach((t=>e.addEventListener(t,l))),["click","mouseout","touchend","touchcancel"].forEach((t=>e.addEventListener(t,r)))}};A({expose:[],setup(e){o("info");const t=()=>{localStorage.setItem("state",JSON.stringify(B.getState()))};h((()=>B.currency),t,{deep:!0}),h((()=>B.selectedAccounts),t,{deep:!0});const n=[];if(B.accounts.length<=1){const e={name:"Alice",balance:1e4,role:"human"},t={name:"Bob",balance:2e4,role:"human"},n={name:"Carole",balance:0,role:"human"};B.addAccounts([e,t,n]),B.select(e),B.select(t),B.select(n)}return(e,t)=>(l(),r("div",null,[u("div",Xl,[ql,u("div",Fl,[u("button",{class:["btn btn-sm text-light",{"btn-outline-secondary":"fr"!=i($),"btn-primary":"fr"==i($)}],onClick:t[1]||(t[1]=e=>i(G)("fr"))},"FR",2),u("button",{class:["btn btn-sm text-light",{"btn-outline-secondary":"en"!=i($),"btn-primary":"en"==i($)}],onClick:t[2]||(t[2]=e=>i(G)("en"))},"EN",2)]),u("p",Ll,[u(i(Q),null,{default:c((()=>[Yl,Il,Bl,Rl,Vl,$l])),_:1}),u(i(J),null,{default:c((()=>[zl,Kl,Gl,Jl,Ql,Wl])),_:1}),u(Me,{class:"px-0",info:"info-home-libreCurrency"})]),u(Te,{infoId:"info-home-libreCurrency"},{default:c((()=>[u(i(Q),null,{default:c((()=>[Zl])),_:1}),u(i(J),null,{default:c((()=>[Hl])),_:1})])),_:1}),u("div",er,[u(i(Q),null,{default:c((()=>[tr,nr,ar,lr,rr])),_:1}),u(i(J),null,{default:c((()=>[sr,or,ur,ir,cr,dr,mr])),_:1}),u("div",pr,[y(u("select",{class:"form-control select-text-center fit-content p-1","onUpdate:modelValue":t[3]||(t[3]=e=>i(B).creationPeriod=e)},[u("option",fr,f(i(W)("day")),1),u("option",yr,f(i(W)("month")),1),u("option",br,f(i(W)("year")),1)],512),[[v,i(B).creationPeriod]])])]),u("p",gr,[u(i(Q),null,{default:c((()=>[hr,xr,vr,_r])),_:1}),u(i(J),null,{default:c((()=>[wr,Tr,kr,Mr])),_:1})]),u(Te,{infoId:"info-home-funiter",class:"mx-auto w-auto mt-3"},{default:c((()=>[u(i(Q),null,{default:c((()=>[Ar])),_:1}),u(i(J),null,{default:c((()=>[Sr])),_:1})])),_:1})]),u(V,{accounts:n,selectedAccounts:n,class:"mt-3"},{default:c((()=>[u(ie,{class:"mx-auto",style:{"max-width":"400px"}}),u(xe,{class:"mx-auto sticky-top"}),u("div",Pr,[u("div",Cr,[u(zt,{class:"mb-3 mx-auto",style:{width:"380px"}})]),u("div",Ur,[u(Ol,{class:"mb-3"}),u(dn,{class:"mb-3 mx-auto",style:{"max-width":"450px"}})]),u("div",Er,[u(ml,{class:"mb-3 mx-auto",style:{"max-width":"450px"}})]),u(Aa,{class:"mb-3 mx-auto",style:{"min-width":"35vw","max-width":"600px"}})])])),_:1})]))}}).directive("longclick",Dr).mount("#app");

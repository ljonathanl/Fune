import{r as e,e as t,o as a,a as n,D as l,c as r,b as s,d as u,f as o,g as c,u as i,w as d,h as p,i as m,F as f,j as y,v as h,k as g,l as b,m as x,n as v,t as _,p as w,q as C,s as A,x as k}from"./vendor.c416e168.js";!function(e=".",t="__import__"){try{self[t]=new Function("u","return import(u)")}catch(a){const n=new URL(e,location),l=e=>{URL.revokeObjectURL(e.src),e.remove()};self[t]=e=>new Promise(((a,r)=>{const s=new URL(e,n);if(self[t].moduleMap[s])return a(self[t].moduleMap[s]);const u=new Blob([`import * as m from '${s}';`,`${t}.moduleMap['${s}']=m;`],{type:"text/javascript"}),o=Object.assign(document.createElement("script"),{type:"module",src:URL.createObjectURL(u),onerror(){r(new Error(`Failed to import: ${e}`)),l(o)},onload(){a(self[t].moduleMap[s]),l(o)}});document.head.appendChild(o)})),self[t].moduleMap={}}}("/assets/");const T="human",S="bank",D="grew",M="melt",O={day:"day",month:"month",year:"year"},j={day:1,month:60,year:360};let P=0,N={};const F={name:"fÜne",logo:"fї",uValue:1e3,isPlaying:!1,doTx:(e,t=!0)=>{let a=Object.assign({from:"",to:"",message:"",value:0,date:(new Date).toISOString(),day:N.currency.elapsedTime},e);var n=N.accounts[a.from],l=N.accounts[a.to];return a.value<=0||!n||!l||n==l||n.role!=S&&n.balance-a.value<0?null:(l.role!=S&&(l.balance+=a.value),n.role!=S&&(n.balance-=a.value,n.balance<10&&(n.balance=0)),a.balanceFrom=n.balance,a.balanceTo=l.balance,N.transactions.push(a),N.transactions.length>1e3&&(N.transactions=N.transactions.slice(N.transactions.length-1e3)),t&&E(),a)},getCurrency:()=>Object.assign({},N.currency),updateCurrency:e=>{const t=F.isPlaying;return t&&F.stop(),Object.assign(N.currency,e),t&&F.play(),Object.assign({},N.currency)},getAccount:e=>N.accounts[e],getAccounts:()=>Object.values(N.accounts),createAccount:e=>{if(e.name=e.name.trim(),!e.name||N.accounts[e.name])return null;let t=N.accounts[e.name]=Object.assign({name:"",balance:0,role:"wallet",date:(new Date).toISOString(),creationDay:N.currency.elapsedTime},e);return E(),t},updateAccount:(e,t)=>{let a=N.accounts[e];return!a||"bank"==a.role||t.name&&e!=t.name?null:(a=Object.assign(a,t),E(),a)},deleteAccount:e=>{let t=N.accounts[e];return t&&t.name!=F.name?(delete N.accounts[e],delete N.stats[e],E(),t):null},getAccountTx:(e,t)=>{if(!N.accounts[e])return null;let a=N.transactions.filter((t=>t.from==e||t.to==e));return t>0&&t<a.length&&(a=a.slice(-t)),a},getAccountStats:(e,t=O.day)=>{if((t=O[t])||(t=O.day),!N.accounts[e])return null;const a=N.stats[e];if(!a)return[];const n=a[t];if(!n)return[];if(N.currency.elapsedTime<j[t])return[n[0],n[0]];let l=(Math.floor(N.currency.elapsedTime/j[t])+1)%100;return l>0&&N.currency.elapsedTime<100*j[t]?n.slice(0,l):n.slice(l).concat(n.slice(0,l))},getState:()=>({currency:N.currency,accounts:N.accounts,transactions:N.transactions,stats:N.stats})},U={date:(new Date).toISOString(),stepTime:10,uPerDay:1,elapsedTime:0,revaluationTime:1,nbMembers:0,monetaryMass:0,mode:M,lastMelt:0,average:0,quantitative:1,expression:"10/100"};F.expressionParser=(e,t)=>parseFloat(e);const q=/!x(\d+)/,I=F.uValue,L=()=>({isStatMonth:N.currency.elapsedTime%j.month==0,isStatYear:N.currency.elapsedTime%j.year==0,statDayIndex:N.currency.elapsedTime%100,statMonthIndex:N.currency.elapsedTime/j.month%100,statYearIndex:N.currency.elapsedTime/j.year%100}),E=()=>{let e=0,t=0;const a=L();Object.values(N.accounts).forEach((n=>{const l=n.name.match(q);let r=1;l&&(r=parseInt(l[1])),n.role==T&&(t+=r),n.role!=S&&(e+=n.balance*r,((e,t,a=null)=>{a||(a=L());let n=N.stats[e.name];n||(n={},n[O.day]=new Array(100).fill(0),n[O.month]=new Array(100).fill(0),n[O.year]=new Array(100).fill(0),N.stats[e.name]=n),n[O.day][a.statDayIndex]=t,a.isStatMonth&&(n[O.month][a.statMonthIndex]=t),a.isStatYear&&(n[O.year][a.statYearIndex]=t)})(n,n.balance,a))})),N.currency.nbMembers=t,N.currency.monetaryMass=e,N.currency.average=t>0?Math.floor(e/t):0,((e=null)=>{e||(e=L());let t=Object.assign({},N.currency),a=N.stats[F.name];a||(a={},a[O.day]=new Array(100).fill(U),a[O.month]=new Array(100).fill(U),a[O.year]=new Array(100).fill(U),N.stats[F.name]=a),a[O.day][e.statDayIndex]=t,e.isStatMonth&&(a[O.month][e.statMonthIndex]=t),e.isStatYear&&(a[O.year][e.statYearIndex]=t)})(a)},V=(e=!0)=>{N.currency.elapsedTime++;let t=0,a=0;const n=N.currency.uPerDay>=0?Math.floor(N.currency.uPerDay):0,l=I*N.currency.revaluationTime*n,r=N.accounts[F.name],s=N.currency.elapsedTime%N.currency.revaluationTime==0;s&&N.currency.nbMembers>0&&(t=F.expressionParser(N.currency.expression,{M:N.currency.monetaryMass/l,N:N.currency.nbMembers,T:N.currency.elapsedTime}),N.currency.mode==D&&(t=1-1/(1+t)),t=Math.max(0,Math.min(1,t)),a=(100*t).toFixed(2)),Object.values(N.accounts).forEach((e=>{if(s&&t>0&&e.balance>9){let n=e.balance*t;n=Math.min(n>l?Math.ceil(n):Math.floor(n),e.balance),n<10&&(n=10),F.doTx({from:e.name,to:r.name,message:"!revaluation%"+a,value:n},!1)}e.role==T&&n>0&&F.doTx({from:r.name,to:e.name,message:"!1Ucreation",value:I*n},!1)})),s&&(N.currency.lastMelt=a,N.currency.quantitative=N.currency.quantitative*(1+1/(1/t-1))),E(),e&&(P=setTimeout(V,1e3*N.currency.stepTime,!0)),F.onDayChange(N.currency.elapsedTime)};F.restoreState=e=>{e&&(e.currency&&(N.currency=Object.assign(U,e.currency)),e.accounts&&(N.accounts=e.accounts),e.transactions&&(N.transactions=e.transactions),e.stats&&(N.stats=e.stats))},F.start=(e,t)=>{F.restoreState(t),e&&(F.expressionParser=e),N.currency||(N.currency=U),N.accounts||(N.accounts={}),N.accounts[F.name]={name:F.name,balance:0,role:S,date:(new Date).toISOString(),creationDay:0},N.transactions||(N.transactions=[]),N.stats||(N.stats={})},F.onDayChange=()=>{},F.reset=()=>{F.stop(),Object.values(N.accounts).forEach((e=>{e.balance=0})),N.transactions=[],N.stats={},N.currency.elapsedTime=0,N.currency.lastMelt=0,N.currency.quantitative=1,E()},F.play=(e=!0)=>{F.isPlaying||(0!=P&&(clearTimeout(P),P=0),F.isPlaying=e,V(e))},F.stop=()=>{F.isPlaying&&(0!=P&&(clearTimeout(P),P=0),F.isPlaying=!1)};const Y=e({name:F.name,isPlaying:!1,currency:{},accounts:[],selectedAccounts:[F.name]}),B=F.uValue;Y.isSelected=e=>Y.selectedAccounts.indexOf(e.name)>=0,Y.select=e=>{if("bank"==e.role)return;let t=Y.selectedAccounts.indexOf(e.name);t<0?Y.selectedAccounts.push(e.name):Y.selectedAccounts.splice(t,1)},Y.doTx=e=>{const t=F.doTx({from:e.from,to:e.to,value:Math.floor(e.value*B)});return t&&Y.refresh(),t},Y.updateCurrency=e=>(Y.currency=F.updateCurrency(e),Y.currency),Y.addAccounts=e=>{e&&(e.forEach((e=>{F.createAccount(e)||F.updateAccount(e.name,e)})),Y.refresh())},Y.createAccount=e=>{let t=F.createAccount(e);return t&&(Y.accounts.push(t),Y.refresh()),t},Y.updateAccount=(e,t)=>{let a=F.updateAccount(e.name,t);return a&&(a=Object.assign(e,a),Y.refresh()),a},Y.deleteAccount=e=>{let t=null;return F.deleteAccount(e.name)&&(Y.isSelected(e)&&Y.select(e),t=e,Y.refresh()),t},Y.getAccountTx=(e,t)=>F.getAccountTx(e,t),Y.getAccountStats=(e,t=statTypes.day)=>F.getAccountStats(e,t),Y.onDayChange=()=>{Y.refresh()},Y.refresh=()=>{Y.accounts=F.getAccounts(),Y.currency=F.getCurrency()},Y.reset=()=>{F.reset(),Y.refresh(),Y.isPlaying=F.isPlaying},Y.play=e=>{F.play(e),Y.refresh(),Y.isPlaying=F.isPlaying},Y.stop=()=>{F.stop(),Y.refresh(),Y.isPlaying=F.isPlaying},Y.getState=()=>{const e=F.getState();return e.selectedAccounts=Y.selectedAccounts,e},Y.restoreState=e=>{e.selectedAccounts&&(Y.selectedAccounts=e.selectedAccounts),F.restoreState(e),Y.refresh()},Y.currencyWithoutDecimal=e=>Math.floor(e/B),Y.currencyDecimal=e=>(e/B).toFixed(2),F.onDayChange=Y.onDayChange,F.start(t,{}),Y.refresh();const R={expose:[],props:{currency:Object,accounts:Array,selectedAccounts:Array,autoPlay:Boolean},setup(e){const{currency:t,accounts:l,selectedAccounts:r}=e;return a((()=>{t&&Y.updateCurrency(t),l&&Y.addAccounts(l),r&&r.forEach((e=>{Y.select(e)}))})),(e,t)=>n(e.$slots,"default")}},J="fr"==(navigator.userLanguage||navigator.languages&&navigator.languages.length&&navigator.languages[0]||navigator.language||navigator.browserLanguage||navigator.systemLanguage).substring(0,2)?"fr":"en",z=e=>({render(){if(J==e)return this.$slots.default()}}),X=e=>e[J],$=z("fr"),K=z("en");var G={deflate:8},W=1,Z=2,Q=4,H=8,ee=16,te={fat:0,amiga:1,vmz:2,unix:3,"vm/cms":4,atari:5,hpfs:6,macintosh:7,"z-system":8,cplm:9,"tops-20":10,ntfs:11,qdos:12,acorn:13,vfat:14,vms:15,beos:16,tandem:17,theos:18};function ae(e,t){t.push(255&e)}function ne(e,t){t.push(255&e),t.push(e>>>8)}function le(e,t){ne(65535&e,t),ne(e>>>16,t)}function re(e){return e.shift()}function se(e){return e.shift()|e.shift()<<8}function ue(e){var t=se(e),a=se(e);return a>32768?((a-=32768)<<16|t)+32768*Math.pow(2,16):a<<16|t}function oe(e){for(var t=[];0!==e[0];)t.push(String.fromCharCode(e.shift()));return e.shift(),t.join("")}var ce={zip:function(e,t){var a,n=0,s=[];return t||(t={}),a=t.level||6,"string"==typeof e&&(e=Array.prototype.map.call(e,(function(e){return e.charCodeAt(0)}))),ae(31,s),ae(139,s),ae(G.deflate,s),t.name&&(n|=H),ae(n,s),le(t.timestamp||parseInt(Date.now()/1e3,10),s),ae(1===a?4:9===a?2:0,s),ae(te.unix,s),t.name&&(!function(e,t){var a,n=e.length;for(a=0;a<n;a+=1)ae(e.charCodeAt(a),t)}(t.name.substring(t.name.lastIndexOf("/")+1),s),ae(0,s)),l.deflate(e,a).forEach((function(e){ae(e,s)})),le(parseInt(r(e),16),s),le(e.length,s),s},unzip:function(e){var t,a,n,s,u=Array.prototype.slice.call(e,0);if(31!==re(u)||139!==re(u))throw"Not a GZIP file";if(t=re(u),!(t=Object.keys(G).some((function(e){return a=e,G[e]===t}))))throw"Unsupported compression method";if(n=re(u),ue(u),re(u),t=re(u),Object.keys(te).some((function(e){if(te[e]===t)return!0})),n&Q&&function(e,t){var a,n=[];for(a=0;a<t;a+=1)n.push(e.shift())}(u,t=se(u)),n&H&&oe(u),n&ee&&oe(u),n&Z&&se(u),"deflate"===a&&(s=l.inflate(u.splice(0,u.length-8))),n&W&&(s=Array.prototype.map.call(s,(function(e){return String.fromCharCode(e)})).join("")),ue(u)>>>0!==parseInt(r(s),16))throw"Checksum does not match";if(ue(u)!==s.length)throw"Size of decompressed file not correct";return s},get DEFAULT_LEVEL(){return 6}};const ie={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(e){var t,a,n,l,r,s,u,o="",c=0;for(e=ie._utf8_encode(e);c<e.length;)l=(t=e.charCodeAt(c++))>>2,r=(3&t)<<4|(a=e.charCodeAt(c++))>>4,s=(15&a)<<2|(n=e.charCodeAt(c++))>>6,u=63&n,isNaN(a)?s=u=64:isNaN(n)&&(u=64),o=o+this._keyStr.charAt(l)+this._keyStr.charAt(r)+this._keyStr.charAt(s)+this._keyStr.charAt(u);return o},decode:function(e){var t,a,n,l,r,s,u="",o=0;for(e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");o<e.length;)t=this._keyStr.indexOf(e.charAt(o++))<<2|(l=this._keyStr.indexOf(e.charAt(o++)))>>4,a=(15&l)<<4|(r=this._keyStr.indexOf(e.charAt(o++)))>>2,n=(3&r)<<6|(s=this._keyStr.indexOf(e.charAt(o++))),u+=String.fromCharCode(t),64!=r&&(u+=String.fromCharCode(a)),64!=s&&(u+=String.fromCharCode(n));return u=ie._utf8_decode(u)},_utf8_encode:function(e){e=e.replace(/\r\n/g,"\n");for(var t="",a=0;a<e.length;a++){var n=e.charCodeAt(a);n<128?t+=String.fromCharCode(n):n>127&&n<2048?(t+=String.fromCharCode(n>>6|192),t+=String.fromCharCode(63&n|128)):(t+=String.fromCharCode(n>>12|224),t+=String.fromCharCode(n>>6&63|128),t+=String.fromCharCode(63&n|128))}return t},_utf8_decode:function(e){for(var t="",a=0,n=0,l=0;a<e.length;)(n=e.charCodeAt(a))<128?(t+=String.fromCharCode(n),a++):n>191&&n<224?(l=e.charCodeAt(a+1),t+=String.fromCharCode((31&n)<<6|63&l),a+=2):(l=e.charCodeAt(a+1),c3=e.charCodeAt(a+2),t+=String.fromCharCode((15&n)<<12|(63&l)<<6|63&c3),a+=3);return t}};var de={},pe=-1,me={}.toString;function fe(e,t){var a,n=e.length;for(a=0;a<n;a++)if(e[a][1]===t)return!0;return!1}function ye(e){var t,a=e.length,n=[];for(t=0;t<a;t++)fe(n,e[t][1])||n.push(e[t]);return n}function he(e){return"[object Array]"===me.call(e)}function ge(e,t,a){var n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=_!?()*",l=[],r=e;for(t=t||n.length,a=a||0;r>=t;)l.push(n.charCodeAt(r%t+a)),r=Math.floor(r/t-1);return l.push(n.charCodeAt(r+a)),l.reverse()}function be(e){return String.fromCharCode.apply(String,e)}function xe(e,t){var a,n,l,r;for(n in e)e.hasOwnProperty(n)&&(l=e[n],r=l,("[object Object]"===me.call(r)||he(l))&&(t=t.concat(ye(xe(l,t)))),isNaN(Number(n))&&(fe(t,n)||((a=[]).push(be(ge(pe+=1)),n),t.push(a))));return t}function ve(e,t){var a,n,l,r,s,u;for(a=function(e){var t,a,n={},l=e.length;for(t=0;t<l;t++)n[(a=e[t])[0]]=a[1];return n}(t=ye(t=xe(e,t))),l=JSON.stringify(e),r=t.length,s=0;s<r;s++)n=t[s],l=l.replace(new RegExp(('"'+n[1]+'"').replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),"g"),'"'+n[0]+'"');return(u=JSON.parse(l))._=a,u}"object"==typeof exports&&"object"==typeof module&&module.exports,de.compress=function(e,t){t||(pe=-1);var a,n=t||[];return he(e)?(!function(e,t){var a,n;for(a=0,n=e.length;a<n;a++)e[a]=de.compress(e[a],t)}(e,n),a=e):a=ve(e,n),a},de.pack=function(e,t){var a=JSON.stringify(t?de.compress(e):e);return ie.encode(String.fromCharCode.apply(String,ce.zip(a,{level:9})))},de.decompress=function(e){var t,a=JSON.parse(JSON.stringify(e));return he(a)?function(e){var t,a;for(t=0,a=e.length;t<a;t++)e[t]=de.decompress(e[t])}(a):t=function(e){var t,a,n;for(n in t=JSON.parse(JSON.stringify(e._)),delete e._,a=JSON.stringify(e),t)t.hasOwnProperty(n)&&(a=a.replace(new RegExp('"'+n+'"',"g"),'"'+t[n]+'"'));return a}(a),t?JSON.parse(t):a},de.unpack=function(e,t){var a=function(e){for(var t=0,a=e.length,n=[];t<a;t++)n.push(e.charCodeAt(t));return n}(ie.decode(e)),n=String.fromCharCode.apply(String,ce.unzip(a,{level:9})),l=JSON.parse(n);return t?de.decompress(l):l};const _e={class:"text-center"},we=c("i",{class:"fa fa-play"},null,-1),Ce=m(" play"),Ae=m(" lecture"),ke=c("i",{class:"fa fa-step-forward"},null,-1),Te=m(" next"),Se=m(" suivant"),De=c("i",{class:"fa fa-pause"},null,-1),Me=m(" pause"),Oe=m(" pause"),je=c("i",{class:"fa fa-upload"},null,-1),Pe=m(" load"),Ne=m(" charger"),Fe=c("i",{class:"fa fa-download"},null,-1),Ue=m(" save"),qe=m(" sauvegarder"),Ie=c("i",{class:"fa fa-undo"},null,-1),Le=m(" reset"),Ee=m(" RAZ"),Ve={expose:[],setup(e){const t=()=>{Y.play(!1)},a=e=>{const t=e.target.files[0];if(t){const e=new FileReader;e.onload=function(e){var t=e.target.result;n(t)},e.readAsText(t)}else alert("failed to load file");e.target.value=null},n=e=>{try{const t=de.unpack(e,!0);console.log(t),Y.stop(),Y.restoreState(t)}catch(t){console.log(t),alert("failed to load file")}};return(e,n)=>{const l=s("longclick");return u(),o("div",_e,[c("button",{class:"btn btn-primary",onClick:n[1]||(n[1]=e=>i(Y).play()),disabled:i(Y).isPlaying},[we,c(i(K),null,{default:d((()=>[Ce])),_:1}),c(i($),null,{default:d((()=>[Ae])),_:1})],8,["disabled"]),p(c("button",{class:"btn btn-secondary",disabled:i(Y).isPlaying},[ke,c(i(K),null,{default:d((()=>[Te])),_:1}),c(i($),null,{default:d((()=>[Se])),_:1})],8,["disabled"]),[[l,t]]),c("button",{class:"btn btn-secondary mr-5",onClick:n[2]||(n[2]=e=>i(Y).stop()),disabled:!i(Y).isPlaying},[De,c(i(K),null,{default:d((()=>[Me])),_:1}),c(i($),null,{default:d((()=>[Oe])),_:1})],8,["disabled"]),c("label",{class:["btn btn-dark mb-0",{disabled:i(Y).isPlaying}]},[je,c(i(K),null,{default:d((()=>[Pe])),_:1}),c(i($),null,{default:d((()=>[Ne])),_:1}),c("input",{type:"file",hidden:"",onChange:a},null,32)],2),c("button",{class:"btn btn-light text-dark",onClick:n[3]||(n[3]=e=>(()=>{const e=Y.getState();JSON.stringify(e);var t=de.pack(e,!0),a=new Blob([t],{type:"text/plain;charset=utf-8"});f.saveAs(a,"fune_"+(new Date).toISOString().substring(0,16)+".fun")})()),disabled:i(Y).isPlaying},[Fe,c(i(K),null,{default:d((()=>[Ue])),_:1}),c(i($),null,{default:d((()=>[qe])),_:1})],8,["disabled"]),c("button",{class:"btn btn-danger mx-5",onClick:n[4]||(n[4]=e=>i(Y).reset())},[Ie,c(i(K),null,{default:d((()=>[Le])),_:1}),c(i($),null,{default:d((()=>[Ee])),_:1})])])}}},Ye={class:"text-center"},Be=m("currency"),Re=m("monnaie"),Je={class:"input-group mb-3"},ze={class:"input-group-text w-50"},Xe=m("Ü revaluation"),$e=m("réévaluation de Ü"),Ke={value:"melt"},Ge=m("melting"),We=m("fonte"),Ze={value:"grew"},Qe=m("growth"),He=m("croissance"),et={class:"input-group mb-3"},tt={key:0,class:"input-group-text"},at={key:1,class:"input-group-text"},nt=c("span",{class:"input-group-text"}," ) Ü(t)",-1),lt={class:"input-group mb-3"},rt={class:"input-group-text",for:"currencyUPerDay"},st=m("Ü per day"),ut=m("Ü par jour"),ot=c("span",{class:"input-group-text"},"Ü",-1),ct={class:"input-group mb-3"},it={class:"input-group-text",for:"currencyRevaluationTime"},dt=m("revaluation period"),pt=m("réévaluation"),mt={class:"input-group-text"},ft=m("day"),yt={key:0},ht=m("jour"),gt={key:0},bt={class:"input-group mb-3"},xt={class:"input-group-text",for:"currencyStepTime"},vt=m("day duration"),_t=m("durée d'un jour"),wt={class:"input-group-text"},Ct=m("second"),At={key:0},kt=m("seconde"),Tt={key:0},St={key:0,class:"d-grid gap-2 d-md-flex mb-3"},Dt=m("ündo!"),Mt=m("annüler!"),Ot=m("üpdate!"),jt=m("valïder!"),Pt={class:"input-group mb-3 mt-5"},Nt={class:"input-group-text",for:"currencyMass"},Ft=m("monetary mass (M)"),Ut=m("masse monétaire (M)"),qt=c("span",{class:"input-group-text"},"Ü",-1),It={class:"input-group mb-3"},Lt={class:"input-group-text",for:"currencyNbMembers"},Et=m("Üman accounts (N)"),Vt=m("comptes Ümains (N)"),Yt={class:"input-group mb-3"},Bt={class:"input-group-text",for:"currencyAvg"},Rt=m("average"),Jt=m("moyenne"),zt={class:"input-group-text"},Xt=m("Ü / Üman"),$t=m("Ü / Ümain"),Kt={class:"input-group mb-3"},Gt={class:"input-group-text",for:"currencyQuantitative"},Wt=m("quantitative value"),Zt=m("valeur quantitative"),Qt={class:"input-group-text"},Ht=m("Ü / Ü(0)"),ea=m("Ü / Ü(0)"),ta={class:"input-group mb-3"},aa={class:"input-group-text",for:"currencyLastGrew"},na=m("last growth"),la=m("dernière croissance"),ra=c("span",{class:"input-group-text"},"%",-1),sa={class:"input-group mb-3"},ua={class:"input-group-text",for:"currencyLastMelt"},oa=m("last melting"),ca=m("dernière fonte"),ia=c("span",{class:"input-group-text"},"%",-1),da={class:"input-group mb-3"},pa={class:"input-group-text",for:"currencyElapsedTime"},ma=m("elapsed time (T)"),fa=m("temps écoulé (T)"),ya={class:"input-group-text"},ha=m("day"),ga={key:0},ba=m("jour"),xa={key:0},va={expose:[],setup(t){const n=e({expression:"",mode:"melt",uPerDay:1,stepTime:0,revaluationTime:0}),l=y((()=>0==Y.currency.lastMelt?0:(1/(1/(Y.currency.lastMelt/100)-1)*100).toFixed(2))),r=y((()=>!(!Y||!Y.currency)&&(Y.currency.expression!=n.expression||Y.currency.mode!=n.mode||Y.currency.uPerDay!=n.uPerDay||Y.currency.revaluationTime!=n.revaluationTime||Y.currency.stepTime!=n.stepTime)));return a((()=>{Object.assign(n,Y.currency)})),(e,t)=>(u(),o("div",null,[c("h4",Ye,[c(i(K),null,{default:d((()=>[Be])),_:1}),c(i($),null,{default:d((()=>[Re])),_:1})]),c("form",null,[c("div",Je,[c("label",ze,[c(i(K),null,{default:d((()=>[Xe])),_:1}),c(i($),null,{default:d((()=>[$e])),_:1})]),p(c("select",{"onUpdate:modelValue":t[1]||(t[1]=e=>i(n).mode=e),id:"currencyMode",class:["form-select w-50",{"bg-primary":i(n).mode!=i(Y).currency.mode}]},[c("option",Ke,[c(i(K),null,{default:d((()=>[Ge])),_:1}),c(i($),null,{default:d((()=>[We])),_:1})]),c("option",Ze,[c(i(K),null,{default:d((()=>[Qe])),_:1}),c(i($),null,{default:d((()=>[He])),_:1})])],2),[[h,i(n).mode]])]),c("div",et,["melt"==i(n).mode?(u(),o("span",tt,"Ü(t-1) = ( 1 - ")):(u(),o("span",at,"Ü(t+1) = ( 1 + ")),p(c("input",{id:"currencyExpression","onUpdate:modelValue":t[2]||(t[2]=e=>i(n).expression=e),type:"text",class:["form-control text-right",{"bg-primary":i(n).expression!=i(Y).currency.expression}]},null,2),[[g,i(n).expression]]),nt]),c("div",lt,[c("label",rt,[c(i(K),null,{default:d((()=>[st])),_:1}),c(i($),null,{default:d((()=>[ut])),_:1})]),p(c("input",{id:"currencyUPerDay","onUpdate:modelValue":t[3]||(t[3]=e=>i(n).uPerDay=e),type:"number",min:"0",max:"1000",step:"1",class:["form-control text-right",{"bg-primary":i(n).uPerDay!=i(Y).currency.uPerDay}]},null,2),[[g,i(n).uPerDay]]),ot]),c("div",ct,[c("label",it,[c(i(K),null,{default:d((()=>[dt])),_:1}),c(i($),null,{default:d((()=>[pt])),_:1})]),p(c("input",{id:"currencyRevaluationTime","onUpdate:modelValue":t[4]||(t[4]=e=>i(n).revaluationTime=e),type:"number",min:"1",max:"400",step:"1",class:["form-control text-right",{"bg-primary":i(n).revaluationTime!=i(Y).currency.revaluationTime}]},null,2),[[g,i(n).revaluationTime]]),c("span",mt,[c(i(K),null,{default:d((()=>[ft,i(n).revaluationTime>1?(u(),o("span",yt,"s")):b("",!0)])),_:1}),c(i($),null,{default:d((()=>[ht,i(n).revaluationTime>1?(u(),o("span",gt,"s")):b("",!0)])),_:1})])]),c("div",bt,[c("label",xt,[c(i(K),null,{default:d((()=>[vt])),_:1}),c(i($),null,{default:d((()=>[_t])),_:1})]),p(c("input",{id:"currencyStepTime","onUpdate:modelValue":t[5]||(t[5]=e=>i(n).stepTime=e),type:"number",min:"1",max:"90000",step:"1",class:["form-control text-right",{"bg-primary":i(n).stepTime!=i(Y).currency.stepTime}]},null,2),[[g,i(n).stepTime]]),c("span",wt,[c(i(K),null,{default:d((()=>[Ct,i(n).stepTime>1?(u(),o("span",At,"s")):b("",!0)])),_:1}),c(i($),null,{default:d((()=>[kt,i(n).stepTime>1?(u(),o("span",Tt,"s")):b("",!0)])),_:1})])]),i(r)?(u(),o("div",St,[c("button",{type:"button",class:"btn btn-secondary mr-auto",onClick:t[6]||(t[6]=e=>Object.assign(i(n),i(Y).currency))},[c(i(K),null,{default:d((()=>[Dt])),_:1}),c(i($),null,{default:d((()=>[Mt])),_:1})]),c("button",{type:"button",class:"btn btn-primary",onClick:t[7]||(t[7]=e=>(()=>{const{expression:e,mode:t,uPerDay:a,revaluationTime:l,stepTime:r}=n;Y.updateCurrency({expression:e,mode:t,uPerDay:a,revaluationTime:l,stepTime:r})})())},[c(i(K),null,{default:d((()=>[Ot])),_:1}),c(i($),null,{default:d((()=>[jt])),_:1})])])):b("",!0),c("div",Pt,[c("label",Nt,[c(i(K),null,{default:d((()=>[Ft])),_:1}),c(i($),null,{default:d((()=>[Ut])),_:1})]),c("input",{id:"currencyMass",value:i(Y).currencyWithoutDecimal(i(Y).currency.monetaryMass),type:"text",class:"form-control text-right",disabled:""},null,8,["value"]),qt]),c("div",It,[c("label",Lt,[c(i(K),null,{default:d((()=>[Et])),_:1}),c(i($),null,{default:d((()=>[Vt])),_:1})]),c("input",{id:"currencyNbMembers",value:i(Y).currency.nbMembers,type:"text",class:"form-control text-right",disabled:""},null,8,["value"])]),c("div",Yt,[c("label",Bt,[c(i(K),null,{default:d((()=>[Rt])),_:1}),c(i($),null,{default:d((()=>[Jt])),_:1})]),c("input",{id:"currencyAvg",value:i(Y).currencyWithoutDecimal(i(Y).currency.average),type:"text",class:"form-control text-right",disabled:""},null,8,["value"]),c("span",zt,[c(i(K),null,{default:d((()=>[Xt])),_:1}),c(i($),null,{default:d((()=>[$t])),_:1})])]),c("div",Kt,[c("label",Gt,[c(i(K),null,{default:d((()=>[Wt])),_:1}),c(i($),null,{default:d((()=>[Zt])),_:1})]),c("input",{id:"currencyQuantitative",value:i(Y).currency.quantitative.toFixed(2),type:"text",class:"form-control text-right",disabled:""},null,8,["value"]),c("span",Qt,[c(i(K),null,{default:d((()=>[Ht])),_:1}),c(i($),null,{default:d((()=>[ea])),_:1})])]),c("div",ta,[c("label",aa,[c(i(K),null,{default:d((()=>[na])),_:1}),c(i($),null,{default:d((()=>[la])),_:1})]),c("input",{id:"currencyLastGrew",value:i(l),type:"text",class:"form-control text-right",disabled:""},null,8,["value"]),ra]),c("div",sa,[c("label",ua,[c(i(K),null,{default:d((()=>[oa])),_:1}),c(i($),null,{default:d((()=>[ca])),_:1})]),c("input",{id:"currencyLastMelt",value:i(Y).currency.lastMelt,type:"text",class:"form-control text-right",disabled:""},null,8,["value"]),ia]),c("div",da,[c("label",pa,[c(i(K),null,{default:d((()=>[ma])),_:1}),c(i($),null,{default:d((()=>[fa])),_:1})]),p(c("input",{id:"currencyElapsedTime","onUpdate:modelValue":t[8]||(t[8]=e=>i(Y).currency.elapsedTime=e),type:"text",class:"form-control text-right",disabled:""},null,512),[[g,i(Y).currency.elapsedTime]]),c("span",ya,[c(i(K),null,{default:d((()=>[ha,i(Y).currency.elapsedTime>1?(u(),o("span",ga,"s")):b("",!0)])),_:1}),c(i($),null,{default:d((()=>[ba,i(Y).currency.elapsedTime>1?(u(),o("span",xa,"s")):b("",!0)])),_:1})])])])]))}},_a={class:"text-center"},wa=m("transaction"),Ca=m("transaction"),Aa={class:"input-group"},ka=c("span",{class:"input-group-text"},[c("small",null,"Ü")],-1),Ta={class:"input-group-text",for:"txFrom"},Sa=m(" fröm "),Da=m(" de "),Ma={class:"input-group-text",for:"txTo"},Oa=m(" tö "),ja=m(" à "),Pa=c("option",{disabled:"",value:""},"select öne",-1),Na=c("option",{disabled:"",value:""},"qüi",-1),Fa={expose:[],setup(t){const a=e({from:"fÜne",to:"",value:1}),n=y((()=>Y.accounts)),l=y((()=>Y.accounts));return(e,t)=>(u(),o("div",null,[c("h4",_a,[c(i(K),null,{default:d((()=>[wa])),_:1}),c(i($),null,{default:d((()=>[Ca])),_:1})]),c("form",null,[c("div",Aa,[p(c("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>i(a).value=e),type:"number",step:"any",class:"form-control text-right"},null,512),[[g,i(a).value]]),ka,c("label",Ta,[c(i(K),null,{default:d((()=>[Sa])),_:1}),c(i($),null,{default:d((()=>[Da])),_:1})]),p(c("select",{"onUpdate:modelValue":t[2]||(t[2]=e=>i(a).from=e),id:"txFrom",class:"form-select"},[(u(!0),o(x,null,v(i(n),(e=>(u(),o("option",{value:e.name,key:e.name},_(e.name),9,["value"])))),128))],512),[[h,i(a).from]]),c("label",Ma,[c(i(K),null,{default:d((()=>[Oa])),_:1}),c(i($),null,{default:d((()=>[ja])),_:1})]),p(c("select",{"onUpdate:modelValue":t[3]||(t[3]=e=>i(a).to=e),id:"txTo",class:"form-select"},[c(i(K),null,{default:d((()=>[Pa])),_:1}),c(i($),null,{default:d((()=>[Na])),_:1}),(u(!0),o(x,null,v(i(l),(e=>(u(),o("option",{value:e.name,key:e.name},_(e.name),9,["value"])))),128))],512),[[h,i(a).to]]),c("button",{type:"button",class:"btn btn-primary",onClick:t[4]||(t[4]=e=>i(Y).doTx(i(a)))},"ök!")])])]))}};function Ua(e){return parseInt(e,10)}function qa(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function Ia(e,t,a){var n=e.x-t.x,l=e.y-t.y,r=Math.sqrt(n*n+l*l),s=n/r,u=l/r;return{x:t.x+s*a,y:t.y+u*a}}function La(e,t){var a=e.shift();return"M"+a.x+" "+a.y+e.map((function(n,l){var r,s,u,o=e[l+1],c=e[l-1]||a,i=o&&(s=n,u=c,Ua((r=o).x+u.x)===Ua(2*s.x)&&Ua(r.y+u.y)===Ua(2*s.y));if(!o||i)return"L"+n.x+" "+n.y;var d=Math.min(qa(c,n),qa(o,n)),p=d/2<t?d/2:t,m=Ia(c,n,p),f=Ia(o,n,p);return"L"+m.x+" "+m.y+"S"+n.x+" "+n.y+" "+f.x+" "+f.y})).join("")}var Ea={props:["smooth","data","boundary","radius","id","max","min","color","width","dash"],render:function(){var e,t=this,a=t.data,n=t.smooth,l=t.boundary,r=t.radius,s=t.id,u=t.max,o=t.min,c=t.width,i=t.dash,d=La(function(e,t,a){var n=t.minX,l=t.minY,r=t.maxX,s=t.maxY,u=a.max,o=a.min,c=e.map((function(e){return"number"==typeof e?e:e.value})),i=Math.min.apply(Math,c.concat([o]))-.001,d=(r-n)/(c.length-1),p=(s-l)/(Math.max.apply(Math,c.concat([u]))+.001-i);return c.map((function(e,t){return{x:t*d+n,y:s-(e-i)*p+1e-5*+(t===c.length-1)-1e-5*+(0===t)}}))}(a,l,{max:u,min:o}),n?r:0);return e=this.color?this.color:"url(#"+s+")",w("path",{d:d,fill:"none",stroke:e,"stroke-width":c,"stroke-dasharray":i})}},Va={props:["boundary","max","min"],render:function(){var e=this.boundary;return[w("text",{x:e.minX,y:e.minY-2,fill:"#CCCCCC88","font-size":"0.6em"},Math.floor(this.max/1e3)),w("line",{x1:e.minX,y1:e.minY,x2:e.maxX,y2:e.minY,stroke:"#CCCCCC88"}),w("text",{x:e.minX,y:e.maxY-2,fill:"#CCCCCC88","font-size":"0.6em"},Math.floor(this.min/1e3)),w("line",{x1:e.minX,y1:e.maxY,x2:e.maxX,y2:e.maxY,stroke:"#CCCCCC88"})]}},Ya={props:["gradient","gradientDirection","id"],render:function(){var e=this,t=e.gradient,a=e.gradientDirection,n=e.id,l=t.length-1||1,r=t.slice().reverse().map((function(e,t){return w("stop",{offset:t/l,"stop-color":e})}));return w("defs",[w("linearGradient",{id:n,x1:+("left"===a),y1:+("top"===a),x2:+("right"===a),y2:+("bottom"===a)},r)])}},Ba={name:"Trend",props:{data:{type:Array,required:!0},autoDraw:Boolean,autoDrawDuration:{type:Number,default:2e3},autoDrawEasing:{type:String,default:"ease"},gradient:{type:Array,default:function(){return["#000"]}},gradientDirection:{type:String,default:"top"},max:{type:Number,default:-1/0},min:{type:Number,default:1/0},height:Number,width:Number,padding:{type:Number,default:8},radius:{type:Number,default:10},smooth:Boolean},watch:{data:{immediate:!0,handler:function(e){var t=this;this.$nextTick((function(){if(!t.$isServer&&t.$refs.path&&t.autoDraw){var e=t.$refs.path.$el,a=e.getTotalLength();e.style.transition="none",e.style.strokeDasharray=a+" "+a,e.style.strokeDashoffset=Math.abs(a-(t.lastLength||0)),e.getBoundingClientRect(),e.style.transition="stroke-dashoffset "+t.autoDrawDuration+"ms "+t.autoDrawEasing,e.style.strokeDashoffset=0,t.lastLength=a}}))}}},render:function(){if(this.data&&!(this.data.length<2)){var e=this.width,t=this.height,a=this.padding,n=e||300,l=t||75,r={minX:a,minY:a,maxX:n-a,maxY:l-a};return w("svg",{width:e||"100%",height:t||"25%",viewBox:"0 0 "+n+" "+l},[w(Ya,{gradient:this.gradient,gradientDirection:this.gradientDirection,id:"stats"}),w(Va,{boundary:r,max:Math.max.apply(Math,this.data.concat([this.max])),min:Math.min.apply(Math,this.data.concat([this.min]))}),w(Ea,{smooth:this.smooth,data:this.data,boundary:r,radius:this.radius,max:this.max,min:this.min,id:"stats",ref:"path",width:1,dash:"0"})])}}},Ra={name:"Trends",props:{data:{type:Array,required:!0},colors:{type:Array,required:!0},min:{type:Number,default:1/0},height:Number,width:Number,padding:{type:Number,default:8},radius:{type:Number,default:10},smooth:Boolean},render:function(){if(this.data){var e=this.width,t=this.height,a=this.padding,n=e||300,l=t||150,r={minX:a,minY:a,maxX:n-a,maxY:l-a},s=10;for(let e=0;e<this.data.length;e++){const t=this.data[e];if(t&&t.length>1)for(let e=0;e<t.length;e++)s=Math.max(s,t[e])}var u=[];for(let e=0;e<this.data.length;e++){const t=this.data[e];t&&t.length>1&&u.push(w(Ea,{smooth:this.smooth,data:t,boundary:r,radius:this.radius,max:s,min:this.min,id:"stats",ref:"path"+e,color:this.colors[e],width:0==e?1.3:1,dash:0==e?"2 2":"0"}))}if(0!=u.length)return w("svg",{width:e||"100%",height:t||"25%",viewBox:"0 0 "+n+" "+l},[w(Va,{boundary:r,max:s,min:this.min}),u])}}};const Ja={style:{width:"400px"}},za={class:"text-center"},Xa=m("account"),$a=m("compte"),Ka={class:"mt-3 mb-3"},Ga={class:"text-center mb-6"},Wa={class:"dropdown"},Za={class:"btn btn-secondary btn-lg dropdown-toggle",type:"button",id:"dropdownMenuButton1","data-bs-toggle":"dropdown","aria-expanded":"false"},Qa={class:"dropdown-menu dropdown-menu-dark dropdown-menu-end","aria-labelledby":"dropdownMenuButton1"},Ha={key:0},en={class:"display-3 text-center"},tn={class:"align-baseline",style:{"font-size":"50%"}},an=c("small",null," Ü",-1),nn={key:0,class:"display-5 text-center"},ln=m("bank"),rn=m("banque"),sn={key:1,class:"display-5 text-center"},un=m("wallet"),on=m("compte simple"),cn={key:2,class:"display-5 text-center"},dn=m("Üman"),pn=m("Ümain"),mn={class:"text-center mt-4"},fn=m("transaction"),yn=m("transaction"),hn={key:3,class:"mb-4 justify-content-center"},gn={class:"input-group",style:{width:"400px"}},bn={class:"input-group-text",for:"txMessage",style:{width:"90px"}},xn=m(" value "),vn=m(" valeur "),_n=c("small",{class:"input-group-text"},"Ü",-1),wn={class:"input-group-text",for:"txTo"},Cn=m(" tö "),An=m(" à "),kn={disabled:"",value:""},Tn=m("someöne"),Sn=m("qüi"),Dn={class:"input-group"},Mn={class:"input-group-text",for:"txMessage",style:{width:"90px"}},On=m("message"),jn=m("message"),Pn={class:"text-center mt-4"},Nn=m("stats"),Fn=m("stats"),Un={class:"text-center mt-4"},qn=m("diary"),In=m("journal"),Ln={class:"list-group list-group-flush",style:{"max-width":"440px"}},En={class:"d-flex w-100 justify-content-between"},Vn={key:0},Yn={style:{width:"80px"},class:"badge bg-light text-dark text-right"},Bn=c("small",null," Ü",-1),Rn={style:{width:"50px"},class:"d-inline-block text-center"},Jn=m(" to "),zn=m(" à "),Xn={key:1},$n={style:{width:"80px"},class:"badge bg-primary text-right"},Kn=c("small",null," Ü",-1),Gn={style:{width:"50px"},class:"d-inline-block text-center"},Wn=m(" from "),Zn=m(" de "),Qn={expose:[],setup(t){const a=e({account:null,accounts:y((()=>Y.accounts.filter((e=>"bank"!=e.role)))),otherAccounts:y((()=>Y.accounts.filter((e=>"bank"!=e.role&&e.name!=a.account.name)))),stats:[],transactions:[],tx:{from:"",to:"",message:"",value:1}}),n=()=>{a.account&&(a.transactions=Y.getAccountTx(a.account.name,10).reverse(),a.stats=Y.getAccountStats(a.account.name,"day"))};C((()=>a.account),(()=>{n()})),C((()=>Y.currency),n,{deep:!0});const l=e=>Y.currencyDecimal(e).slice(-2),r=e=>{if("!1Ucreation"==e)return X({en:"> u crëate Ü!",fr:"> crëation de Ü !"});if(0==e.indexOf("!revaluation%")){let t=e.split("%")[1];return X({en:"> all the Ü melt by "+t+"%!",fr:"> tous les Ü fondent de "+t+"% !"})}return e?"> "+e:""};return(e,t)=>{return u(),o("div",Ja,[c("h4",za,[c(i(K),null,{default:d((()=>[Xa])),_:1}),c(i($),null,{default:d((()=>[$a])),_:1})]),c("div",Ka,[c("h2",Ga,[c("div",Wa,[c("button",Za,_(i(a).account?i(a).account.name:i(X)({en:"account",fr:"compte"})),1),c("ul",Qa,[(u(!0),o(x,null,v(i(a).accounts,(e=>(u(),o("li",{value:e.name,key:e.name},[c("button",{class:"dropdown-item",type:"button",onClick:t=>i(a).account=e},_(e.name),9,["onClick"])],8,["value"])))),128))])])]),i(a).account?(u(),o("div",Ha,[c("div",en,[c("span",null,_((s=i(a).account.balance,Y.currencyDecimal(s).slice(0,-3))),1),c("small",tn,"."+_(l(i(a).account.balance)),1),an]),"bank"==i(a).account.role?(u(),o("p",nn,[c(i(K),null,{default:d((()=>[ln])),_:1}),c(i($),null,{default:d((()=>[rn])),_:1})])):"wallet"==i(a).account.role?(u(),o("p",sn,[c(i(K),null,{default:d((()=>[un])),_:1}),c(i($),null,{default:d((()=>[on])),_:1})])):(u(),o("p",cn,[c(i(K),null,{default:d((()=>[dn])),_:1}),c(i($),null,{default:d((()=>[pn])),_:1})])),c("h4",mn,[c(i(K),null,{default:d((()=>[fn])),_:1}),c(i($),null,{default:d((()=>[yn])),_:1})]),"bank"==i(a).account.role||i(a).account.balance>0?(u(),o("form",hn,[c("div",null,[c("div",gn,[c("label",bn,[c(i(K),null,{default:d((()=>[xn])),_:1}),c(i($),null,{default:d((()=>[vn])),_:1})]),p(c("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>i(a).tx.value=e),type:"number",max:Math.round(i(a).account.balance/100),step:"any",min:"0",class:"form-control text-right"},null,8,["max"]),[[g,i(a).tx.value]]),_n,c("label",wn,[c(i(K),null,{default:d((()=>[Cn])),_:1}),c(i($),null,{default:d((()=>[An])),_:1})]),p(c("select",{"onUpdate:modelValue":t[2]||(t[2]=e=>i(a).tx.to=e),id:"txTo",class:"form-select"},[c("option",kn,[c(i(K),null,{default:d((()=>[Tn])),_:1}),c(i($),null,{default:d((()=>[Sn])),_:1})]),(u(!0),o(x,null,v(i(a).otherAccounts,(e=>(u(),o("option",{value:e.name,key:e.name},[c("strong",null,_(e.name),1)],8,["value"])))),128))],512),[[h,i(a).tx.to]]),c("button",{type:"button",class:"btn btn-primary ml-3",onClick:t[3]||(t[3]=e=>(a.tx.from=a.account.name,console.log(a.tx),Y.doTx(a.tx),void n()))},"ök!")]),c("div",Dn,[c("label",Mn,[c(i(K),null,{default:d((()=>[On])),_:1}),c(i($),null,{default:d((()=>[jn])),_:1})]),p(c("input",{"onUpdate:modelValue":t[4]||(t[4]=e=>i(a).tx.message=e),type:"text",maxlength:"32",class:"form-control",id:"txMessage"},null,512),[[g,i(a).tx.message]])])])])):b("",!0),c("h4",Pn,[c(i(K),null,{default:d((()=>[Nn])),_:1}),c(i($),null,{default:d((()=>[Fn])),_:1})]),c(i(Ba),{data:i(a).stats,gradientDirection:"top",gradient:["#df691a","#a54f15","#65300d"],padding:10,radius:8,"stroke-width":1,"stroke-linecap":"butt",min:0,max:1e3,height:200,width:400,"auto-draw":"",smooth:""},null,8,["data"]),c("h4",Un,[c(i(K),null,{default:d((()=>[qn])),_:1}),c(i($),null,{default:d((()=>[In])),_:1})]),c("ul",Ln,[(u(!0),o(x,null,v(i(a).transactions,(e=>{return u(),o("li",{key:e.id,class:"list-group-item list-group-item-action"},[c("div",En,[c("div",null,[e.from==i(a).account.name?(u(),o("h5",Vn,[c("span",Yn,[m(_(i(Y).currencyDecimal(e.value)),1),Bn]),c("span",Rn,[c(i(K),null,{default:d((()=>[Jn])),_:1}),c(i($),null,{default:d((()=>[zn])),_:1})]),c("strong",null,[c("span",null,_(e.to),1)])])):(u(),o("h5",Xn,[c("span",$n,[m(_(i(Y).currencyDecimal(e.value)),1),Kn]),c("span",Gn,[c(i(K),null,{default:d((()=>[Wn])),_:1}),c(i($),null,{default:d((()=>[Zn])),_:1})]),c("strong",null,[c("span",null,_(e.from),1)])])),m(" "+_(r(e.message)),1)]),c("small",null,_((t=e.day,t>=Y.currency.elapsedTime?X({en:"today",fr:"aujourd'hui"}):t==Y.currency.elapsedTime-1?X({en:"yesterday",fr:"hier"}):X({en:Y.currency.elapsedTime-t+" days ago",fr:"il y a "+(Y.currency.elapsedTime-t)+" jours"}))),1)])]);var t})),128))])])):b("",!0)])]);var s}}},Hn={class:"text-center"},el=m("accounts"),tl=m("comptes"),al={class:"input-group"},nl={class:"input-group-text"},ll=m("name"),rl=m("nom"),sl={class:"input-group-text ml-5"},ul=m("role"),ol=m("rôle"),cl={value:"human"},il=m("Üman"),dl=m("Ümain"),pl={value:"wallet"},ml=m("wället"),fl=m("sïmple"),yl=m("nëw!"),hl=m("noüveau!"),gl={class:"table table-hover mt-5"},bl=m("stats"),xl=m("stats"),vl=m("name"),_l=m("nom"),wl=m("role"),Cl=m("rôle"),Al=m("balance"),kl=m("solde"),Tl=c("th",null,null,-1),Sl={class:"text-center"},Dl={key:0,class:"badge bg-primary mr-3",style:{width:"50px"}},Ml=c("small",null,"Ü",-1),Ol=m("man"),jl=c("small",null,"Ü",-1),Pl=m("main"),Nl={key:1,class:"badge bg-secondary mr-3",style:{width:"50px"}},Fl=m("wället"),Ul=m("sïmple"),ql={key:2,class:"badge bg-danger mr-3",style:{width:"50px"}},Il=m("bänk"),Ll=m("bänque"),El=m("change"),Vl=m("modifier"),Yl={class:"text-right"},Bl=c("small",{class:"mr-3"}," Ü ",-1),Rl=m("reset"),Jl=m("raz"),zl={class:"text-right"},Xl={expose:[],props:{colors:Array},setup(t){const{colors:a}=t,n=e({onlySelected:!1,sortKey:"name",sortOrder:1,newAccount:{name:"",role:"human"}}),l=y((()=>{let e=Y.accounts.filter((e=>"bank"!=e.role));return n.onlySelected&&(e=e.filter((e=>Y.isSelected(e)))),e.sort(((e,t)=>{let a=e[n.sortKey],l=t[n.sortKey];return(a===l?0:a>l?1:-1)*n.sortOrder}))})),r=e=>{e==n.sortKey&&(n.sortOrder=-n.sortOrder),n.sortKey=e},s=e=>{let t=Y.selectedAccounts.indexOf(e.name);return t<0?null:a[t%a.length]};return(e,t)=>(u(),o("div",null,[c("h4",Hn,[c(i(K),null,{default:d((()=>[el])),_:1}),c(i($),null,{default:d((()=>[tl])),_:1})]),c("div",al,[c("span",nl,[c(i(K),null,{default:d((()=>[ll])),_:1}),c(i($),null,{default:d((()=>[rl])),_:1})]),p(c("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>i(n).newAccount.name=e),type:"text",class:"form-control",id:"accountName",maxlength:"10"},null,512),[[g,i(n).newAccount.name]]),c("span",sl,[c(i(K),null,{default:d((()=>[ul])),_:1}),c(i($),null,{default:d((()=>[ol])),_:1})]),p(c("select",{"onUpdate:modelValue":t[2]||(t[2]=e=>i(n).newAccount.role=e),class:"form-control"},[c("option",cl,[c(i(K),null,{default:d((()=>[il])),_:1}),c(i($),null,{default:d((()=>[dl])),_:1})]),c("option",pl,[c(i(K),null,{default:d((()=>[ml])),_:1}),c(i($),null,{default:d((()=>[fl])),_:1})])],512),[[h,i(n).newAccount.role]]),c("button",{type:"button",disabled:3>i(n).newAccount.name.length||i(Y).accounts.some((e=>e.name==i(n).newAccount.name)),class:"btn btn-primary ml-5",onClick:t[3]||(t[3]=e=>(n.newAccount.name=n.newAccount.name.trim(),void Y.createAccount(n.newAccount)))},[c(i(K),null,{default:d((()=>[yl])),_:1}),c(i($),null,{default:d((()=>[hl])),_:1})],8,["disabled"])]),c("table",gl,[c("thead",null,[c("tr",null,[c("th",{onClick:t[4]||(t[4]=e=>i(n).onlySelected=!i(n).onlySelected),class:[{"bg-primary":i(n).onlySelected},"pointer"],style:{width:"20px"}},[c(i(K),null,{default:d((()=>[bl])),_:1}),c(i($),null,{default:d((()=>[xl])),_:1})],2),c("th",{onClick:t[5]||(t[5]=e=>r("name")),class:"pointer",style:{width:"250px"}},[c(i(K),null,{default:d((()=>[vl])),_:1}),c(i($),null,{default:d((()=>[_l])),_:1})]),c("th",{onClick:t[6]||(t[6]=e=>r("role")),class:"text-center pointer"},[c(i(K),null,{default:d((()=>[wl])),_:1}),c(i($),null,{default:d((()=>[Cl])),_:1})]),c("th",{onClick:t[7]||(t[7]=e=>r("balance")),class:"text-right pointer"},[c(i(K),null,{default:d((()=>[Al])),_:1}),c(i($),null,{default:d((()=>[kl])),_:1})]),Tl])]),c("tbody",null,[(u(!0),o(x,null,v(i(l),(e=>(u(),o("tr",{key:e.name},[c("td",{style:{"background-color":s(e)},onClick:t=>i(Y).select(e),class:"pointer"},null,12,["onClick"]),c("td",{onClick:t=>i(Y).select(e),class:"pointer"},_(e.name),9,["onClick"]),c("td",Sl,["human"==e.role?(u(),o("span",Dl,[c(i(K),null,{default:d((()=>[Ml,Ol])),_:1}),c(i($),null,{default:d((()=>[jl,Pl])),_:1})])):"wallet"==e.role?(u(),o("span",Nl,[c(i(K),null,{default:d((()=>[Fl])),_:1}),c(i($),null,{default:d((()=>[Ul])),_:1})])):(u(),o("span",ql,[c(i(K),null,{default:d((()=>[Il])),_:1}),c(i($),null,{default:d((()=>[Ll])),_:1})])),"bank"!=e.role?(u(),o("a",{key:3,href:"#",onClick:A((t=>(e=>{let t="human"==e.role?"wallet":"human";Y.updateAccount(e,{role:t})})(e)),["stop","prevent"])},[c(i(K),null,{default:d((()=>[El])),_:1}),c(i($),null,{default:d((()=>[Vl])),_:1})],8,["onClick"])):b("",!0)]),c("td",Yl,["bank"!=e.role?(u(),o(x,{key:0},[c("strong",null,[m(_(i(Y).currencyDecimal(e.balance)),1),Bl]),c("a",{href:"#",onClick:A((t=>(e=>{Y.updateAccount(e,{balance:0})})(e)),["stop","prevent"])},[c(i(K),null,{default:d((()=>[Rl])),_:1}),c(i($),null,{default:d((()=>[Jl])),_:1})],8,["onClick"])],64)):b("",!0)]),c("td",zl,[e.name!=i(Y).name?(u(),o("a",{key:0,href:"#",onClick:A((t=>(e=>{const t=e.name;confirm(X({fr:"êtes vous sûr de supprimer "+t+" ?",en:"Are you sure to delete "+t+"?"}))&&Y.deleteAccount(e)})(e)),["stop","prevent"])},"x",8,["onClick"])):b("",!0)])])))),128))])])]))}},$l={class:"text-center"},Kl=m("stats"),Gl=m("stats"),Wl={class:"w-100 d-flex justify-content-between"},Zl={class:"input-group w-auto ml-4"},Ql=c("label",{class:"input-group-text"}," 100 ",-1),Hl={value:"day"},er=m("days"),tr=m("jours"),ar={value:"month"},nr=m("months"),lr=m("mois"),rr={value:"year"},sr=m("years"),ur=m("années"),or={class:"ms-auto w-auto input-group mr-4"},cr={class:"input-group-text"},ir=m("referential"),dr=m("référentiel"),pr={value:"relative"},mr=m("relative"),fr=m("relatif"),yr={value:"quantitative"},hr=m("quantitative"),gr=m("quantitatif"),br={value:"average"},xr=m("average"),vr=m("moyenne"),_r={expose:[],props:{colors:Array},setup(t){const{colors:n}=t,l=e({referential:"relative",statType:"day",stats:[]}),r=()=>{let e=Y.getAccountStats(Y.name,l.statType),t=[[]];for(let a=1;a<Y.selectedAccounts.length;a++){const n=Y.selectedAccounts[a];if(n){let a=Y.getAccountStats(n,l.statType);if("average"==l.referential)for(let t=0;t<a.length;t++)a[t]=0==e[t].average?0:a[t]/e[t].average*1e5;else if("quantitative"==l.referential)for(let t=0;t<a.length;t++)a[t]=a[t]*e[t].quantitative;t.push(a)}}"average"==l.referential?t[0]=new Array(e.length).fill(1e5):"relative"==l.referential?t[0]=e.map((e=>e.average)):"quantitative"==l.referential&&(t[0]=e.map((e=>e.average*e.quantitative))),l.stats=t};return C((()=>Y.selectedAccounts.length),r),C((()=>Y.currency),r,{deep:!0}),C((()=>l.referential),r),C((()=>l.statType),r),a((()=>{r()})),(e,t)=>(u(),o("div",null,[c("h4",$l,[c(i(K),null,{default:d((()=>[Kl])),_:1}),c(i($),null,{default:d((()=>[Gl])),_:1})]),c(i(Ra),{data:i(l).stats,colors:n,padding:10,radius:8,"stroke-width":1,"stroke-linecap":"butt",min:0,"auto-draw":"",smooth:""},null,8,["data"]),c("div",Wl,[c("div",Zl,[Ql,p(c("select",{"onUpdate:modelValue":t[1]||(t[1]=e=>i(l).statType=e)},[c("option",Hl,[c(i(K),null,{default:d((()=>[er])),_:1}),c(i($),null,{default:d((()=>[tr])),_:1})]),c("option",ar,[c(i(K),null,{default:d((()=>[nr])),_:1}),c(i($),null,{default:d((()=>[lr])),_:1})]),c("option",rr,[c(i(K),null,{default:d((()=>[sr])),_:1}),c(i($),null,{default:d((()=>[ur])),_:1})])],512),[[h,i(l).statType]])]),c("div",or,[c("label",cr,[c(i(K),null,{default:d((()=>[ir])),_:1}),c(i($),null,{default:d((()=>[dr])),_:1})]),p(c("select",{"onUpdate:modelValue":t[2]||(t[2]=e=>i(l).referential=e)},[c("option",pr,[c(i(K),null,{default:d((()=>[mr])),_:1}),c(i($),null,{default:d((()=>[fr])),_:1})]),c("option",yr,[c(i(K),null,{default:d((()=>[hr])),_:1}),c(i($),null,{default:d((()=>[gr])),_:1})]),c("option",br,[c(i(K),null,{default:d((()=>[xr])),_:1}),c(i($),null,{default:d((()=>[vr])),_:1})])],512),[[h,i(l).referential]])])])]))}},wr=c("h1",{class:"display-1 text-center mb-5"},[c("img",{src:"/favicon64x64.png"}),c("span",{class:"align-middle"},[m(" f"),c("small",null,"Ü"),m("ne")])],-1),Cr={class:"lead text-center mb-3"},Ar=c("strong",null,[m("f"),c("small",null,"Ü"),m("ne")],-1),kr=m(" is a web app to test and play with a simple "),Tr=c("a",{href:"https://libre-currency.org"},"Libre Currency",-1),Sr=m(" called "),Dr=c("strong",null,[m("f"),c("small",null,"Ü"),m("ne")],-1),Mr=m(" (pronounced /fən/ like fun) "),Or=c("strong",null,[m("f"),c("small",null,"Ü"),m("ne")],-1),jr=m(" est une appli web qui permet de jouer avec une simple "),Pr=c("a",{href:"https://monnaie-libre.fr/"},"Monnaie Libre",-1),Nr=m(" appelée "),Fr=c("strong",null,[m("f"),c("small",null,"Ü"),m("ne")],-1),Ur=m(" (prononcée /fən/ comme fun en anglais) "),qr={class:"lead text-center mb-5"},Ir=m(" a "),Lr=c("small",null,"Ü",-1),Er=m("man account create some new "),Vr=c("small",null,"Ü",-1),Yr=m(" (the "),Br=c("small",null,"Ü",-1),Rr=m("nit of the f"),Jr=c("small",null,"Ü",-1),zr=m("ne currency) each day"),Xr=c("br",null,null,-1),$r=c("small",null,[m("old created "),c("strong",null,[c("small",null,"Ü"),m("nits")]),m(" melt by a given percentage each "),c("strong",null,"revaluation period")],-1),Kr=c("br",null,null,-1),Gr=m(" un compte "),Wr=c("small",null,"Ü",-1),Zr=m("main crée de nouvelles "),Qr=c("small",null,"Ü",-1),Hr=m(" (l'"),es=c("small",null,"Ü",-1),ts=m("nité de la monnaie f"),as=c("small",null,"Ü",-1),ns=m("ne) chaque jour"),ls=c("br",null,null,-1),rs=c("small",null,[m("les anciennes "),c("strong",null,[c("small",null,"Ü"),m("nités")]),m(" fondent d'un certain pourcentage à chaque "),c("strong",null,"période de réévaluation")],-1),ss=c("br",null,null,-1),us={class:"d-flex align-items-start flex-wrap mt-5",style:{"justify-content":"space-evenly"}},os={style:{"min-width":"700px"}};let cs=JSON.parse(localStorage.getItem("state"));window.location.hash&&(cs||(cs={currency:{}}),Object.assign(cs.currency,(e=>{const t=new URLSearchParams(e);return{mode:"grew"==t.get("m")?"grew":"melt",expression:t.get("e"),uPerDay:parseInt(t.get("upd")),revaluationTime:parseInt(t.get("rt")),stepTime:parseInt(t.get("st"))}})(window.location.hash.substring(1)))),Y.restoreState(cs);var is={mounted:(e,t)=>{if("function"!=typeof t.value){let e=`[longclick:] provided expression '${t.expression}' is not a function, but has to be`;console.warn(e)}let a=null,n=null;const l=e=>{"click"===e.type&&0!==e.button||null===a&&(s(),a=setTimeout((()=>{n=setInterval((()=>{s()}),50),s()}),200))},r=()=>{null!==a&&(clearTimeout(a),a=null),n&&(clearInterval(n),n=null)},s=e=>{t.value(e)};["mousedown","touchstart"].forEach((t=>e.addEventListener(t,l))),["click","mouseout","touchend","touchcancel"].forEach((t=>e.addEventListener(t,r)))}};k({expose:[],setup(e){C((()=>Y.currency),(()=>{window.location.hash="#"+(e=>{const t=new URLSearchParams;return t.append("e",e.expression),t.append("m",e.mode),t.append("upd",e.uPerDay),t.append("rt",e.revaluationTime),t.append("st",e.stepTime),t.toString()})(Y.currency),localStorage.setItem("state",JSON.stringify(Y.getState()))}));const t=["#FFFFFFDD","#FE4365DD","#F9CDADDD","#83AF9BDD","#A7226EDD","#F26B38DD","#F7DB4FDD","#CAFDE0DD","#FFB8EADD","#C3421ADD","#4F6ABFDD"],a=[];return Y.accounts.length<=1&&(a.push({name:"Alice",balance:1e4,role:"human"}),a.push({name:"Bob",balance:2e4,role:"human"}),a.push({name:"Carole",balance:0,role:"human"})),(e,n)=>(u(),o("div",null,[wr,c("p",Cr,[c(i(K),null,{default:d((()=>[Ar,kr,Tr,Sr,Dr,Mr])),_:1}),c(i($),null,{default:d((()=>[Or,jr,Pr,Nr,Fr,Ur])),_:1})]),c("p",qr,[c(i(K),null,{default:d((()=>[Ir,Lr,Er,Vr,Yr,Br,Rr,Jr,zr,Xr,$r,Kr])),_:1}),c(i($),null,{default:d((()=>[Gr,Wr,Zr,Qr,Hr,es,ts,as,ns,ls,rs,ss])),_:1})]),c(R,{accounts:a,selectedAccounts:a},{default:d((()=>[c(Ve,{class:"m-auto"}),c("div",us,[c("div",null,[c(va,{class:"mx-auto",style:{width:"400px"}}),c(Fa,{class:"mx-auto mt-5",style:{width:"450px"}}),c(Qn,{class:"mx-auto mt-5"})]),c("div",os,[c(_r,{colors:t,class:"w-auto"}),c(Xl,{colors:t,class:"mt-5"})])])])),_:1})]))}}).directive("longclick",is).mount("#app");

import{r as e,a as t,e as n,o as a,b as l,c as s,d as r,f as u,g as o,u as c,w as i,h as d,F as m,p,i as f,j as y,t as g,k as h,l as b,m as x,n as v,q as _,v as w,s as k,x as T,y as A,z as M,A as D,B as S}from"./vendor.3823232d.js";!function(e=".",t="__import__"){try{self[t]=new Function("u","return import(u)")}catch(n){const a=new URL(e,location),l=e=>{URL.revokeObjectURL(e.src),e.remove()};self[t]=e=>new Promise(((n,s)=>{const r=new URL(e,a);if(self[t].moduleMap[r])return n(self[t].moduleMap[r]);const u=new Blob([`import * as m from '${r}';`,`${t}.moduleMap['${r}']=m;`],{type:"text/javascript"}),o=Object.assign(document.createElement("script"),{type:"module",src:URL.createObjectURL(u),onerror(){s(new Error(`Failed to import: ${e}`)),l(o)},onload(){n(self[t].moduleMap[r]),l(o)}});document.head.appendChild(o)})),self[t].moduleMap={}}}("/assets/");const C="human",E="bank",P="grew",j="melt",I={day:"day",month:"month",year:"year"},O={day:1,month:60,year:360};let N=0,q={},F=0;const R={name:"fÜne",logo:"fї",uValue:1e3,isPlaying:!1,doTx:(e,t=!0)=>{let n=Object.assign({from:"",to:"",message:"",value:0,date:(new Date).toISOString(),day:q.currency.elapsedTime},e);var a=q.accounts[n.from],l=q.accounts[n.to];return n.value<=0||!a||!l||a==l||a.role!=E&&a.balance-n.value<0?null:(l.role!=E&&(l.balance+=n.value),a.role!=E&&(a.balance-=n.value,a.balance<10&&(a.balance=0)),n.balanceFrom=a.balance,n.balanceTo=l.balance,q.transactions.push(n),q.transactions.length>100&&(q.transactions=q.transactions.slice(q.transactions.length-100)),t&&Y(),n)},getCurrency:()=>Object.assign({},q.currency),updateCurrency:e=>{const t=R.isPlaying;return t&&R.stop(),Object.assign(q.currency,e),t&&R.play(),Object.assign({},q.currency)},getAccount:e=>q.accounts[e],getAccounts:()=>Object.values(q.accounts),createAccount:e=>{if(e.name=e.name.trim(),!e.name||q.accounts[e.name])return null;let t=q.accounts[e.name]=Object.assign({name:"",balance:0,role:"wallet",date:(new Date).toISOString(),creationDay:q.currency.elapsedTime},e);return Y(),t},updateAccount:(e,t)=>{let n=q.accounts[e];return!n||"bank"==n.role||t.name&&e!=t.name?null:(n=Object.assign(n,t),Y(),n)},deleteAccount:e=>{let t=q.accounts[e];return t&&t.name!=R.name?(delete q.accounts[e],delete q.stats[e],Y(),t):null},getAccountTx:(e,t)=>{if(!q.accounts[e])return null;let n=q.transactions.filter((t=>t.from==e||t.to==e));return t>0&&t<n.length&&(n=n.slice(-t)),n},getAccountStats:(e,t=I.day)=>{if((t=I[t])||(t=I.day),!q.accounts[e])return null;const n=q.stats[e];if(!n)return[];const a=n[t];if(!a)return[];let l=0;t==I.day&&(l=F);let s=Math.floor(q.currency.elapsedTime/O[t])%100;return l==s?[a[l],a[l]]:s>l?a.slice(l,s+1):a.slice(l).concat(a.slice(0,s+1))},getState:()=>({currency:q.currency,accounts:q.accounts,transactions:q.transactions,stats:q.stats})},U={date:(new Date).toISOString(),stepTime:1,uPerDay:1,elapsedTime:0,revaluationTime:1,nbMembers:0,monetaryMass:0,mode:j,lastMelt:0,average:0,quantitative:1,expression:"0.1"};R.expressionParser=(e,t)=>parseFloat(e);const L=/!x(\d+)/,B=R.uValue,V=()=>({isStatMonth:q.currency.elapsedTime%O.month==0,isStatYear:q.currency.elapsedTime%O.year==0,statDayIndex:q.currency.elapsedTime%100,statMonthIndex:q.currency.elapsedTime/O.month%100,statYearIndex:q.currency.elapsedTime/O.year%100}),Y=()=>{let e=0,t=0;const n=V();Object.values(q.accounts).forEach((a=>{const l=a.name.match(L);let s=1;l&&(s=parseInt(l[1])),a.role==C&&(t+=s),a.role!=E&&(e+=a.balance*s,((e,t,n=null)=>{n||(n=V());let a=q.stats[e.name];a||(a={},a[I.day]=new Array(100).fill(0),a[I.month]=new Array(100).fill(0),a[I.year]=new Array(100).fill(0),q.stats[e.name]=a),a[I.day][n.statDayIndex]=t,n.isStatMonth&&(a[I.month][n.statMonthIndex]=t),n.isStatYear&&(a[I.year][n.statYearIndex]=t)})(a,a.balance,n))})),q.currency.nbMembers=t,q.currency.monetaryMass=e,q.currency.average=t>0?Math.floor(e/t):0,((e=null)=>{e||(e=V());let t=Object.assign({},q.currency),n=q.stats[R.name];n||(n={},n[I.day]=new Array(100).fill({}),n[I.month]=new Array(100).fill({}),n[I.year]=new Array(100).fill({}),q.stats[R.name]=n),n[I.day][e.statDayIndex]=t,e.isStatMonth&&(n[I.month][e.statMonthIndex]=t),e.isStatYear&&(n[I.year][e.statYearIndex]=t)})(n)},X=(e=!0)=>{q.currency.elapsedTime++,q.currency.elapsedTime>=100&&q.currency.elapsedTime%100==F&&(F=(F+1)%100);let t=0,n=0;const a=q.currency.uPerDay>=0?Math.floor(q.currency.uPerDay):0,l=B*q.currency.revaluationTime*a,s=q.accounts[R.name],r=q.currency.elapsedTime%q.currency.revaluationTime==0;r&&q.currency.nbMembers>0&&(t=R.expressionParser(q.currency.expression,{M:q.currency.monetaryMass/l,N:q.currency.nbMembers,T:q.currency.elapsedTime}),q.currency.mode==P&&(t=1-1/(1+t)),t=Math.max(0,Math.min(1,t)),n=(100*t).toFixed(2)),Object.values(q.accounts).forEach((e=>{if(r&&t>0&&e.balance>9){let a=e.balance*t;a=Math.min(a>l?Math.ceil(a):Math.floor(a),e.balance),a<10&&(a=10),R.doTx({from:e.name,to:s.name,message:"!revaluation%"+n,value:a},!1)}e.role==C&&a>0&&R.doTx({from:s.name,to:e.name,message:"!1Ucreation",value:B*a},!1)})),r&&(q.currency.lastMelt=n,q.currency.quantitative=q.currency.quantitative*(1+1/(1/t-1))),Y(),e&&(N=setTimeout(X,1e3*q.currency.stepTime,!0)),R.onDayChange(q.currency.elapsedTime)};R.restoreState=e=>{e&&(e.currency&&(q.currency=Object.assign(U,e.currency)),e.accounts&&(q.accounts=e.accounts),e.transactions&&(q.transactions=e.transactions),e.stats&&(q.stats=e.stats))},R.start=(e,t)=>{R.restoreState(t),e&&(R.expressionParser=e),q.currency||(q.currency=U),q.accounts||(q.accounts={}),q.accounts[R.name]={name:R.name,balance:0,role:E,date:(new Date).toISOString(),creationDay:0},q.transactions||(q.transactions=[]),q.stats||(q.stats={})},R.onDayChange=()=>{},R.reset=()=>{R.stop(),Object.values(q.accounts).forEach((e=>{e.balance=0})),q.transactions=[],q.stats={},q.currency.elapsedTime=0,q.currency.lastMelt=0,q.currency.quantitative=1,F=0,Y()},R.play=(e=!0)=>{if(!R.isPlaying)return 0!=N&&(clearTimeout(N),N=0),R.isPlaying=e,X(e),!0},R.unplay=()=>{if(!R.isPlaying&&q.currency.elapsedTime>0){const e=(q.currency.elapsedTime-1)%100,t=q.stats[R.name][I.day][e];if(t&&t.elapsedTime==q.currency.elapsedTime-1)return R.updateCurrency(t),Object.values(q.accounts).forEach((t=>{t.role!=E&&(t.balance=q.stats[t.name][I.day][e])})),Y(),!0}return!1},R.stop=()=>{R.isPlaying&&(0!=N&&(clearTimeout(N),N=0),R.isPlaying=!1)};const $={color:"#FFFFFF"},z=e({name:R.name,isPlaying:!1,currency:{},accounts:[],selectedAccounts:new Map});z.selectedAccounts.set(R.name,$);const K=R.uValue;z.isSelected=e=>null!=z.selectedAccounts.get(e.name),z.select=e=>{if("bank"==e.role)return;let n=z.selectedAccounts.get(e.name);!n&&R.getAccount(e.name)?(n={color:t.randomColor()},z.selectedAccounts.set(e.name,n)):z.selectedAccounts.delete(e.name)},z.doTx=e=>{const t=R.doTx({from:e.from,to:e.to,message:e.message,value:Math.floor(e.value*K)});return t&&z.refresh(),t},z.updateCurrency=e=>(z.currency=R.updateCurrency(e),z.currency),z.addAccounts=e=>{e&&(e.forEach((e=>{R.createAccount(e)||R.updateAccount(e.name,e)})),z.refresh())},z.createAccount=e=>{let t=R.createAccount(e);return t&&(z.accounts.push(t),z.refresh()),t},z.updateAccount=(e,t)=>{let n=R.updateAccount(e.name,t);return n&&(n=Object.assign(e,n),z.refresh()),n},z.deleteAccount=e=>{let t=null;return R.deleteAccount(e.name)&&(z.isSelected(e)&&z.select(e),t=e,z.refresh()),t},z.getAccountTx=(e,t)=>R.getAccountTx(e,t),z.getAccountStats=(e,t=statTypes.day)=>R.getAccountStats(e,t),z.onDayChange=()=>{z.refresh()},z.refresh=()=>{z.accounts=R.getAccounts(),z.currency=R.getCurrency()},z.reset=()=>{R.reset(),z.refresh(),z.isPlaying=R.isPlaying},z.play=e=>{R.play(e)&&z.refresh(),z.isPlaying=R.isPlaying},z.unplay=()=>{R.unplay()&&z.refresh(),z.isPlaying=R.isPlaying},z.stop=()=>{R.stop(),z.isPlaying=R.isPlaying},z.getState=()=>{const e=R.getState();return e.selectedAccounts=Object.fromEntries(z.selectedAccounts),e},z.restoreState=e=>{e&&(e.selectedAccounts&&e.selectedAccounts[R.name]&&(z.selectedAccounts=new Map(Object.entries(e.selectedAccounts)),z.selectedAccounts.set(R.name,$)),R.restoreState(e),z.refresh())},z.currencyWithoutDecimal=e=>Math.floor(e/K),z.currencyDecimal=e=>(e/K).toFixed(2),R.onDayChange=z.onDayChange,R.start(n,{}),z.refresh();const J={expose:[],props:{currency:Object,accounts:Array,selectedAccounts:Array,autoPlay:Boolean},setup(e){const{currency:t,accounts:n,selectedAccounts:s}=e;return a((()=>{t&&z.updateCurrency(t),n&&z.addAccounts(n),s&&s.forEach((e=>{z.select(e)}))})),(e,t)=>l(e.$slots,"default")}},G=s("en"),W=e=>({render(){if(G.value==e)return this.$slots.default()}}),Q=e=>e[G.value],Z=e=>{G.value="fr"==e?"fr":"en"};Z((navigator.userLanguage||navigator.languages&&navigator.languages.length&&navigator.languages[0]||navigator.language||navigator.browserLanguage||navigator.systemLanguage).substring(0,2));const H=W("fr"),ee=W("en"),te={class:"mb-3 text-center"},ne={class:"input-group d-inline"},ae=o("i",{class:"fa fa-upload"},null,-1),le=d(" load"),se=d(" charger"),re=o("i",{class:"fa fa-download"},null,-1),ue=d(" save"),oe=d(" sauvegarder"),ce=o("i",{class:"fa fa-undo"},null,-1),ie=d(" reset"),de=d(" RAZ"),me={expose:[],setup(e){const t=e=>{const t=e.target.files[0];if(t){const e=new FileReader;e.onload=function(e){var t=e.target.result;n(t)},e.readAsText(t)}else alert(Q({en:"file not found",fr:"fichier introuvable"}));e.target.value=null},n=e=>{try{const t=JSON.parse(e);z.stop(),z.restoreState(t)}catch(t){console.log(t),alert(Q({en:"can not read the file",fr:"le fichier ne peut pas être lu"}))}};return(e,n)=>(r(),u("div",te,[o("div",ne,[o("label",{class:["btn btn-dark mb-0",{disabled:c(z).isPlaying}]},[ae,o(c(ee),null,{default:i((()=>[le])),_:1}),o(c(H),null,{default:i((()=>[se])),_:1}),o("input",{type:"file",hidden:"",onChange:t},null,32)],2),o("button",{class:"btn btn-light text-dark",onClick:n[1]||(n[1]=e=>(()=>{const e=z.getState(),t=JSON.stringify(e);var n=new Blob([t],{type:"text/plain;charset=utf-8"});m.saveAs(n,"fune_"+(new Date).toISOString().substring(0,16)+".fun")})()),disabled:c(z).isPlaying},[re,o(c(ee),null,{default:i((()=>[ue])),_:1}),o(c(H),null,{default:i((()=>[oe])),_:1})],8,["disabled"])]),o("button",{class:"btn btn-secondary ml-3",onClick:n[2]||(n[2]=e=>c(z).reset())},[ce,o(c(ee),null,{default:i((()=>[ie])),_:1}),o(c(H),null,{default:i((()=>[de])),_:1})])]))}};const pe=x();p("data-v-f51e1e54");const fe={class:"d-flex mx-auto align-items-center justify-content-end text-right pointer",style:{width:"400px"}},ye=o("span",{class:"display-5 ml-2 align-bottom"},[d("f"),o("small",null,"Ü"),d("ne")],-1),ge={class:"ml-auto"},he=d("day"),be=d("jour"),xe={class:"ml-1 display-5 font-monospace mr-2"},ve={class:"input-group d-inline ml-1 mr-3 w-auto"},_e=o("i",{class:"fa fa-step-backward"},null,-1),we=o("i",{class:"fa fa-step-forward"},null,-1),ke=o("i",{class:"fa fa-play"},null,-1),Te=o("i",{class:"fa fa-pause"},null,-1);f();const Ae=new IntersectionObserver((([e])=>e.target.classList.toggle("isSticky",e.intersectionRatio<1)),{rootMargin:"-1px 0px 0px 0px",threshold:[1]}),Me={expose:[],setup(e){const t=s(null),n=()=>{z.play(!1)},l=()=>{z.unplay()};return a((()=>{Ae.observe(t.value)})),(e,a)=>{const s=y("longclick");return r(),u("nav",{class:"navbar navbar-dark bg-dark w-100",ref:t},[o("div",fe,[o("div",{onClick:a[1]||(a[1]=e=>{window.scroll(0,0)}),class:"position-absolute icon",style:{left:"1em"}},[o("code",{class:"bg-primary p-1 display-5 text-light",title:c(z).name},"fї",8,["title"]),ye]),o("span",ge,[o(c(ee),null,{default:pe((()=>[he])),_:1}),o(c(H),null,{default:pe((()=>[be])),_:1})]),o("span",xe,g(1e3>=c(z).currency.elapsedTime?("000"+c(z).currency.elapsedTime).slice(-3):c(z).currency.elapsedTime),1),o("div",ve,[h(o("button",{class:"btn btn-outline-light bg-light text-dark btn-sm pr-1 pl-2",disabled:c(z).isPlaying},[_e],8,["disabled"]),[[s,l]]),h(o("button",{class:"btn btn-outline-light bg-dark text-light btn-sm pl-1 pr-2",disabled:c(z).isPlaying},[we],8,["disabled"]),[[s,n]])]),c(z).isPlaying?b("",!0):(r(),u("button",{key:0,class:"btn btn-primary mr-1",onClick:a[2]||(a[2]=e=>c(z).play()),style:{width:"63px"}},[ke])),c(z).isPlaying?(r(),u("button",{key:1,class:"btn btn-light mr-1",onClick:a[3]||(a[3]=e=>c(z).stop()),style:{width:"63px"}},[Te])):b("",!0)])],512)}},__scopeId:"data-v-f51e1e54"},De=e({"info-home-funiter":!0}),Se={expose:[],props:{infoId:String},setup(e){const{infoId:t}=e;return v((()=>null!=De[t])),(e,t)=>b("",!0)}},Ce={expose:[],props:{info:String},setup:e=>(e,t)=>b("",!0)},Ee={class:"text-center mb-3"},Pe=d("currency"),je=d("monnaie"),Ie=d("EN_info-currency"),Oe=d("FR_info-currency"),Ne={class:"input-group mb-1"},qe={class:"input-group-text"},Fe=d("Ü revaluation"),Re=d("réévaluation de Ü"),Ue={value:"melt"},Le=d("melting"),Be=d("fonte"),Ve={value:"grew"},Ye=d("growth"),Xe=d("croissance"),$e={class:"input-group-text pr-1"},ze=d("EN_info-currency-mode"),Ke=d("FR_info-currency-mode"),Je={class:"input-group mb-1"},Ge={key:0,class:"input-group-text"},We={key:1,class:"input-group-text"},Qe={class:"input-group-text pr-1"},Ze=d(" ) Ü(t) "),He=d("EN_info-currency-expression"),et=d("FR_info-currency-expression"),tt={class:"input-group mb-1"},nt={class:"input-group-text",for:"currencyUPerDay"},at=d("Ü per day"),lt=d("Ü par jour"),st={class:"input-group-text pr-1"},rt=d("Ü "),ut=d("EN_info-currency-uPerDay"),ot=d("FR_info-currency-uPerDay"),ct={class:"input-group mb-1"},it={class:"input-group-text",for:"currencyRevaluationTime"},dt=d("revaluation period"),mt=d("réévaluation"),pt={class:"input-group-text pr-1"},ft=d("day"),yt={key:0},gt=d("jour"),ht={key:0},bt=d("EN_info-currency-revaluationTime"),xt=d("FR_info-currency-revaluationTime"),vt={class:"input-group mb-1"},_t={class:"input-group-text",for:"currencyStepTime"},wt=d("day duration"),kt=d("durée d'un jour"),Tt={class:"input-group-text pr-1"},At=d("second"),Mt={key:0},Dt=d("seconde"),St={key:0},Ct=d("EN_info-currency-stepTime"),Et=d("FR_info-currency-stepTime"),Pt={key:0,class:"d-flex align-items-start flex-wrap mb-1",style:{"justify-content":"space-evenly"}},jt=d("ündo!"),It=d("annüler!"),Ot=d("üpdate!"),Nt=d("valïder!"),qt={class:"input-group mb-1 mt-3"},Ft=d("more data"),Rt=d("plus de données"),Ut=o("i",{class:"fa fa-plus-square position-absolute end-0 mr-3 pt-1"},null,-1),Lt=d("less data"),Bt=d("moins de données"),Vt=o("i",{class:"fa fa-minus-square position-absolute end-0 mr-3 pt-1"},null,-1),Yt={key:1},Xt={class:"input-group mb-1"},$t={class:"input-group-text",for:"currencyMass"},zt=d("monetary mass (M)"),Kt=d("masse monétaire (M)"),Jt=o("span",{class:"input-group-text"},"Ü",-1),Gt={class:"input-group mb-1"},Wt={class:"input-group-text",for:"currencyNbMembers"},Qt=d("Üman accounts (N)"),Zt=d("comptes Ümains (N)"),Ht={class:"input-group mb-1"},en={class:"input-group-text",for:"currencyAvg"},tn=d("average"),nn=d("moyenne"),an={class:"input-group-text"},ln=d("Ü / Üman"),sn=d("Ü / Ümain"),rn={class:"input-group mb-1"},un={class:"input-group-text",for:"currencyQuantitative"},on=d("quantitative"),cn=d("quantitatif"),dn={class:"input-group-text"},mn=d("Ü / Ü(0)"),pn=d("Ü / Ü(0)"),fn={class:"input-group mb-1"},yn={class:"input-group-text",for:"currencyLastGrew"},gn=d("last growth"),hn=d("dernière croissance"),bn=o("span",{class:"input-group-text"},"%",-1),xn={class:"input-group mb-1"},vn={class:"input-group-text",for:"currencyLastMelt"},_n=d("last melting"),wn=d("dernière fonte"),kn=o("span",{class:"input-group-text"},"%",-1),Tn={expose:[],setup(t){const n=s(!1),l=e({expression:"",mode:"melt",uPerDay:1,stepTime:0,revaluationTime:0}),d=v((()=>0==z.currency.lastMelt?0:(1/(1/(z.currency.lastMelt/100)-1)*100).toFixed(2))),m=v((()=>!(!z||!z.currency)&&(z.currency.expression!=l.expression||z.currency.mode!=l.mode||z.currency.uPerDay!=l.uPerDay||z.currency.revaluationTime!=l.revaluationTime||z.currency.stepTime!=l.stepTime)));return _((()=>[z.currency.expression,z.currency.mode,z.currency.uPerDay,z.currency.revaluationTime,z.currency.stepTime]),(()=>{Object.assign(l,z.currency)})),a((()=>{Object.assign(l,z.currency)})),(e,t)=>(r(),u("div",null,[o("h4",Ee,[o(c(ee),null,{default:i((()=>[Pe])),_:1}),o(c(H),null,{default:i((()=>[je])),_:1}),o(Ce,{class:"position-absolute",info:"info-currency"})]),o(Se,{infoId:"info-currency"},{default:i((()=>[o(c(ee),null,{default:i((()=>[Ie])),_:1}),o(c(H),null,{default:i((()=>[Oe])),_:1})])),_:1}),o("form",null,[o("div",Ne,[o("label",qe,[o(c(ee),null,{default:i((()=>[Fe])),_:1}),o(c(H),null,{default:i((()=>[Re])),_:1})]),h(o("select",{"onUpdate:modelValue":t[1]||(t[1]=e=>c(l).mode=e),id:"currencyMode",class:["form-control",{"bg-primary":c(l).mode!=c(z).currency.mode}],disabled:c(z).isPlaying},[o("option",Ue,[o(c(ee),null,{default:i((()=>[Le])),_:1}),o(c(H),null,{default:i((()=>[Be])),_:1})]),o("option",Ve,[o(c(ee),null,{default:i((()=>[Ye])),_:1}),o(c(H),null,{default:i((()=>[Xe])),_:1})])],10,["disabled"]),[[w,c(l).mode]]),o("label",$e,[o(Ce,{class:"px-0",info:"info-currency-mode"})])]),o(Se,{infoId:"info-currency-mode"},{default:i((()=>[o(c(ee),null,{default:i((()=>[ze])),_:1}),o(c(H),null,{default:i((()=>[Ke])),_:1})])),_:1}),o("div",Je,["melt"==c(l).mode?(r(),u("span",Ge,"Ü(t-1) = ( 1 - ")):(r(),u("span",We,"Ü(t+1) = ( 1 + ")),h(o("input",{id:"currencyExpression","onUpdate:modelValue":t[2]||(t[2]=e=>c(l).expression=e),type:"text",class:["form-control text-right",{"bg-primary":c(l).expression!=c(z).currency.expression}],disabled:c(z).isPlaying},null,10,["disabled"]),[[k,c(l).expression]]),o("span",Qe,[Ze,o(Ce,{class:"px-0 ml-2",info:"info-currency-expression"})])]),o(Se,{infoId:"info-currency-expression"},{default:i((()=>[o(c(ee),null,{default:i((()=>[He])),_:1}),o(c(H),null,{default:i((()=>[et])),_:1})])),_:1}),o("div",tt,[o("label",nt,[o(c(ee),null,{default:i((()=>[at])),_:1}),o(c(H),null,{default:i((()=>[lt])),_:1})]),h(o("input",{id:"currencyUPerDay","onUpdate:modelValue":t[3]||(t[3]=e=>c(l).uPerDay=e),type:"number",min:"0",max:"1000",step:"1",class:["form-control text-right",{"bg-primary":c(l).uPerDay!=c(z).currency.uPerDay}],disabled:c(z).isPlaying},null,10,["disabled"]),[[k,c(l).uPerDay]]),o("span",st,[rt,o(Ce,{class:"px-0 ml-2",info:"info-currency-uPerDay"})])]),o(Se,{infoId:"info-currency-uPerDay"},{default:i((()=>[o(c(ee),null,{default:i((()=>[ut])),_:1}),o(c(H),null,{default:i((()=>[ot])),_:1})])),_:1}),o("div",ct,[o("label",it,[o(c(ee),null,{default:i((()=>[dt])),_:1}),o(c(H),null,{default:i((()=>[mt])),_:1})]),h(o("input",{id:"currencyRevaluationTime","onUpdate:modelValue":t[4]||(t[4]=e=>c(l).revaluationTime=e),type:"number",min:"1",max:"400",step:"1",class:["form-control text-right",{"bg-primary":c(l).revaluationTime!=c(z).currency.revaluationTime}],disabled:c(z).isPlaying},null,10,["disabled"]),[[k,c(l).revaluationTime]]),o("span",pt,[o(c(ee),null,{default:i((()=>[ft,c(l).revaluationTime>1?(r(),u("span",yt,"s")):b("",!0)])),_:1}),o(c(H),null,{default:i((()=>[gt,c(l).revaluationTime>1?(r(),u("span",ht,"s")):b("",!0)])),_:1}),o(Ce,{class:"px-0 ml-2",info:"info-currency-revaluationTime"})])]),o(Se,{infoId:"info-currency-revaluationTime"},{default:i((()=>[o(c(ee),null,{default:i((()=>[bt])),_:1}),o(c(H),null,{default:i((()=>[xt])),_:1})])),_:1}),o("div",vt,[o("label",_t,[o(c(ee),null,{default:i((()=>[wt])),_:1}),o(c(H),null,{default:i((()=>[kt])),_:1})]),h(o("input",{id:"currencyStepTime","onUpdate:modelValue":t[5]||(t[5]=e=>c(l).stepTime=e),type:"number",min:"1",max:"90000",step:"1",class:["form-control text-right",{"bg-primary":c(l).stepTime!=c(z).currency.stepTime}],disabled:c(z).isPlaying},null,10,["disabled"]),[[k,c(l).stepTime]]),o("span",Tt,[o(c(ee),null,{default:i((()=>[At,c(l).stepTime>1?(r(),u("span",Mt,"s")):b("",!0)])),_:1}),o(c(H),null,{default:i((()=>[Dt,c(l).stepTime>1?(r(),u("span",St,"s")):b("",!0)])),_:1}),o(Ce,{class:"px-0 ml-2",info:"info-currency-stepTime"})])]),o(Se,{infoId:"info-currency-stepTime"},{default:i((()=>[o(c(ee),null,{default:i((()=>[Ct])),_:1}),o(c(H),null,{default:i((()=>[Et])),_:1})])),_:1}),c(m)?(r(),u("div",Pt,[o("button",{type:"button",class:"btn btn-secondary mr-auto",onClick:t[6]||(t[6]=e=>Object.assign(c(l),c(z).currency))},[o(c(ee),null,{default:i((()=>[jt])),_:1}),o(c(H),null,{default:i((()=>[It])),_:1})]),o("button",{type:"button",class:"btn btn-primary",onClick:t[7]||(t[7]=e=>(()=>{const{expression:e,mode:t,uPerDay:n,revaluationTime:a,stepTime:s}=l;z.updateCurrency({expression:e,mode:t,uPerDay:n,revaluationTime:a,stepTime:s})})())},[o(c(ee),null,{default:i((()=>[Ot])),_:1}),o(c(H),null,{default:i((()=>[Nt])),_:1})])])):b("",!0),o("div",qt,[n.value?(r(),u("button",{key:1,type:"button",class:"btn btn-secondary form-control text-left",onClick:t[9]||(t[9]=e=>n.value=!1)},[o(c(ee),null,{default:i((()=>[Lt])),_:1}),o(c(H),null,{default:i((()=>[Bt])),_:1}),Vt])):(r(),u("button",{key:0,type:"button",class:"btn btn-secondary form-control text-left",onClick:t[8]||(t[8]=e=>n.value=!0)},[o(c(ee),null,{default:i((()=>[Ft])),_:1}),o(c(H),null,{default:i((()=>[Rt])),_:1}),Ut]))]),n.value?(r(),u("div",Yt,[o("div",Xt,[o("label",$t,[o(c(ee),null,{default:i((()=>[zt])),_:1}),o(c(H),null,{default:i((()=>[Kt])),_:1})]),o("input",{id:"currencyMass",value:c(z).currencyWithoutDecimal(c(z).currency.monetaryMass),type:"text",class:"form-control text-right",disabled:""},null,8,["value"]),Jt]),o("div",Gt,[o("label",Wt,[o(c(ee),null,{default:i((()=>[Qt])),_:1}),o(c(H),null,{default:i((()=>[Zt])),_:1})]),o("input",{id:"currencyNbMembers",value:c(z).currency.nbMembers,type:"text",class:"form-control text-right",disabled:""},null,8,["value"])]),o("div",Ht,[o("label",en,[o(c(ee),null,{default:i((()=>[tn])),_:1}),o(c(H),null,{default:i((()=>[nn])),_:1})]),o("input",{id:"currencyAvg",value:c(z).currencyWithoutDecimal(c(z).currency.average),type:"text",class:"form-control text-right",disabled:""},null,8,["value"]),o("span",an,[o(c(ee),null,{default:i((()=>[ln])),_:1}),o(c(H),null,{default:i((()=>[sn])),_:1})])]),o("div",rn,[o("label",un,[o(c(ee),null,{default:i((()=>[on])),_:1}),o(c(H),null,{default:i((()=>[cn])),_:1})]),o("input",{id:"currencyQuantitative",value:c(z).currency.quantitative.toFixed(2),type:"text",class:"form-control text-right",disabled:""},null,8,["value"]),o("span",dn,[o(c(ee),null,{default:i((()=>[mn])),_:1}),o(c(H),null,{default:i((()=>[pn])),_:1})])]),o("div",fn,[o("label",yn,[o(c(ee),null,{default:i((()=>[gn])),_:1}),o(c(H),null,{default:i((()=>[hn])),_:1})]),o("input",{id:"currencyLastGrew",value:c(d),type:"text",class:"form-control text-right",disabled:""},null,8,["value"]),bn]),o("div",xn,[o("label",vn,[o(c(ee),null,{default:i((()=>[_n])),_:1}),o(c(H),null,{default:i((()=>[wn])),_:1})]),o("input",{id:"currencyLastMelt",value:c(z).currency.lastMelt,type:"text",class:"form-control text-right",disabled:""},null,8,["value"]),kn])])):b("",!0)])]))}},An={class:"text-center mb-3"},Mn=d("transaction"),Dn=d("transaction"),Sn=d("EN_info-transaction"),Cn=d("FR_info-transaction"),En={class:"text-center"},Pn={class:"input-group mb-1"},jn={class:"input-group-text",for:"txFrom"},In=d(" fröm "),On=d(" de "),Nn={class:"input-group-text",for:"txTo"},qn=d(" tö "),Fn=d(" à "),Rn=o("option",{disabled:"",value:""},"select öne",-1),Un=o("option",{disabled:"",value:""},"qüi",-1),Ln={class:"input-group mb-1"},Bn=o("span",{class:"input-group-text"},"Ü",-1),Vn={expose:[],setup(t){const n=e({from:"fÜne",to:"",value:1}),a=v((()=>z.accounts)),l=v((()=>z.accounts));return(e,t)=>(r(),u("div",null,[o("h4",An,[o(c(ee),null,{default:i((()=>[Mn])),_:1}),o(c(H),null,{default:i((()=>[Dn])),_:1}),o(Ce,{class:"position-absolute",info:"info-transaction"})]),o(Se,{infoId:"info-transaction"},{default:i((()=>[o(c(ee),null,{default:i((()=>[Sn])),_:1}),o(c(H),null,{default:i((()=>[Cn])),_:1})])),_:1}),o("form",En,[o("div",Pn,[o("label",jn,[o(c(ee),null,{default:i((()=>[In])),_:1}),o(c(H),null,{default:i((()=>[On])),_:1})]),h(o("select",{"onUpdate:modelValue":t[1]||(t[1]=e=>c(n).from=e),id:"txFrom",class:"form-control"},[(r(!0),u(T,null,A(c(a),(e=>(r(),u("option",{value:e.name,key:e.name},g(e.name),9,["value"])))),128))],512),[[w,c(n).from]]),o("label",Nn,[o(c(ee),null,{default:i((()=>[qn])),_:1}),o(c(H),null,{default:i((()=>[Fn])),_:1})]),h(o("select",{"onUpdate:modelValue":t[2]||(t[2]=e=>c(n).to=e),id:"txTo",class:"form-control"},[o(c(ee),null,{default:i((()=>[Rn])),_:1}),o(c(H),null,{default:i((()=>[Un])),_:1}),(r(!0),u(T,null,A(c(l),(e=>(r(),u("option",{value:e.name,key:e.name},g(e.name),9,["value"])))),128))],512),[[w,c(n).to]])]),o("div",Ln,[h(o("input",{"onUpdate:modelValue":t[3]||(t[3]=e=>c(n).value=e),type:"number",step:"any",class:"form-control text-right"},null,512),[[k,c(n).value]]),Bn,o("button",{type:"button",class:"btn btn-primary",onClick:t[4]||(t[4]=e=>c(z).doTx(c(n)))},"ök!")])])]))}};function Yn(e){return parseInt(e,10)}function Xn(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function $n(e,t,n){var a=e.x-t.x,l=e.y-t.y,s=Math.sqrt(a*a+l*l),r=a/s,u=l/s;return{x:t.x+r*n,y:t.y+u*n}}function zn(e,t){var n=e.shift();return"M"+n.x+" "+n.y+e.map((function(a,l){var s,r,u,o=e[l+1],c=e[l-1]||n,i=o&&(r=a,u=c,Yn((s=o).x+u.x)===Yn(2*r.x)&&Yn(s.y+u.y)===Yn(2*r.y));if(!o||i)return"L"+a.x+" "+a.y;var d=Math.min(Xn(c,a),Xn(o,a)),m=d/2<t?d/2:t,p=$n(c,a,m),f=$n(o,a,m);return"L"+p.x+" "+p.y+"S"+a.x+" "+a.y+" "+f.x+" "+f.y})).join("")}var Kn={props:["smooth","data","boundary","radius","id","max","min","color","dash"],render:function(){var e,t=this,n=t.data,a=t.smooth,l=t.boundary,s=t.radius,r=t.id,u=t.max,o=t.min,c=t.dash,i=zn(function(e,t,n){var a=t.minX,l=t.minY,s=t.maxX,r=t.maxY,u=n.max,o=n.min,c=e.map((function(e){return"number"==typeof e?e:e.value})),i=Math.min.apply(Math,c.concat([o]))-.001,d=(s-a)/(c.length-1),m=(r-l)/(Math.max.apply(Math,c.concat([u]))+.001-i);return c.map((function(e,t){return{x:t*d+a,y:r-(e-i)*m+1e-5*+(t===c.length-1)-1e-5*+(0===t)}}))}(n,l,{max:u,min:o}),a?s:0);return e=this.color?this.color:"url(#"+r+")",M("path",{d:i,fill:"none",stroke:e,"stroke-dasharray":c})}},Jn={props:["boundary","max","min"],render:function(){var e=this.boundary;return[M("text",{x:e.minX,y:e.minY-2,fill:"#EEEEEEBB","font-size":"0.6em"},Math.round(this.max/1e3)),M("line",{x1:e.minX,y1:e.minY,x2:e.maxX,y2:e.minY,stroke:"#EEEEEEBB"}),M("text",{x:e.minX,y:e.maxY-2,fill:"#EEEEEEBB","font-size":"0.6em"},Math.round(this.min/1e3)),M("line",{x1:e.minX,y1:e.maxY,x2:e.maxX,y2:e.maxY,stroke:"#EEEEEEBB"})]}},Gn={props:["gradient","gradientDirection","id"],render:function(){var e=this,t=e.gradient,n=e.gradientDirection,a=e.id,l=t.length-1||1,s=t.slice().reverse().map((function(e,t){return M("stop",{offset:t/l,"stop-color":e})}));return M("defs",[M("linearGradient",{id:a,x1:+("left"===n),y1:+("top"===n),x2:+("right"===n),y2:+("bottom"===n)},s)])}},Wn={name:"Trend",props:{data:{type:Array,required:!0},autoDraw:Boolean,autoDrawDuration:{type:Number,default:2e3},autoDrawEasing:{type:String,default:"ease"},gradient:{type:Array,default:function(){return["#000"]}},gradientDirection:{type:String,default:"top"},max:{type:Number,default:-1/0},min:{type:Number,default:1/0},height:Number,width:Number,padding:{type:Number,default:8},radius:{type:Number,default:10},smooth:Boolean},watch:{data:{immediate:!0,handler:function(e){var t=this;this.$nextTick((function(){if(!t.$isServer&&t.$refs.path&&t.autoDraw){var e=t.$refs.path.$el,n=e.getTotalLength();e.style.transition="none",e.style.strokeDasharray=n+" "+n,e.style.strokeDashoffset=Math.abs(n-(t.lastLength||0)),e.getBoundingClientRect(),e.style.transition="stroke-dashoffset "+t.autoDrawDuration+"ms "+t.autoDrawEasing,e.style.strokeDashoffset=0,t.lastLength=n}}))}}},render:function(){if(this.data&&!(this.data.length<2)){var e=this.width,t=this.height,n=this.padding,a=e||300,l=t||150,s={minX:n,minY:n,maxX:a-n,maxY:l-n};return M("svg",{width:e||"100%",height:t||"25%",viewBox:"0 0 "+a+" "+l},[M(Gn,{gradient:this.gradient,gradientDirection:this.gradientDirection,id:"stats"}),M(Jn,{boundary:s,max:Math.max.apply(Math,this.data.concat([this.max])),min:Math.min.apply(Math,this.data.concat([this.min]))}),M(Kn,{smooth:this.smooth,data:this.data,boundary:s,radius:this.radius,max:this.max,min:this.min,id:"stats",ref:"path",dash:"0"})])}}},Qn={name:"Trends",props:{data:{type:Array,required:!0},colors:{type:Array,required:!0},min:{type:Number,default:1/0},height:Number,width:Number,padding:{type:Number,default:8},radius:{type:Number,default:10},smooth:Boolean},render:function(){if(this.data){var e=this.width,t=this.height,n=this.padding,a=e||300,l=t||200,s={minX:n,minY:n,maxX:a-n,maxY:l-n},r=1e3;for(let e=0;e<this.data.length;e++){const t=this.data[e];if(t&&t.length>1)for(let e=0;e<t.length;e++)r=Math.max(r,t[e])}var u=[];for(let e=0;e<this.data.length;e++){const t=this.data[e];t&&t.length>1&&u.push(M(Kn,{smooth:this.smooth,data:t,boundary:s,radius:this.radius,max:r,min:this.min,id:"stats",ref:"path"+e,color:this.colors[e],dash:e==this.data.length-1?"2 2":"0"}))}if(0!=u.length)return M("svg",{width:e||"100%",height:t||"25%",viewBox:"0 0 "+a+" "+l},[u,M(Jn,{boundary:s,max:r,min:this.min})])}}};const Zn={class:"text-center mb-3"},Hn=d("account"),ea=d("compte"),ta=d("EN_info-account"),na=d("FR_info-account"),aa={class:"mt-3 mb-3"},la={class:"text-center mb-6"},sa={disabled:"",value:null},ra=d("whö"),ua=d("qüi"),oa={key:0},ca={class:"display-3 text-center"},ia={class:"align-baseline",style:{"font-size":"50%"}},da=o("small",null," Ü",-1),ma={key:0,class:"display-5 text-center"},pa=d("bank"),fa=d("banque"),ya={key:1,class:"display-5 text-center"},ga=d("wallet"),ha=d("compte simple"),ba={key:2,class:"display-5 text-center"},xa=d("Üman"),va=d("Ümain"),_a={class:"text-center mt-4"},wa=d("transaction"),ka=d("transaction"),Ta={class:"mb-4 justify-content-center mx-auto",style:{"max-width":"500px"}},Aa={class:"input-group mb-1"},Ma=o("small",{class:"input-group-text"},"Ü",-1),Da={class:"input-group-text",for:"accountTxTo"},Sa=d(" tö "),Ca=d(" à "),Ea={disabled:"",value:""},Pa=d("someöne"),ja=d("qüi"),Ia={class:"input-group"},Oa={class:"input-group-text",for:"txMessage"},Na=d("message"),qa=d("message"),Fa={class:"text-center mt-4"},Ra=d("stats"),Ua=d("stats"),La={class:"text-center mt-4"},Ba=d("diary"),Va=d("journal"),Ya={class:"list-group list-group-flush pointer mx-auto",style:{"max-width":"450px"}},Xa={key:0},$a={style:{width:"85px"},class:"badge bg-light text-dark text-right"},za={style:{width:"70px"},class:"d-inline-block text-center"},Ka=d(" to "),Ja=d(" à "),Ga={key:1},Wa={style:{width:"85px"},class:"badge bg-primary text-right"},Qa={style:{width:"70px"},class:"d-inline-block text-center"},Za=d(" from "),Ha=d(" de "),el={class:"text-right"},tl={class:"fw-bold"},nl={expose:[],setup(t){const n=e({account:null,accounts:v((()=>z.accounts.filter((e=>"bank"!=e.role)))),otherAccounts:v((()=>n.account?z.accounts.filter((e=>"bank"!=e.role&&e.name!=n.account.name)):null)),stats:[],transactions:[],tx:{from:"",to:"",message:"",value:1}}),l=()=>{n.account&&(n.transactions=z.getAccountTx(n.account.name,10).reverse(),n.stats=z.getAccountStats(n.account.name,"day"))};_((()=>n.account),(()=>{l()})),_((()=>z.currency),l,{deep:!0});const s=e=>z.currencyDecimal(e).slice(-2),d=e=>{if(!e)return"";if("!1Ucreation"==e)return Q({en:"> u crëate Ü!",fr:"> crëation de Ü !"});if(0==e.indexOf("!revaluation%")){let t=e.split("%")[1];return Q({en:"> all the Ü melt by "+t+"%!",fr:"> tous les Ü fondent de "+t+"% !"})}return e?"> "+e:""};return a((()=>{if(!n.account){n.accounts.length>1&&(n.account=n.accounts[0])}})),(e,t)=>{return r(),u("div",null,[o("h4",Zn,[o(c(ee),null,{default:i((()=>[Hn])),_:1}),o(c(H),null,{default:i((()=>[ea])),_:1}),o(Ce,{class:"position-absolute",info:"info-account"})]),o(Se,{infoId:"info-account"},{default:i((()=>[o(c(ee),null,{default:i((()=>[ta])),_:1}),o(c(H),null,{default:i((()=>[na])),_:1})])),_:1}),o("div",aa,[o("h3",la,[h(o("select",{"onUpdate:modelValue":t[1]||(t[1]=e=>c(n).account=e),class:"text-center form-control mx-auto",style:{"max-width":"300px","font-size":"1.3em","text-align-last":"center"}},[o("option",sa,[o(c(ee),null,{default:i((()=>[ra])),_:1}),o(c(H),null,{default:i((()=>[ua])),_:1})]),(r(!0),u(T,null,A(c(n).accounts,(e=>(r(),u("option",{value:e,key:e.name},[o("strong",null,g(e.name),1)],8,["value"])))),128))],512),[[w,c(n).account]])]),c(n).account?(r(),u("div",oa,[o("div",ca,[o("span",null,g((a=c(n).account.balance,z.currencyDecimal(a).slice(0,-3))),1),o("small",ia,"."+g(s(c(n).account.balance)),1),da]),"bank"==c(n).account.role?(r(),u("p",ma,[o(c(ee),null,{default:i((()=>[pa])),_:1}),o(c(H),null,{default:i((()=>[fa])),_:1})])):"wallet"==c(n).account.role?(r(),u("p",ya,[o(c(ee),null,{default:i((()=>[ga])),_:1}),o(c(H),null,{default:i((()=>[ha])),_:1})])):(r(),u("p",ba,[o(c(ee),null,{default:i((()=>[xa])),_:1}),o(c(H),null,{default:i((()=>[va])),_:1})])),o("h4",_a,[o(c(ee),null,{default:i((()=>[wa])),_:1}),o(c(H),null,{default:i((()=>[ka])),_:1})]),o("form",Ta,[o("div",null,[o("div",Aa,[h(o("input",{"onUpdate:modelValue":t[2]||(t[2]=e=>c(n).tx.value=e),type:"number",max:Math.round(c(n).account.balance/100),step:"any",min:"0",class:"form-control text-right"},null,8,["max"]),[[k,c(n).tx.value]]),Ma,o("label",Da,[o(c(ee),null,{default:i((()=>[Sa])),_:1}),o(c(H),null,{default:i((()=>[Ca])),_:1})]),h(o("select",{"onUpdate:modelValue":t[3]||(t[3]=e=>c(n).tx.to=e),id:"accountTxTo",class:"form-control p-1"},[o("option",Ea,[o(c(ee),null,{default:i((()=>[Pa])),_:1}),o(c(H),null,{default:i((()=>[ja])),_:1})]),(r(!0),u(T,null,A(c(n).otherAccounts,(e=>(r(),u("option",{value:e.name,key:e.name},[o("strong",null,g(e.name),1)],8,["value"])))),128))],512),[[w,c(n).tx.to]]),o("button",{type:"button",class:"btn btn-primary",onClick:t[4]||(t[4]=e=>(n.tx.from=n.account.name,console.log(n.tx),z.doTx(n.tx)&&(n.tx.message=""),void l()))},"ök!")]),o("div",Ia,[o("label",Oa,[o(c(ee),null,{default:i((()=>[Na])),_:1}),o(c(H),null,{default:i((()=>[qa])),_:1})]),h(o("input",{"onUpdate:modelValue":t[5]||(t[5]=e=>c(n).tx.message=e),type:"text",maxlength:"32",class:"form-control",id:"txMessage"},null,512),[[k,c(n).tx.message]])])])]),o("h4",Fa,[o(c(ee),null,{default:i((()=>[Ra])),_:1}),o(c(H),null,{default:i((()=>[Ua])),_:1})]),o(c(Wn),{class:"p-2",data:c(n).stats,style:{"background-color":"#00000088","border-radius":".5rem"},gradientDirection:"top",gradient:["#f560a2","#e83283","#bd125e"],padding:10,radius:8,"stroke-width":1.5,"stroke-linecap":"butt",min:0,max:1e3,"auto-draw":"",smooth:""},null,8,["data","stroke-width"]),o("h4",La,[o(c(ee),null,{default:i((()=>[Ba])),_:1}),o(c(H),null,{default:i((()=>[Va])),_:1})]),o("ul",Ya,[(r(!0),u(T,null,A(c(n).transactions,(e=>{return r(),u("li",{key:e.id,class:"list-group-item list-group-item-action p-2"},[o("div",{class:"d-flex w-100 justify-content-between",onClick:t=>c(n).tx.to=e.from==c(n).account.name?e.to:e.from},[o("div",null,[e.from==c(n).account.name?(r(),u("h5",Xa,[o("span",$a,g(c(z).currencyDecimal(e.value))+" Ü",1),o("span",za,[o(c(ee),null,{default:i((()=>[Ka])),_:1}),o(c(H),null,{default:i((()=>[Ja])),_:1})]),o("strong",null,[o("span",null,g(e.to),1)])])):(r(),u("h5",Ga,[o("span",Wa,g(c(z).currencyDecimal(e.value))+" Ü",1),o("span",Qa,[o(c(ee),null,{default:i((()=>[Za])),_:1}),o(c(H),null,{default:i((()=>[Ha])),_:1})]),o("strong",null,[o("span",null,g(e.from),1)])]))]),o("small",el,g((t=e.day,t>=z.currency.elapsedTime?Q({en:"today",fr:"aujourd'hui"}):t==z.currency.elapsedTime-1?Q({en:"yesterday",fr:"hier"}):Q({en:z.currency.elapsedTime-t+" days ago",fr:"il y a "+(z.currency.elapsedTime-t)+" jours"}))),1)],8,["onClick"]),o("span",tl,g(d(e.message)),1)]);var t})),128))])])):b("",!0)])]);var a}}},al={class:"text-center mb-3"},ll=d("accounts"),sl=d("comptes"),rl=d("EN_info-accounts"),ul=d("FR_info-accounts"),ol={class:"table table-hover"},cl=d("stats"),il=d("stats"),dl=d("name"),ml=d("nom"),pl=d("role"),fl=d("rôle"),yl=d("balance"),gl=d("solde"),hl={class:"text-center"},bl=d("Üman"),xl=d("Ümain"),vl=d("wället"),_l=d("sïmple"),wl={key:2,class:"btn btn-sm btn-danger fw-bold",disabled:""},kl=d("bänk"),Tl=d("bänque"),Al={class:"text-right"},Ml=o("small",null," Ü ",-1),Dl=d("reset"),Sl=d("raz"),Cl=o("i",{class:"fa fa-trash"},null,-1),El={class:"input-group"},Pl={value:"human"},jl=d("Üman"),Il=d("Ümain"),Ol={value:"wallet"},Nl=d("wället"),ql=d("sïmple"),Fl=d("nëw!"),Rl=d("noüveau!"),Ul={expose:[],setup(t){const n=e({onlySelected:!1,sortKey:"name",sortOrder:1,newAccount:{name:"",role:"human"}}),a=v((()=>{let e=z.accounts.filter((e=>"bank"!=e.role));return n.onlySelected&&(e=e.filter((e=>z.isSelected(e)))),e.sort(((e,t)=>{let a=e[n.sortKey],l=t[n.sortKey];return(a===l?0:a>l?1:-1)*n.sortOrder}))})),l=e=>{e==n.sortKey&&(n.sortOrder=-n.sortOrder),n.sortKey=e},s=e=>{let t="human"==e.role?"wallet":"human";z.updateAccount(e,{role:t})},m=e=>{const t=z.selectedAccounts.get(e.name);return null==t?null:t.color};return(e,t)=>(r(),u("div",null,[o("h4",al,[o(c(ee),null,{default:i((()=>[ll])),_:1}),o(c(H),null,{default:i((()=>[sl])),_:1}),o(Ce,{class:"position-absolute",info:"info-accounts"})]),o(Se,{infoId:"info-accounts"},{default:i((()=>[o(c(ee),null,{default:i((()=>[rl])),_:1}),o(c(H),null,{default:i((()=>[ul])),_:1})])),_:1}),o("table",ol,[o("thead",null,[o("tr",null,[o("th",{onClick:t[1]||(t[1]=e=>c(n).onlySelected=!c(n).onlySelected),class:[{"bg-primary":c(n).onlySelected},"pointer"],style:{width:"25px"}},[o(c(ee),null,{default:i((()=>[cl])),_:1}),o(c(H),null,{default:i((()=>[il])),_:1})],2),o("th",{onClick:t[2]||(t[2]=e=>l("name")),class:"pointer"},[o(c(ee),null,{default:i((()=>[dl])),_:1}),o(c(H),null,{default:i((()=>[ml])),_:1})]),o("th",{onClick:t[3]||(t[3]=e=>l("role")),class:"text-center pointer"},[o(c(ee),null,{default:i((()=>[pl])),_:1}),o(c(H),null,{default:i((()=>[fl])),_:1})]),o("th",{onClick:t[4]||(t[4]=e=>l("balance")),class:"text-right pointer"},[o(c(ee),null,{default:i((()=>[yl])),_:1}),o(c(H),null,{default:i((()=>[gl])),_:1})])])]),o("tbody",null,[(r(!0),u(T,null,A(c(a),(e=>(r(),u("tr",{key:e.name},[o("td",{style:{"background-color":m(e)},onClick:t=>c(z).select(e),class:"pointer"},null,12,["onClick"]),o("td",{onClick:t=>c(z).select(e),class:"pointer"},g(e.name),9,["onClick"]),o("td",hl,["human"==e.role?(r(),u("button",{key:0,class:"btn btn-sm btn-primary fw-bold",onClick:t=>s(e)},[o(c(ee),null,{default:i((()=>[bl])),_:1}),o(c(H),null,{default:i((()=>[xl])),_:1})],8,["onClick"])):"wallet"==e.role?(r(),u("button",{key:1,class:"btn btn-sm btn-secondary fw-bold",onClick:t=>s(e)},[o(c(ee),null,{default:i((()=>[vl])),_:1}),o(c(H),null,{default:i((()=>[_l])),_:1})],8,["onClick"])):(r(),u("button",wl,[o(c(ee),null,{default:i((()=>[kl])),_:1}),o(c(H),null,{default:i((()=>[Tl])),_:1})]))]),o("td",Al,["bank"!=e.role?(r(),u(T,{key:0},[o("strong",null,[d(g(c(z).currencyDecimal(e.balance)),1),Ml]),o("a",{href:"#",onClick:D((t=>(e=>{z.updateAccount(e,{balance:0})})(e)),["stop","prevent"]),class:"mx-2"},[o(c(ee),null,{default:i((()=>[Dl])),_:1}),o(c(H),null,{default:i((()=>[Sl])),_:1})],8,["onClick"])],64)):b("",!0),e.name!=c(z).name?(r(),u("a",{key:1,href:"#",onClick:D((t=>(e=>{const t=e.name;confirm(Q({fr:"êtes vous sûr de supprimer "+t+" ?",en:"Are you sure to delete "+t+"?"}))&&z.deleteAccount(e)})(e)),["stop","prevent"])},[Cl],8,["onClick"])):b("",!0)])])))),128))])]),o("div",El,[h(o("input",{placeholder:c(Q)({en:"näme",fr:"nöm"}),"onUpdate:modelValue":t[5]||(t[5]=e=>c(n).newAccount.name=e),type:"text",class:"form-control",id:"accountName",maxlength:"10"},null,8,["placeholder"]),[[k,c(n).newAccount.name]]),h(o("select",{"onUpdate:modelValue":t[6]||(t[6]=e=>c(n).newAccount.role=e),class:"form-control",style:{"max-width":"100px"}},[o("option",Pl,[o(c(ee),null,{default:i((()=>[jl])),_:1}),o(c(H),null,{default:i((()=>[Il])),_:1})]),o("option",Ol,[o(c(ee),null,{default:i((()=>[Nl])),_:1}),o(c(H),null,{default:i((()=>[ql])),_:1})])],512),[[w,c(n).newAccount.role]]),o("button",{type:"button",disabled:3>c(n).newAccount.name.length||c(z).accounts.some((e=>e.name==c(n).newAccount.name)),class:"btn btn-primary",onClick:t[7]||(t[7]=e=>(n.newAccount.name=n.newAccount.name.trim(),void z.createAccount(n.newAccount)))},[o(c(ee),null,{default:i((()=>[Fl])),_:1}),o(c(H),null,{default:i((()=>[Rl])),_:1})],8,["disabled"])])]))}},Ll={class:"text-center mb-3"},Bl=d("stats"),Vl=d("stats"),Yl=d("EN_info-stats"),Xl=d("FR_info-stats"),$l={class:"input-group mx-auto mt-2 mb-1",style:{"max-width":"400px"}},zl=o("label",{class:"input-group-text px-1"}," 100 ",-1),Kl={value:"day"},Jl=d("days"),Gl=d("jours"),Wl={value:"month"},Ql=d("months"),Zl=d("mois"),Hl={value:"year"},es=d("years"),ts=d("années"),ns={class:"input-group-text px-1"},as=d("referential"),ls=d("référentiel"),ss={value:"relative"},rs=d("relative"),us=d("relatif"),os={value:"quantitative"},cs=d("quantitative"),is=d("quantitatif"),ds={value:"average"},ms=d("average"),ps=d("moyenne"),fs={class:"input-group-text p-1"},ys=d("EN_info-stats-referential"),gs=d("FR_info-stats-referential"),hs={expose:[],setup(t){const n=e({referential:"relative",statType:"day",stats:[],colors:[]}),l=()=>{let e=z.getAccountStats(z.name,n.statType),t=null,a=[],l=[];z.selectedAccounts.forEach(((s,r)=>{if(r!=z.name&&(t=z.getAccountStats(r,n.statType),t)){if("average"==n.referential)for(let n=0;n<t.length;n++)t[n]=0==e[n].average?0:t[n]/e[n].average*1e5;else if("quantitative"==n.referential)for(let n=0;n<t.length;n++)t[n]=t[n]*(e[n].quantitative/z.currency.quantitative);a.push(t),l.push(s.color)}})),"average"==n.referential?t=new Array(e.length).fill(1e5):"relative"==n.referential?t=e.map((e=>e.average)):"quantitative"==n.referential&&(t=e.map((e=>e.average*(e.quantitative/z.currency.quantitative)))),a.push(t),l.push(z.selectedAccounts.get(z.name).color),n.stats=a,n.colors=l};return _((()=>z.selectedAccounts),l,{deep:!0}),_((()=>z.currency),l,{deep:!0}),_((()=>n.referential),l),_((()=>n.statType),l),a(l),(e,t)=>(r(),u("div",null,[o("h4",Ll,[o(c(ee),null,{default:i((()=>[Bl])),_:1}),o(c(H),null,{default:i((()=>[Vl])),_:1}),o(Ce,{class:"position-absolute",info:"info-stats"})]),o(Se,{infoId:"info-stats"},{default:i((()=>[o(c(ee),null,{default:i((()=>[Yl])),_:1}),o(c(H),null,{default:i((()=>[Xl])),_:1})])),_:1}),o(c(Qn),{class:"p-2",style:{"background-color":"#00000088","border-radius":".5rem"},data:c(n).stats,colors:c(n).colors,padding:10,radius:8,"stroke-width":1.4,"stroke-linecap":"butt",min:0,"auto-draw":"",smooth:""},null,8,["data","colors","stroke-width"]),o("div",$l,[zl,h(o("select",{"onUpdate:modelValue":t[1]||(t[1]=e=>c(n).statType=e),class:"form-control px-1"},[o("option",Kl,[o(c(ee),null,{default:i((()=>[Jl])),_:1}),o(c(H),null,{default:i((()=>[Gl])),_:1})]),o("option",Wl,[o(c(ee),null,{default:i((()=>[Ql])),_:1}),o(c(H),null,{default:i((()=>[Zl])),_:1})]),o("option",Hl,[o(c(ee),null,{default:i((()=>[es])),_:1}),o(c(H),null,{default:i((()=>[ts])),_:1})])],512),[[w,c(n).statType]]),o("label",ns,[o(c(ee),null,{default:i((()=>[as])),_:1}),o(c(H),null,{default:i((()=>[ls])),_:1})]),h(o("select",{"onUpdate:modelValue":t[2]||(t[2]=e=>c(n).referential=e),class:"form-control px-1"},[o("option",ss,[o(c(ee),null,{default:i((()=>[rs])),_:1}),o(c(H),null,{default:i((()=>[us])),_:1})]),o("option",os,[o(c(ee),null,{default:i((()=>[cs])),_:1}),o(c(H),null,{default:i((()=>[is])),_:1})]),o("option",ds,[o(c(ee),null,{default:i((()=>[ms])),_:1}),o(c(H),null,{default:i((()=>[ps])),_:1})])],512),[[w,c(n).referential]]),o("label",fs,[o(Ce,{class:"px-0",info:"info-stats-referential"})])]),o(Se,{infoId:"info-stats-referential"},{default:i((()=>[o(c(ee),null,{default:i((()=>[ys])),_:1}),o(c(H),null,{default:i((()=>[gs])),_:1})])),_:1})]))}};const bs={class:"container mt-3 mb-3"},xs=o("h1",{class:"display-1 text-center mb-3"},[o("code",{class:"bg-primary px-1 align-middle text-light"},"fї"),o("span",{class:"align-middle"},[d(" f"),o("small",null,"Ü"),d("ne")])],-1),vs={class:"justify-content-center mb-3 input-group mx-auto w-auto"},_s={class:"lead text-center mb-3"},ws=o("strong",null,[d("f"),o("small",null,"Ü"),d("ne")],-1),ks=d(" is a web app to test and play with a simple "),Ts=o("a",{href:"https://libre-currency.org"},"Libre Currency",-1),As=d(" called "),Ms=o("strong",null,[d("f"),o("small",null,"Ü"),d("ne")],-1),Ds=d(" (pronounced /fən/ like fun) "),Ss=o("strong",null,[d("f"),o("small",null,"Ü"),d("ne")],-1),Cs=d(" est une appli web qui permet de jouer avec une simple "),Es=o("a",{href:"https://monnaie-libre.fr/"},"Monnaie Libre",-1),Ps=d(" appelée "),js=o("strong",null,[d("f"),o("small",null,"Ü"),d("ne")],-1),Is=d(" (prononcée /fən/ comme fun en anglais) "),Os=d("EN_info-home-libreCurrency"),Ns=d("FR_info-home-libreCurrency"),qs={class:"lead text-center"},Fs=d(" a "),Rs=o("small",null,"Ü",-1),Us=d("man account create some new Ü (the Ünit of the f"),Ls=o("small",null,"Ü",-1),Bs=d("ne currency) each day"),Vs=o("br",null,null,-1),Ys=o("small",null,[d("old created "),o("strong",null,"Ünits"),d(" melt by a given percentage each "),o("strong",null,"revaluation period")],-1),Xs=d(" un compte Ümain crée de nouvelles "),$s=o("small",null,"Ü",-1),zs=d(" (l'Ünité de la monnaie f"),Ks=o("small",null,"Ü",-1),Js=d("ne) chaque jour"),Gs=o("br",null,null,-1),Ws=o("small",null,[d("les anciennes "),o("strong",null,"Ünités"),d(" fondent d'un certain pourcentage à chaque "),o("strong",null,"période de réévaluation")],-1),Qs=d("EN_info-home-funiter"),Zs=d("FR_info-home-funiter"),Hs={class:"d-flex align-items-start flex-wrap p-2 mt-3",style:{"justify-content":"space-evenly"}},er={class:"mx-auto"};let tr=JSON.parse(localStorage.getItem("state"));window.location.hash&&(tr||(tr={currency:{}}),Object.assign(tr.currency,(e=>{const t=new URLSearchParams(e);return{mode:"grew"==t.get("m")?"grew":"melt",expression:t.get("e"),uPerDay:parseInt(t.get("upd")),revaluationTime:parseInt(t.get("rt")),stepTime:parseInt(t.get("st"))}})(window.location.hash.substring(1)))),z.restoreState(tr);var nr={mounted:(e,t)=>{if("function"!=typeof t.value)return;let n=null,a=null;const l=e=>{"click"===e.type&&0!==e.button||(e.preventDefault(),null===n&&(r(),n=setTimeout((()=>{a=setInterval((()=>{r()}),50),r()}),200)))},s=()=>{null!==n&&(clearTimeout(n),n=null),a&&(clearInterval(a),a=null)},r=e=>{t.value(e)};["mousedown","touchstart"].forEach((t=>e.addEventListener(t,l))),["click","mouseout","touchend","touchcancel"].forEach((t=>e.addEventListener(t,s)))}};S({expose:[],setup(e){s("info");const t=()=>{localStorage.setItem("state",JSON.stringify(z.getState()))};_((()=>z.currency),(()=>{window.location.hash="#"+(e=>{const t=new URLSearchParams;return t.append("e",e.expression),t.append("m",e.mode),t.append("upd",e.uPerDay),t.append("rt",e.revaluationTime),t.append("st",e.stepTime),t.toString()})(z.currency),t()})),_((()=>z.selectedAccounts),t,{deep:!0});const n=[];return z.accounts.length<=1&&(n.push({name:"Alice",balance:1e4,role:"human"}),n.push({name:"Bob",balance:2e4,role:"human"}),n.push({name:"Carole",balance:0,role:"human"})),(e,t)=>(r(),u("div",null,[o("div",bs,[xs,o("div",vs,[o("button",{class:["btn btn-sm text-light",{"btn-outline-secondary":"fr"!=c(G),"btn-primary":"fr"==c(G)}],onClick:t[1]||(t[1]=e=>c(Z)("fr"))},"FR",2),o("button",{class:["btn btn-sm text-light",{"btn-outline-secondary":"en"!=c(G),"btn-primary":"en"==c(G)}],onClick:t[2]||(t[2]=e=>c(Z)("en"))},"EN",2)]),o("p",_s,[o(c(ee),null,{default:i((()=>[ws,ks,Ts,As,Ms,Ds])),_:1}),o(c(H),null,{default:i((()=>[Ss,Cs,Es,Ps,js,Is])),_:1}),o(Ce,{class:"px-0",info:"info-home-libreCurrency"})]),o(Se,{infoId:"info-home-libreCurrency"},{default:i((()=>[o(c(ee),null,{default:i((()=>[Os])),_:1}),o(c(H),null,{default:i((()=>[Ns])),_:1})])),_:1}),o("p",qs,[o(c(ee),null,{default:i((()=>[Fs,Rs,Us,Ls,Bs,Vs,Ys])),_:1}),o(c(H),null,{default:i((()=>[Xs,$s,zs,Ks,Js,Gs,Ws])),_:1})]),o(Se,{infoId:"info-home-funiter",class:"mx-auto w-auto mt-3"},{default:i((()=>[o(c(ee),null,{default:i((()=>[Qs])),_:1}),o(c(H),null,{default:i((()=>[Zs])),_:1})])),_:1})]),o(J,{accounts:n,selectedAccounts:n},{default:i((()=>[o(me,{class:"mx-auto",style:{"max-width":"400px"}}),o(Me,{class:"mx-auto sticky-top"}),o("div",Hs,[o(Tn,{class:"mb-3 mx-auto",style:{"max-width":"450px","min-width":"25vw"}}),o("div",er,[o(hs,{class:"mb-3",style:{"min-width":"35vw","max-width":"600px"}}),o(Vn,{class:"mb-3 mx-auto",style:{"max-width":"450px"}})]),o(Ul,{class:"mb-3 mx-auto",style:{"max-width":"450px","min-width":"25vw"}}),o(nl,{class:"mb-3 mx-auto",style:{"min-width":"35vw","max-width":"600px"}})])])),_:1})]))}}).directive("longclick",nr).mount("#app");

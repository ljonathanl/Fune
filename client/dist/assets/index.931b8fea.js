import{r as e,a as t,e as a,o as n,b as l,c as r,D as s,d as u,f as o,g as c,h as i,u as d,w as m,i as p,F as f,j as y,k as h,l as g,m as b,n as x,v,p as _,q as w,s as k,t as C,x as A,y as T,z as S}from"./vendor.3a91675e.js";!function(e=".",t="__import__"){try{self[t]=new Function("u","return import(u)")}catch(a){const n=new URL(e,location),l=e=>{URL.revokeObjectURL(e.src),e.remove()};self[t]=e=>new Promise(((a,r)=>{const s=new URL(e,n);if(self[t].moduleMap[s])return a(self[t].moduleMap[s]);const u=new Blob([`import * as m from '${s}';`,`${t}.moduleMap['${s}']=m;`],{type:"text/javascript"}),o=Object.assign(document.createElement("script"),{type:"module",src:URL.createObjectURL(u),onerror(){r(new Error(`Failed to import: ${e}`)),l(o)},onload(){a(self[t].moduleMap[s]),l(o)}});document.head.appendChild(o)})),self[t].moduleMap={}}}("/assets/");const M="human",D="bank",O="grew",j="melt",P={day:"day",month:"month",year:"year"},N={day:1,month:60,year:360};let q=0,U={};const I={name:"fÜne",logo:"fї",uValue:1e3,isPlaying:!1,doTx:(e,t=!0)=>{let a=Object.assign({from:"",to:"",message:"",value:0,date:(new Date).toISOString(),day:U.currency.elapsedTime},e);var n=U.accounts[a.from],l=U.accounts[a.to];return a.value<=0||!n||!l||n==l||n.role!=D&&n.balance-a.value<0?null:(l.role!=D&&(l.balance+=a.value),n.role!=D&&(n.balance-=a.value,n.balance<10&&(n.balance=0)),a.balanceFrom=n.balance,a.balanceTo=l.balance,U.transactions.push(a),U.transactions.length>1e3&&(U.transactions=U.transactions.slice(U.transactions.length-1e3)),t&&Y(),a)},getCurrency:()=>Object.assign({},U.currency),updateCurrency:e=>{const t=I.isPlaying;return t&&I.stop(),Object.assign(U.currency,e),t&&I.play(),Object.assign({},U.currency)},getAccount:e=>U.accounts[e],getAccounts:()=>Object.values(U.accounts),createAccount:e=>{if(e.name=e.name.trim(),!e.name||U.accounts[e.name])return null;let t=U.accounts[e.name]=Object.assign({name:"",balance:0,role:"wallet",date:(new Date).toISOString(),creationDay:U.currency.elapsedTime},e);return Y(),t},updateAccount:(e,t)=>{let a=U.accounts[e];return!a||"bank"==a.role||t.name&&e!=t.name?null:(a=Object.assign(a,t),Y(),a)},deleteAccount:e=>{let t=U.accounts[e];return t&&t.name!=I.name?(delete U.accounts[e],delete U.stats[e],Y(),t):null},getAccountTx:(e,t)=>{if(!U.accounts[e])return null;let a=U.transactions.filter((t=>t.from==e||t.to==e));return t>0&&t<a.length&&(a=a.slice(-t)),a},getAccountStats:(e,t=P.day)=>{if((t=P[t])||(t=P.day),!U.accounts[e])return null;const a=U.stats[e];if(!a)return[];const n=a[t];if(!n)return[];if(U.currency.elapsedTime<N[t])return[n[0],n[0]];let l=(Math.floor(U.currency.elapsedTime/N[t])+1)%100;return l>0&&U.currency.elapsedTime<100*N[t]?n.slice(0,l):n.slice(l).concat(n.slice(0,l))},getState:()=>({currency:U.currency,accounts:U.accounts,transactions:U.transactions,stats:U.stats})},L={date:(new Date).toISOString(),stepTime:1,uPerDay:1,elapsedTime:0,revaluationTime:1,nbMembers:0,monetaryMass:0,mode:j,lastMelt:0,average:0,quantitative:1,expression:"0.1"};I.expressionParser=(e,t)=>parseFloat(e);const E=/!x(\d+)/,V=I.uValue,F=()=>({isStatMonth:U.currency.elapsedTime%N.month==0,isStatYear:U.currency.elapsedTime%N.year==0,statDayIndex:U.currency.elapsedTime%100,statMonthIndex:U.currency.elapsedTime/N.month%100,statYearIndex:U.currency.elapsedTime/N.year%100}),Y=()=>{let e=0,t=0;const a=F();Object.values(U.accounts).forEach((n=>{const l=n.name.match(E);let r=1;l&&(r=parseInt(l[1])),n.role==M&&(t+=r),n.role!=D&&(e+=n.balance*r,((e,t,a=null)=>{a||(a=F());let n=U.stats[e.name];n||(n={},n[P.day]=new Array(100).fill(0),n[P.month]=new Array(100).fill(0),n[P.year]=new Array(100).fill(0),U.stats[e.name]=n),n[P.day][a.statDayIndex]=t,a.isStatMonth&&(n[P.month][a.statMonthIndex]=t),a.isStatYear&&(n[P.year][a.statYearIndex]=t)})(n,n.balance,a))})),U.currency.nbMembers=t,U.currency.monetaryMass=e,U.currency.average=t>0?Math.floor(e/t):0,((e=null)=>{e||(e=F());let t=Object.assign({},U.currency),a=U.stats[I.name];a||(a={},a[P.day]=new Array(100).fill(L),a[P.month]=new Array(100).fill(L),a[P.year]=new Array(100).fill(L),U.stats[I.name]=a),a[P.day][e.statDayIndex]=t,e.isStatMonth&&(a[P.month][e.statMonthIndex]=t),e.isStatYear&&(a[P.year][e.statYearIndex]=t)})(a)},R=(e=!0)=>{U.currency.elapsedTime++;let t=0,a=0;const n=U.currency.uPerDay>=0?Math.floor(U.currency.uPerDay):0,l=V*U.currency.revaluationTime*n,r=U.accounts[I.name],s=U.currency.elapsedTime%U.currency.revaluationTime==0;s&&U.currency.nbMembers>0&&(t=I.expressionParser(U.currency.expression,{M:U.currency.monetaryMass/l,N:U.currency.nbMembers,T:U.currency.elapsedTime}),U.currency.mode==O&&(t=1-1/(1+t)),t=Math.max(0,Math.min(1,t)),a=(100*t).toFixed(2)),Object.values(U.accounts).forEach((e=>{if(s&&t>0&&e.balance>9){let n=e.balance*t;n=Math.min(n>l?Math.ceil(n):Math.floor(n),e.balance),n<10&&(n=10),I.doTx({from:e.name,to:r.name,message:"!revaluation%"+a,value:n},!1)}e.role==M&&n>0&&I.doTx({from:r.name,to:e.name,message:"!1Ucreation",value:V*n},!1)})),s&&(U.currency.lastMelt=a,U.currency.quantitative=U.currency.quantitative*(1+1/(1/t-1))),Y(),e&&(q=setTimeout(R,1e3*U.currency.stepTime,!0)),I.onDayChange(U.currency.elapsedTime)};I.restoreState=e=>{e&&(e.currency&&(U.currency=Object.assign(L,e.currency)),e.accounts&&(U.accounts=e.accounts),e.transactions&&(U.transactions=e.transactions),e.stats&&(U.stats=e.stats))},I.start=(e,t)=>{I.restoreState(t),e&&(I.expressionParser=e),U.currency||(U.currency=L),U.accounts||(U.accounts={}),U.accounts[I.name]={name:I.name,balance:0,role:D,date:(new Date).toISOString(),creationDay:0},U.transactions||(U.transactions=[]),U.stats||(U.stats={})},I.onDayChange=()=>{},I.reset=()=>{I.stop(),Object.values(U.accounts).forEach((e=>{e.balance=0})),U.transactions=[],U.stats={},U.currency.elapsedTime=0,U.currency.lastMelt=0,U.currency.quantitative=1,Y()},I.play=(e=!0)=>{I.isPlaying||(0!=q&&(clearTimeout(q),q=0),I.isPlaying=e,R(e))},I.stop=()=>{I.isPlaying&&(0!=q&&(clearTimeout(q),q=0),I.isPlaying=!1)};const z={color:"#FFFFFF"},J=e({name:I.name,isPlaying:!1,currency:{},accounts:[],selectedAccounts:new Map});J.selectedAccounts.set(I.name,z);const X=I.uValue;J.isSelected=e=>null!=J.selectedAccounts.get(e.name),J.select=e=>{if("bank"==e.role)return;let a=J.selectedAccounts.get(e.name);!a&&I.getAccount(e.name)?(a={color:t.randomColor()},J.selectedAccounts.set(e.name,a)):J.selectedAccounts.delete(e.name)},J.doTx=e=>{const t=I.doTx({from:e.from,to:e.to,message:e.message,value:Math.floor(e.value*X)});return t&&J.refresh(),t},J.updateCurrency=e=>(J.currency=I.updateCurrency(e),J.currency),J.addAccounts=e=>{e&&(e.forEach((e=>{I.createAccount(e)||I.updateAccount(e.name,e)})),J.refresh())},J.createAccount=e=>{let t=I.createAccount(e);return t&&(J.accounts.push(t),J.refresh()),t},J.updateAccount=(e,t)=>{let a=I.updateAccount(e.name,t);return a&&(a=Object.assign(e,a),J.refresh()),a},J.deleteAccount=e=>{let t=null;return I.deleteAccount(e.name)&&(J.isSelected(e)&&J.select(e),t=e,J.refresh()),t},J.getAccountTx=(e,t)=>I.getAccountTx(e,t),J.getAccountStats=(e,t=statTypes.day)=>I.getAccountStats(e,t),J.onDayChange=()=>{J.refresh()},J.refresh=()=>{J.accounts=I.getAccounts(),J.currency=I.getCurrency()},J.reset=()=>{I.reset(),J.refresh(),J.isPlaying=I.isPlaying},J.play=e=>{I.play(e),J.refresh(),J.isPlaying=I.isPlaying},J.stop=()=>{I.stop(),J.refresh(),J.isPlaying=I.isPlaying},J.getState=()=>{const e=I.getState();return e.selectedAccounts=Object.fromEntries(J.selectedAccounts),e},J.restoreState=e=>{e&&(e.selectedAccounts&&e.selectedAccounts[I.name]&&(J.selectedAccounts=new Map(Object.entries(e.selectedAccounts)),J.selectedAccounts.set(I.name,z)),I.restoreState(e),J.refresh())},J.currencyWithoutDecimal=e=>Math.floor(e/X),J.currencyDecimal=e=>(e/X).toFixed(2),I.onDayChange=J.onDayChange,I.start(a,{}),J.refresh();const $={expose:[],props:{currency:Object,accounts:Array,selectedAccounts:Array,autoPlay:Boolean},setup(e){const{currency:t,accounts:a,selectedAccounts:r}=e;return n((()=>{t&&J.updateCurrency(t),a&&J.addAccounts(a),r&&r.forEach((e=>{J.select(e)}))})),(e,t)=>l(e.$slots,"default")}},B=r("en"),K=e=>({render(){if(B.value==e)return this.$slots.default()}}),G=e=>e[B.value],W=e=>{B.value="fr"==e?"fr":"en"};W((navigator.userLanguage||navigator.languages&&navigator.languages.length&&navigator.languages[0]||navigator.language||navigator.browserLanguage||navigator.systemLanguage).substring(0,2));const Z=K("fr"),Q=K("en");var H={deflate:8},ee=1,te=2,ae=4,ne=8,le=16,re={fat:0,amiga:1,vmz:2,unix:3,"vm/cms":4,atari:5,hpfs:6,macintosh:7,"z-system":8,cplm:9,"tops-20":10,ntfs:11,qdos:12,acorn:13,vfat:14,vms:15,beos:16,tandem:17,theos:18};function se(e,t){t.push(255&e)}function ue(e,t){t.push(255&e),t.push(e>>>8)}function oe(e,t){ue(65535&e,t),ue(e>>>16,t)}function ce(e){return e.shift()}function ie(e){return e.shift()|e.shift()<<8}function de(e){var t=ie(e),a=ie(e);return a>32768?((a-=32768)<<16|t)+32768*Math.pow(2,16):a<<16|t}function me(e){for(var t=[];0!==e[0];)t.push(String.fromCharCode(e.shift()));return e.shift(),t.join("")}var pe={zip:function(e,t){var a,n=0,l=[];return t||(t={}),a=t.level||6,"string"==typeof e&&(e=Array.prototype.map.call(e,(function(e){return e.charCodeAt(0)})),n|=ee),se(31,l),se(139,l),se(H.deflate,l),t.name&&(n|=ne),se(n,l),oe(t.timestamp||parseInt(Date.now()/1e3,10),l),se(1===a?4:9===a?2:0,l),se(re.unix,l),t.name&&(!function(e,t){var a,n=e.length;for(a=0;a<n;a+=1)se(e.charCodeAt(a),t)}(t.name.substring(t.name.lastIndexOf("/")+1),l),se(0,l)),s.deflate(e,a).forEach((function(e){se(e,l)})),oe(parseInt(u(e),16),l),oe(e.length,l),l},unzip:function(e){var t,a,n,l,r=Array.prototype.slice.call(e,0);if(31!==ce(r)||139!==ce(r))throw"Not a GZIP file";if(t=ce(r),!(t=Object.keys(H).some((function(e){return a=e,H[e]===t}))))throw"Unsupported compression method";if(n=ce(r),de(r),ce(r),t=ce(r),Object.keys(re).some((function(e){if(re[e]===t)return!0})),n&ae&&function(e,t){var a,n=[];for(a=0;a<t;a+=1)n.push(e.shift())}(r,t=ie(r)),n&ne&&me(r),n&le&&me(r),n&te&&ie(r),"deflate"===a&&(l=s.inflate(r.splice(0,r.length-8))),n&ee&&(l=Array.prototype.map.call(l,(function(e){return String.fromCharCode(e)})).join("")),de(r)>>>0!==parseInt(u(l),16))throw"Checksum does not match";if(de(r)!==l.length)throw"Size of decompressed file not correct";return l},get DEFAULT_LEVEL(){return 6}};const fe={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(e){var t,a,n,l,r,s,u,o="",c=0;for(e=fe._utf8_encode(e);c<e.length;)l=(t=e.charCodeAt(c++))>>2,r=(3&t)<<4|(a=e.charCodeAt(c++))>>4,s=(15&a)<<2|(n=e.charCodeAt(c++))>>6,u=63&n,isNaN(a)?s=u=64:isNaN(n)&&(u=64),o=o+this._keyStr.charAt(l)+this._keyStr.charAt(r)+this._keyStr.charAt(s)+this._keyStr.charAt(u);return o},decode:function(e){var t,a,n,l,r,s,u="",o=0;for(e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");o<e.length;)t=this._keyStr.indexOf(e.charAt(o++))<<2|(l=this._keyStr.indexOf(e.charAt(o++)))>>4,a=(15&l)<<4|(r=this._keyStr.indexOf(e.charAt(o++)))>>2,n=(3&r)<<6|(s=this._keyStr.indexOf(e.charAt(o++))),u+=String.fromCharCode(t),64!=r&&(u+=String.fromCharCode(a)),64!=s&&(u+=String.fromCharCode(n));return u=fe._utf8_decode(u)},_utf8_encode:function(e){e=e.replace(/\r\n/g,"\n");for(var t="",a=0;a<e.length;a++){var n=e.charCodeAt(a);n<128?t+=String.fromCharCode(n):n>127&&n<2048?(t+=String.fromCharCode(n>>6|192),t+=String.fromCharCode(63&n|128)):(t+=String.fromCharCode(n>>12|224),t+=String.fromCharCode(n>>6&63|128),t+=String.fromCharCode(63&n|128))}return t},_utf8_decode:function(e){for(var t="",a=0,n=0,l=0;a<e.length;)(n=e.charCodeAt(a))<128?(t+=String.fromCharCode(n),a++):n>191&&n<224?(l=e.charCodeAt(a+1),t+=String.fromCharCode((31&n)<<6|63&l),a+=2):(l=e.charCodeAt(a+1),c3=e.charCodeAt(a+2),t+=String.fromCharCode((15&n)<<12|(63&l)<<6|63&c3),a+=3);return t}};var ye={},he=-1,ge={}.toString;function be(e,t){var a,n=e.length;for(a=0;a<n;a++)if(e[a][1]===t)return!0;return!1}function xe(e){var t,a=e.length,n=[];for(t=0;t<a;t++)be(n,e[t][1])||n.push(e[t]);return n}function ve(e){return"[object Array]"===ge.call(e)}function _e(e,t,a){var n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=_!?()*",l=[],r=e;for(t=t||n.length,a=a||0;r>=t;)l.push(n.charCodeAt(r%t+a)),r=Math.floor(r/t-1);return l.push(n.charCodeAt(r+a)),l.reverse()}function we(e){return String.fromCharCode.apply(String,e)}function ke(e,t){var a,n,l,r;for(n in e)e.hasOwnProperty(n)&&(l=e[n],r=l,("[object Object]"===ge.call(r)||ve(l))&&(t=t.concat(xe(ke(l,t)))),isNaN(Number(n))&&(be(t,n)||((a=[]).push(we(_e(he+=1)),n),t.push(a))));return t}function Ce(e,t){var a,n,l,r,s,u;for(a=function(e){var t,a,n={},l=e.length;for(t=0;t<l;t++)n[(a=e[t])[0]]=a[1];return n}(t=xe(t=ke(e,t))),l=JSON.stringify(e),r=t.length,s=0;s<r;s++)n=t[s],l=l.replace(new RegExp(('"'+n[1]+'"').replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),"g"),'"'+n[0]+'"');return(u=JSON.parse(l))._=a,u}"object"==typeof exports&&"object"==typeof module&&module.exports,ye.compress=function(e,t){t||(he=-1);var a,n=t||[];return ve(e)?(!function(e,t){var a,n;for(a=0,n=e.length;a<n;a++)e[a]=ye.compress(e[a],t)}(e,n),a=e):a=Ce(e,n),a},ye.pack=function(e,t){var a=JSON.stringify(t?ye.compress(e):e);return fe.encode(String.fromCharCode.apply(String,pe.zip(a,{level:9})))},ye.decompress=function(e){var t,a=JSON.parse(JSON.stringify(e));return ve(a)?function(e){var t,a;for(t=0,a=e.length;t<a;t++)e[t]=ye.decompress(e[t])}(a):t=function(e){var t,a,n;for(n in t=JSON.parse(JSON.stringify(e._)),delete e._,a=JSON.stringify(e),t)t.hasOwnProperty(n)&&(a=a.replace(new RegExp('"'+n+'"',"g"),'"'+t[n]+'"'));return a}(a),t?JSON.parse(t):a},ye.unpack=function(e,t){var a=function(e){for(var t=0,a=e.length,n=[];t<a;t++)n.push(e.charCodeAt(t));return n}(fe.decode(e)),n=pe.unzip(a,{level:9}),l=JSON.parse(n);return t?ye.decompress(l):l};const Ae={class:"mb-3 text-center"},Te=i("i",{class:"fa fa-upload"},null,-1),Se=p(" load"),Me=p(" charger"),De=i("i",{class:"fa fa-download"},null,-1),Oe=p(" save"),je=p(" sauvegarder"),Pe=i("i",{class:"fa fa-undo"},null,-1),Ne=p(" reset"),qe=p(" RAZ"),Ue={expose:[],setup(e){const t=e=>{const t=e.target.files[0];if(t){const e=new FileReader;e.onload=function(e){var t=e.target.result;a(t)},e.readAsText(t)}else alert(G({en:"file not found",fr:"fichier introuvable"}));e.target.value=null},a=e=>{try{const t=ye.unpack(e,!0);console.log(t),J.stop(),J.restoreState(t)}catch(t){console.log(t),alert(G({en:"can not read the file",fr:"le fichier ne peut pas être lu"}))}};return(e,a)=>(o(),c("div",Ae,[i("label",{class:["btn btn-dark mb-0",{disabled:d(J).isPlaying}]},[Te,i(d(Q),null,{default:m((()=>[Se])),_:1}),i(d(Z),null,{default:m((()=>[Me])),_:1}),i("input",{type:"file",hidden:"",onChange:t},null,32)],2),i("button",{class:"btn btn-light text-dark ml-1",onClick:a[1]||(a[1]=e=>(()=>{const e=J.getState();JSON.stringify(e);var t=ye.pack(e,!0),a=new Blob([t],{type:"text/plain;charset=utf-8"});f.saveAs(a,"fune_"+(new Date).toISOString().substring(0,16)+".fun")})()),disabled:d(J).isPlaying},[De,i(d(Q),null,{default:m((()=>[Oe])),_:1}),i(d(Z),null,{default:m((()=>[je])),_:1})],8,["disabled"]),i("button",{class:"btn btn-secondary ml-3",onClick:a[2]||(a[2]=e=>d(J).reset())},[Pe,i(d(Q),null,{default:m((()=>[Ne])),_:1}),i(d(Z),null,{default:m((()=>[qe])),_:1})])]))}},Ie={class:"navbar navbar-dark bg-dark w-100"},Le={class:"text-right mx-auto",style:{width:"400px"}},Ee=i("i",{class:"fa fa-play"},null,-1),Ve=p(" play"),Fe=p(" lecture"),Ye=i("i",{class:"fa fa-pause"},null,-1),Re=p(" pause"),ze=p(" pause"),Je=i("i",{class:"fa fa-step-forward"},null,-1),Xe=p(" next"),$e=p(" suivant"),Be={expose:[],setup(e){const t=()=>{J.play(!1)};return(e,a)=>{const n=y("longclick");return o(),c("nav",Ie,[i("div",Le,[i("span",{onClick:a[1]||(a[1]=e=>{window.scroll(0,0)}),class:"pointer bg-primary px-1 display-6 position-absolute",style:{"font-family":"monospace",left:"0.5em"},title:d(J).name},"fї",8,["title"]),d(J).isPlaying?h("",!0):(o(),c("button",{key:0,class:"btn btn-outline-primary",onClick:a[2]||(a[2]=e=>d(J).play()),style:{width:"120px"}},[Ee,i(d(Q),null,{default:m((()=>[Ve])),_:1}),i(d(Z),null,{default:m((()=>[Fe])),_:1})])),d(J).isPlaying?(o(),c("button",{key:1,class:"btn btn-outline-light",onClick:a[3]||(a[3]=e=>d(J).stop()),style:{width:"120px"}},[Ye,i(d(Q),null,{default:m((()=>[Re])),_:1}),i(d(Z),null,{default:m((()=>[ze])),_:1})])):h("",!0),g(i("button",{class:"btn btn-outline-light mx-3",disabled:d(J).isPlaying},[Je,i(d(Q),null,{default:m((()=>[Xe])),_:1}),i(d(Z),null,{default:m((()=>[$e])),_:1})],8,["disabled"]),[[n,t]])])])}}},Ke={class:"text-center mb-3"},Ge=p("currency"),We=p("monnaie"),Ze={class:"input-group mb-1"},Qe={class:"input-group-text"},He=p("Ü revaluation"),et=p("réévaluation de Ü"),tt={value:"melt"},at=p("melting"),nt=p("fonte"),lt={value:"grew"},rt=p("growth"),st=p("croissance"),ut={class:"input-group mb-1"},ot={key:0,class:"input-group-text"},ct={key:1,class:"input-group-text"},it=i("span",{class:"input-group-text"}," ) Ü(t)",-1),dt={class:"input-group mb-1"},mt={class:"input-group-text",for:"currencyUPerDay"},pt=p("Ü per day"),ft=p("Ü par jour"),yt=i("span",{class:"input-group-text"},"Ü",-1),ht={class:"input-group mb-1"},gt={class:"input-group-text",for:"currencyRevaluationTime"},bt=p("revaluation period"),xt=p("réévaluation"),vt={class:"input-group-text"},_t=p("day"),wt={key:0},kt=p("jour"),Ct={key:0},At={class:"input-group mb-1"},Tt={class:"input-group-text",for:"currencyStepTime"},St=p("day duration"),Mt=p("durée d'un jour"),Dt={class:"input-group-text"},Ot=p("second"),jt={key:0},Pt=p("seconde"),Nt={key:0},qt={key:0,class:"d-flex align-items-start flex-wrap",style:{"justify-content":"space-evenly"}},Ut=p("ündo!"),It=p("annüler!"),Lt=p("üpdate!"),Et=p("valïder!"),Vt={class:"input-group mb-1 mt-3"},Ft={class:"input-group-text",for:"currencyMass"},Yt=p("monetary mass (M)"),Rt=p("masse monétaire (M)"),zt=i("span",{class:"input-group-text"},"Ü",-1),Jt={class:"input-group mb-1"},Xt={class:"input-group-text",for:"currencyNbMembers"},$t=p("Üman accounts (N)"),Bt=p("comptes Ümains (N)"),Kt={class:"input-group mb-1"},Gt={class:"input-group-text",for:"currencyAvg"},Wt=p("average"),Zt=p("moyenne"),Qt={class:"input-group-text"},Ht=p("Ü / Üman"),ea=p("Ü / Ümain"),ta={class:"input-group mb-1"},aa={class:"input-group-text",for:"currencyQuantitative"},na=p("quantitative"),la=p("quantitatif"),ra={class:"input-group-text"},sa=p("Ü / Ü(0)"),ua=p("Ü / Ü(0)"),oa={class:"input-group mb-1"},ca={class:"input-group-text",for:"currencyLastGrew"},ia=p("last growth"),da=p("dernière croissance"),ma=i("span",{class:"input-group-text"},"%",-1),pa={class:"input-group mb-1"},fa={class:"input-group-text",for:"currencyLastMelt"},ya=p("last melting"),ha=p("dernière fonte"),ga=i("span",{class:"input-group-text"},"%",-1),ba={class:"input-group mb-1"},xa={class:"input-group-text",for:"currencyElapsedTime"},va=p("elapsed time (T)"),_a=p("temps écoulé (T)"),wa={class:"input-group-text"},ka=p("day"),Ca={key:0},Aa=p("jour"),Ta={key:0},Sa={expose:[],setup(t){const a=e({expression:"",mode:"melt",uPerDay:1,stepTime:0,revaluationTime:0}),l=b((()=>0==J.currency.lastMelt?0:(1/(1/(J.currency.lastMelt/100)-1)*100).toFixed(2))),r=b((()=>!(!J||!J.currency)&&(J.currency.expression!=a.expression||J.currency.mode!=a.mode||J.currency.uPerDay!=a.uPerDay||J.currency.revaluationTime!=a.revaluationTime||J.currency.stepTime!=a.stepTime)));return x((()=>[J.currency.expression,J.currency.mode,J.currency.uPerDay,J.currency.revaluationTime,J.currency.stepTime]),(()=>{Object.assign(a,J.currency)})),n((()=>{Object.assign(a,J.currency)})),(e,t)=>(o(),c("div",null,[i("h4",Ke,[i(d(Q),null,{default:m((()=>[Ge])),_:1}),i(d(Z),null,{default:m((()=>[We])),_:1})]),i("form",null,[i("div",Ze,[i("label",Qe,[i(d(Q),null,{default:m((()=>[He])),_:1}),i(d(Z),null,{default:m((()=>[et])),_:1})]),g(i("select",{"onUpdate:modelValue":t[1]||(t[1]=e=>d(a).mode=e),id:"currencyMode",class:["form-control",{"bg-primary":d(a).mode!=d(J).currency.mode}],disabled:d(J).isPlaying},[i("option",tt,[i(d(Q),null,{default:m((()=>[at])),_:1}),i(d(Z),null,{default:m((()=>[nt])),_:1})]),i("option",lt,[i(d(Q),null,{default:m((()=>[rt])),_:1}),i(d(Z),null,{default:m((()=>[st])),_:1})])],10,["disabled"]),[[v,d(a).mode]])]),i("div",ut,["melt"==d(a).mode?(o(),c("span",ot,"Ü(t-1) = ( 1 - ")):(o(),c("span",ct,"Ü(t+1) = ( 1 + ")),g(i("input",{id:"currencyExpression","onUpdate:modelValue":t[2]||(t[2]=e=>d(a).expression=e),type:"text",class:["form-control text-right",{"bg-primary":d(a).expression!=d(J).currency.expression}],disabled:d(J).isPlaying},null,10,["disabled"]),[[_,d(a).expression]]),it]),i("div",dt,[i("label",mt,[i(d(Q),null,{default:m((()=>[pt])),_:1}),i(d(Z),null,{default:m((()=>[ft])),_:1})]),g(i("input",{id:"currencyUPerDay","onUpdate:modelValue":t[3]||(t[3]=e=>d(a).uPerDay=e),type:"number",min:"0",max:"1000",step:"1",class:["form-control text-right",{"bg-primary":d(a).uPerDay!=d(J).currency.uPerDay}],disabled:d(J).isPlaying},null,10,["disabled"]),[[_,d(a).uPerDay]]),yt]),i("div",ht,[i("label",gt,[i(d(Q),null,{default:m((()=>[bt])),_:1}),i(d(Z),null,{default:m((()=>[xt])),_:1})]),g(i("input",{id:"currencyRevaluationTime","onUpdate:modelValue":t[4]||(t[4]=e=>d(a).revaluationTime=e),type:"number",min:"1",max:"400",step:"1",class:["form-control text-right",{"bg-primary":d(a).revaluationTime!=d(J).currency.revaluationTime}],disabled:d(J).isPlaying},null,10,["disabled"]),[[_,d(a).revaluationTime]]),i("span",vt,[i(d(Q),null,{default:m((()=>[_t,d(a).revaluationTime>1?(o(),c("span",wt,"s")):h("",!0)])),_:1}),i(d(Z),null,{default:m((()=>[kt,d(a).revaluationTime>1?(o(),c("span",Ct,"s")):h("",!0)])),_:1})])]),i("div",At,[i("label",Tt,[i(d(Q),null,{default:m((()=>[St])),_:1}),i(d(Z),null,{default:m((()=>[Mt])),_:1})]),g(i("input",{id:"currencyStepTime","onUpdate:modelValue":t[5]||(t[5]=e=>d(a).stepTime=e),type:"number",min:"1",max:"90000",step:"1",class:["form-control text-right",{"bg-primary":d(a).stepTime!=d(J).currency.stepTime}],disabled:d(J).isPlaying},null,10,["disabled"]),[[_,d(a).stepTime]]),i("span",Dt,[i(d(Q),null,{default:m((()=>[Ot,d(a).stepTime>1?(o(),c("span",jt,"s")):h("",!0)])),_:1}),i(d(Z),null,{default:m((()=>[Pt,d(a).stepTime>1?(o(),c("span",Nt,"s")):h("",!0)])),_:1})])]),d(r)?(o(),c("div",qt,[i("button",{type:"button",class:"btn btn-secondary mr-auto",onClick:t[6]||(t[6]=e=>Object.assign(d(a),d(J).currency))},[i(d(Q),null,{default:m((()=>[Ut])),_:1}),i(d(Z),null,{default:m((()=>[It])),_:1})]),i("button",{type:"button",class:"btn btn-primary",onClick:t[7]||(t[7]=e=>(()=>{const{expression:e,mode:t,uPerDay:n,revaluationTime:l,stepTime:r}=a;J.updateCurrency({expression:e,mode:t,uPerDay:n,revaluationTime:l,stepTime:r})})())},[i(d(Q),null,{default:m((()=>[Lt])),_:1}),i(d(Z),null,{default:m((()=>[Et])),_:1})])])):h("",!0),i("div",Vt,[i("label",Ft,[i(d(Q),null,{default:m((()=>[Yt])),_:1}),i(d(Z),null,{default:m((()=>[Rt])),_:1})]),i("input",{id:"currencyMass",value:d(J).currencyWithoutDecimal(d(J).currency.monetaryMass),type:"text",class:"form-control text-right",disabled:""},null,8,["value"]),zt]),i("div",Jt,[i("label",Xt,[i(d(Q),null,{default:m((()=>[$t])),_:1}),i(d(Z),null,{default:m((()=>[Bt])),_:1})]),i("input",{id:"currencyNbMembers",value:d(J).currency.nbMembers,type:"text",class:"form-control text-right",disabled:""},null,8,["value"])]),i("div",Kt,[i("label",Gt,[i(d(Q),null,{default:m((()=>[Wt])),_:1}),i(d(Z),null,{default:m((()=>[Zt])),_:1})]),i("input",{id:"currencyAvg",value:d(J).currencyWithoutDecimal(d(J).currency.average),type:"text",class:"form-control text-right",disabled:""},null,8,["value"]),i("span",Qt,[i(d(Q),null,{default:m((()=>[Ht])),_:1}),i(d(Z),null,{default:m((()=>[ea])),_:1})])]),i("div",ta,[i("label",aa,[i(d(Q),null,{default:m((()=>[na])),_:1}),i(d(Z),null,{default:m((()=>[la])),_:1})]),i("input",{id:"currencyQuantitative",value:d(J).currency.quantitative.toFixed(2),type:"text",class:"form-control text-right",disabled:""},null,8,["value"]),i("span",ra,[i(d(Q),null,{default:m((()=>[sa])),_:1}),i(d(Z),null,{default:m((()=>[ua])),_:1})])]),i("div",oa,[i("label",ca,[i(d(Q),null,{default:m((()=>[ia])),_:1}),i(d(Z),null,{default:m((()=>[da])),_:1})]),i("input",{id:"currencyLastGrew",value:d(l),type:"text",class:"form-control text-right",disabled:""},null,8,["value"]),ma]),i("div",pa,[i("label",fa,[i(d(Q),null,{default:m((()=>[ya])),_:1}),i(d(Z),null,{default:m((()=>[ha])),_:1})]),i("input",{id:"currencyLastMelt",value:d(J).currency.lastMelt,type:"text",class:"form-control text-right",disabled:""},null,8,["value"]),ga]),i("div",ba,[i("label",xa,[i(d(Q),null,{default:m((()=>[va])),_:1}),i(d(Z),null,{default:m((()=>[_a])),_:1})]),g(i("input",{id:"currencyElapsedTime","onUpdate:modelValue":t[8]||(t[8]=e=>d(J).currency.elapsedTime=e),type:"text",class:"form-control text-right",disabled:""},null,512),[[_,d(J).currency.elapsedTime]]),i("span",wa,[i(d(Q),null,{default:m((()=>[ka,d(J).currency.elapsedTime>1?(o(),c("span",Ca,"s")):h("",!0)])),_:1}),i(d(Z),null,{default:m((()=>[Aa,d(J).currency.elapsedTime>1?(o(),c("span",Ta,"s")):h("",!0)])),_:1})])])])]))}},Ma={class:"text-center mb-3"},Da=p("transaction"),Oa=p("transaction"),ja={class:"text-center"},Pa={class:"input-group mb-1"},Na={class:"input-group-text",for:"txFrom"},qa=p(" fröm "),Ua=p(" de "),Ia={class:"input-group-text",for:"txTo"},La=p(" tö "),Ea=p(" à "),Va=i("option",{disabled:"",value:""},"select öne",-1),Fa=i("option",{disabled:"",value:""},"qüi",-1),Ya={class:"input-group mb-1"},Ra=i("span",{class:"input-group-text"},[i("small",null,"Ü")],-1),za={expose:[],setup(t){const a=e({from:"fÜne",to:"",value:1}),n=b((()=>J.accounts)),l=b((()=>J.accounts));return(e,t)=>(o(),c("div",null,[i("h4",Ma,[i(d(Q),null,{default:m((()=>[Da])),_:1}),i(d(Z),null,{default:m((()=>[Oa])),_:1})]),i("form",ja,[i("div",Pa,[i("label",Na,[i(d(Q),null,{default:m((()=>[qa])),_:1}),i(d(Z),null,{default:m((()=>[Ua])),_:1})]),g(i("select",{"onUpdate:modelValue":t[1]||(t[1]=e=>d(a).from=e),id:"txFrom",class:"form-control"},[(o(!0),c(w,null,k(d(n),(e=>(o(),c("option",{value:e.name,key:e.name},C(e.name),9,["value"])))),128))],512),[[v,d(a).from]]),i("label",Ia,[i(d(Q),null,{default:m((()=>[La])),_:1}),i(d(Z),null,{default:m((()=>[Ea])),_:1})]),g(i("select",{"onUpdate:modelValue":t[2]||(t[2]=e=>d(a).to=e),id:"txTo",class:"form-control"},[i(d(Q),null,{default:m((()=>[Va])),_:1}),i(d(Z),null,{default:m((()=>[Fa])),_:1}),(o(!0),c(w,null,k(d(l),(e=>(o(),c("option",{value:e.name,key:e.name},C(e.name),9,["value"])))),128))],512),[[v,d(a).to]])]),i("div",Ya,[g(i("input",{"onUpdate:modelValue":t[3]||(t[3]=e=>d(a).value=e),type:"number",step:"any",class:"form-control text-right"},null,512),[[_,d(a).value]]),Ra,i("button",{type:"button",class:"btn btn-primary",onClick:t[4]||(t[4]=e=>d(J).doTx(d(a)))},"ök!")])])]))}};function Ja(e){return parseInt(e,10)}function Xa(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function $a(e,t,a){var n=e.x-t.x,l=e.y-t.y,r=Math.sqrt(n*n+l*l),s=n/r,u=l/r;return{x:t.x+s*a,y:t.y+u*a}}function Ba(e,t){var a=e.shift();return"M"+a.x+" "+a.y+e.map((function(n,l){var r,s,u,o=e[l+1],c=e[l-1]||a,i=o&&(s=n,u=c,Ja((r=o).x+u.x)===Ja(2*s.x)&&Ja(r.y+u.y)===Ja(2*s.y));if(!o||i)return"L"+n.x+" "+n.y;var d=Math.min(Xa(c,n),Xa(o,n)),m=d/2<t?d/2:t,p=$a(c,n,m),f=$a(o,n,m);return"L"+p.x+" "+p.y+"S"+n.x+" "+n.y+" "+f.x+" "+f.y})).join("")}var Ka={props:["smooth","data","boundary","radius","id","max","min","color","dash"],render:function(){var e,t=this,a=t.data,n=t.smooth,l=t.boundary,r=t.radius,s=t.id,u=t.max,o=t.min,c=t.dash,i=Ba(function(e,t,a){var n=t.minX,l=t.minY,r=t.maxX,s=t.maxY,u=a.max,o=a.min,c=e.map((function(e){return"number"==typeof e?e:e.value})),i=Math.min.apply(Math,c.concat([o]))-.001,d=(r-n)/(c.length-1),m=(s-l)/(Math.max.apply(Math,c.concat([u]))+.001-i);return c.map((function(e,t){return{x:t*d+n,y:s-(e-i)*m+1e-5*+(t===c.length-1)-1e-5*+(0===t)}}))}(a,l,{max:u,min:o}),n?r:0);return e=this.color?this.color:"url(#"+s+")",A("path",{d:i,fill:"none",stroke:e,"stroke-dasharray":c})}},Ga={props:["boundary","max","min"],render:function(){var e=this.boundary;return[A("text",{x:e.minX,y:e.minY-2,fill:"#CCCCCC88","font-size":"0.6em"},Math.round(this.max/1e3)),A("line",{x1:e.minX,y1:e.minY,x2:e.maxX,y2:e.minY,stroke:"#CCCCCC88"}),A("text",{x:e.minX,y:e.maxY-2,fill:"#CCCCCC88","font-size":"0.6em"},Math.round(this.min/1e3)),A("line",{x1:e.minX,y1:e.maxY,x2:e.maxX,y2:e.maxY,stroke:"#CCCCCC88"})]}},Wa={props:["gradient","gradientDirection","id"],render:function(){var e=this,t=e.gradient,a=e.gradientDirection,n=e.id,l=t.length-1||1,r=t.slice().reverse().map((function(e,t){return A("stop",{offset:t/l,"stop-color":e})}));return A("defs",[A("linearGradient",{id:n,x1:+("left"===a),y1:+("top"===a),x2:+("right"===a),y2:+("bottom"===a)},r)])}},Za={name:"Trend",props:{data:{type:Array,required:!0},autoDraw:Boolean,autoDrawDuration:{type:Number,default:2e3},autoDrawEasing:{type:String,default:"ease"},gradient:{type:Array,default:function(){return["#000"]}},gradientDirection:{type:String,default:"top"},max:{type:Number,default:-1/0},min:{type:Number,default:1/0},height:Number,width:Number,padding:{type:Number,default:8},radius:{type:Number,default:10},smooth:Boolean},watch:{data:{immediate:!0,handler:function(e){var t=this;this.$nextTick((function(){if(!t.$isServer&&t.$refs.path&&t.autoDraw){var e=t.$refs.path.$el,a=e.getTotalLength();e.style.transition="none",e.style.strokeDasharray=a+" "+a,e.style.strokeDashoffset=Math.abs(a-(t.lastLength||0)),e.getBoundingClientRect(),e.style.transition="stroke-dashoffset "+t.autoDrawDuration+"ms "+t.autoDrawEasing,e.style.strokeDashoffset=0,t.lastLength=a}}))}}},render:function(){if(this.data&&!(this.data.length<2)){var e=this.width,t=this.height,a=this.padding,n=e||300,l=t||150,r={minX:a,minY:a,maxX:n-a,maxY:l-a};return A("svg",{width:e||"100%",height:t||"25%",viewBox:"0 0 "+n+" "+l},[A(Wa,{gradient:this.gradient,gradientDirection:this.gradientDirection,id:"stats"}),A(Ga,{boundary:r,max:Math.max.apply(Math,this.data.concat([this.max])),min:Math.min.apply(Math,this.data.concat([this.min]))}),A(Ka,{smooth:this.smooth,data:this.data,boundary:r,radius:this.radius,max:this.max,min:this.min,id:"stats",ref:"path",dash:"0"})])}}},Qa={name:"Trends",props:{data:{type:Array,required:!0},colors:{type:Array,required:!0},min:{type:Number,default:1/0},height:Number,width:Number,padding:{type:Number,default:8},radius:{type:Number,default:10},smooth:Boolean},render:function(){if(this.data){var e=this.width,t=this.height,a=this.padding,n=e||300,l=t||200,r={minX:a,minY:a,maxX:n-a,maxY:l-a},s=1e3;for(let e=0;e<this.data.length;e++){const t=this.data[e];if(t&&t.length>1)for(let e=0;e<t.length;e++)s=Math.max(s,t[e])}var u=[];for(let e=0;e<this.data.length;e++){const t=this.data[e];t&&t.length>1&&u.push(A(Ka,{smooth:this.smooth,data:t,boundary:r,radius:this.radius,max:s,min:this.min,id:"stats",ref:"path"+e,color:this.colors[e],dash:e==this.data.length-1?"2 2":"0"}))}if(0!=u.length)return A("svg",{width:e||"100%",height:t||"25%",viewBox:"0 0 "+n+" "+l},[A(Ga,{boundary:r,max:s,min:this.min}),u])}}};const Ha={style:{width:"400px"}},en={class:"text-center mb-3"},tn=p("account"),an=p("compte"),nn={class:"mt-3 mb-3"},ln={class:"text-center mb-6"},rn={disabled:"",value:null},sn=p("whö"),un=p("qüi"),on={key:0},cn={class:"display-3 text-center"},dn={class:"align-baseline",style:{"font-size":"50%"}},mn=i("small",null," Ü",-1),pn={key:0,class:"display-5 text-center"},fn=p("bank"),yn=p("banque"),hn={key:1,class:"display-5 text-center"},gn=p("wallet"),bn=p("compte simple"),xn={key:2,class:"display-5 text-center"},vn=p("Üman"),_n=p("Ümain"),wn={class:"text-center mt-4"},kn=p("transaction"),Cn=p("transaction"),An={key:3,class:"mb-4 justify-content-center"},Tn={class:"input-group mb-1"},Sn=i("small",{class:"input-group-text"},"Ü",-1),Mn={class:"input-group-text",for:"txTo"},Dn=p(" tö "),On=p(" à "),jn={disabled:"",value:""},Pn=p("someöne"),Nn=p("qüi"),qn={class:"input-group"},Un={class:"input-group-text",for:"txMessage"},In=p("message"),Ln=p("message"),En={class:"text-center mt-4"},Vn=p("stats"),Fn=p("stats"),Yn={class:"text-center mt-4"},Rn=p("diary"),zn=p("journal"),Jn={class:"list-group list-group-flush",style:{"max-width":"440px"}},Xn={class:"d-flex w-100 justify-content-between"},$n={key:0},Bn={style:{width:"80px"},class:"badge bg-light text-dark text-right"},Kn=i("small",null," Ü",-1),Gn={style:{width:"70px"},class:"d-inline-block text-center"},Wn=p(" to "),Zn=p(" à "),Qn={key:1},Hn={style:{width:"80px"},class:"badge bg-primary text-right"},el=i("small",null," Ü",-1),tl={style:{width:"70px"},class:"d-inline-block text-center"},al=p(" from "),nl=p(" de "),ll={expose:[],setup(t){const a=e({account:null,accounts:b((()=>J.accounts.filter((e=>"bank"!=e.role)))),otherAccounts:b((()=>a.account?J.accounts.filter((e=>"bank"!=e.role&&e.name!=a.account.name)):null)),stats:[],transactions:[],tx:{from:"",to:"",message:"",value:1}}),n=()=>{a.account&&(a.transactions=J.getAccountTx(a.account.name,10).reverse(),a.stats=J.getAccountStats(a.account.name,"day"))};x((()=>a.account),(()=>{n()})),x((()=>J.currency),n,{deep:!0});const l=e=>J.currencyDecimal(e).slice(-2),r=e=>{if("!1Ucreation"==e)return G({en:"> u crëate Ü!",fr:"> crëation de Ü !"});if(0==e.indexOf("!revaluation%")){let t=e.split("%")[1];return G({en:"> all the Ü melt by "+t+"%!",fr:"> tous les Ü fondent de "+t+"% !"})}return e?"> "+e:""};return(e,t)=>{return o(),c("div",Ha,[i("h4",en,[i(d(Q),null,{default:m((()=>[tn])),_:1}),i(d(Z),null,{default:m((()=>[an])),_:1})]),i("div",nn,[i("h3",ln,[g(i("select",{"onUpdate:modelValue":t[1]||(t[1]=e=>d(a).account=e),class:"text-center form-control mx-auto",style:{"max-width":"300px","font-size":"1.3em","text-align-last":"center"}},[i("option",rn,[i(d(Q),null,{default:m((()=>[sn])),_:1}),i(d(Z),null,{default:m((()=>[un])),_:1})]),(o(!0),c(w,null,k(d(a).accounts,(e=>(o(),c("option",{value:e,key:e.name},[i("strong",null,C(e.name),1)],8,["value"])))),128))],512),[[v,d(a).account]])]),d(a).account?(o(),c("div",on,[i("div",cn,[i("span",null,C((s=d(a).account.balance,J.currencyDecimal(s).slice(0,-3))),1),i("small",dn,"."+C(l(d(a).account.balance)),1),mn]),"bank"==d(a).account.role?(o(),c("p",pn,[i(d(Q),null,{default:m((()=>[fn])),_:1}),i(d(Z),null,{default:m((()=>[yn])),_:1})])):"wallet"==d(a).account.role?(o(),c("p",hn,[i(d(Q),null,{default:m((()=>[gn])),_:1}),i(d(Z),null,{default:m((()=>[bn])),_:1})])):(o(),c("p",xn,[i(d(Q),null,{default:m((()=>[vn])),_:1}),i(d(Z),null,{default:m((()=>[_n])),_:1})])),i("h4",wn,[i(d(Q),null,{default:m((()=>[kn])),_:1}),i(d(Z),null,{default:m((()=>[Cn])),_:1})]),"bank"==d(a).account.role||d(a).account.balance>0?(o(),c("form",An,[i("div",null,[i("div",Tn,[g(i("input",{"onUpdate:modelValue":t[2]||(t[2]=e=>d(a).tx.value=e),type:"number",max:Math.round(d(a).account.balance/100),step:"any",min:"0",class:"form-control text-right"},null,8,["max"]),[[_,d(a).tx.value]]),Sn,i("label",Mn,[i(d(Q),null,{default:m((()=>[Dn])),_:1}),i(d(Z),null,{default:m((()=>[On])),_:1})]),g(i("select",{"onUpdate:modelValue":t[3]||(t[3]=e=>d(a).tx.to=e),id:"txTo",class:"form-control"},[i("option",jn,[i(d(Q),null,{default:m((()=>[Pn])),_:1}),i(d(Z),null,{default:m((()=>[Nn])),_:1})]),(o(!0),c(w,null,k(d(a).otherAccounts,(e=>(o(),c("option",{value:e.name,key:e.name},[i("strong",null,C(e.name),1)],8,["value"])))),128))],512),[[v,d(a).tx.to]]),i("button",{type:"button",class:"btn btn-primary",onClick:t[4]||(t[4]=e=>(a.tx.from=a.account.name,console.log(a.tx),J.doTx(a.tx),void n()))},"ök!")]),i("div",qn,[i("label",Un,[i(d(Q),null,{default:m((()=>[In])),_:1}),i(d(Z),null,{default:m((()=>[Ln])),_:1})]),g(i("input",{"onUpdate:modelValue":t[5]||(t[5]=e=>d(a).tx.message=e),type:"text",maxlength:"32",class:"form-control",id:"txMessage"},null,512),[[_,d(a).tx.message]])])])])):h("",!0),i("h4",En,[i(d(Q),null,{default:m((()=>[Vn])),_:1}),i(d(Z),null,{default:m((()=>[Fn])),_:1})]),i(d(Za),{data:d(a).stats,gradientDirection:"top",gradient:["#f560a2","#e83283","#bd125e"],padding:10,radius:8,"stroke-width":1.5,"stroke-linecap":"butt",min:0,max:1e3,"auto-draw":"",smooth:""},null,8,["data","stroke-width"]),i("h4",Yn,[i(d(Q),null,{default:m((()=>[Rn])),_:1}),i(d(Z),null,{default:m((()=>[zn])),_:1})]),i("ul",Jn,[(o(!0),c(w,null,k(d(a).transactions,(e=>{return o(),c("li",{key:e.id,class:"list-group-item list-group-item-action"},[i("div",Xn,[i("div",null,[e.from==d(a).account.name?(o(),c("h5",$n,[i("span",Bn,[p(C(d(J).currencyDecimal(e.value)),1),Kn]),i("span",Gn,[i(d(Q),null,{default:m((()=>[Wn])),_:1}),i(d(Z),null,{default:m((()=>[Zn])),_:1})]),i("strong",null,[i("span",null,C(e.to),1)])])):(o(),c("h5",Qn,[i("span",Hn,[p(C(d(J).currencyDecimal(e.value)),1),el]),i("span",tl,[i(d(Q),null,{default:m((()=>[al])),_:1}),i(d(Z),null,{default:m((()=>[nl])),_:1})]),i("strong",null,[i("span",null,C(e.from),1)])])),p(" "+C(r(e.message)),1)]),i("small",null,C((t=e.day,t>=J.currency.elapsedTime?G({en:"today",fr:"aujourd'hui"}):t==J.currency.elapsedTime-1?G({en:"yesterday",fr:"hier"}):G({en:J.currency.elapsedTime-t+" days ago",fr:"il y a "+(J.currency.elapsedTime-t)+" jours"}))),1)])]);var t})),128))])])):h("",!0)])]);var s}}},rl={class:"text-center mb-3"},sl=p("accounts"),ul=p("comptes"),ol={class:"table table-hover"},cl=p("stats"),il=p("stats"),dl=p("name"),ml=p("nom"),pl=p("role"),fl=p("rôle"),yl=p("balance"),hl=p("solde"),gl={class:"text-center"},bl=i("small",null,"Ü",-1),xl=p("man"),vl=i("small",null,"Ü",-1),_l=p("main"),wl=p("wället"),kl=p("sïmple"),Cl={key:2,class:"btn btn-sm btn-danger",disabled:""},Al=p("bänk"),Tl=p("bänque"),Sl={class:"text-right"},Ml=i("small",null," Ü ",-1),Dl=p("reset"),Ol=p("raz"),jl=i("i",{class:"fa fa-trash"},null,-1),Pl={class:"input-group"},Nl={value:"human"},ql=p("Üman"),Ul=p("Ümain"),Il={value:"wallet"},Ll=p("wället"),El=p("sïmple"),Vl=p("nëw!"),Fl=p("noüveau!"),Yl={expose:[],setup(t){const a=e({onlySelected:!1,sortKey:"name",sortOrder:1,newAccount:{name:"",role:"human"}}),n=b((()=>{let e=J.accounts.filter((e=>"bank"!=e.role));return a.onlySelected&&(e=e.filter((e=>J.isSelected(e)))),e.sort(((e,t)=>{let n=e[a.sortKey],l=t[a.sortKey];return(n===l?0:n>l?1:-1)*a.sortOrder}))})),l=e=>{e==a.sortKey&&(a.sortOrder=-a.sortOrder),a.sortKey=e},r=e=>{let t="human"==e.role?"wallet":"human";J.updateAccount(e,{role:t})},s=e=>{const t=J.selectedAccounts.get(e.name);return null==t?null:t.color};return(e,t)=>(o(),c("div",null,[i("h4",rl,[i(d(Q),null,{default:m((()=>[sl])),_:1}),i(d(Z),null,{default:m((()=>[ul])),_:1})]),i("table",ol,[i("thead",null,[i("tr",null,[i("th",{onClick:t[1]||(t[1]=e=>d(a).onlySelected=!d(a).onlySelected),class:[{"bg-primary":d(a).onlySelected},"pointer"],style:{width:"25px"}},[i(d(Q),null,{default:m((()=>[cl])),_:1}),i(d(Z),null,{default:m((()=>[il])),_:1})],2),i("th",{onClick:t[2]||(t[2]=e=>l("name")),class:"pointer"},[i(d(Q),null,{default:m((()=>[dl])),_:1}),i(d(Z),null,{default:m((()=>[ml])),_:1})]),i("th",{onClick:t[3]||(t[3]=e=>l("role")),class:"text-center pointer"},[i(d(Q),null,{default:m((()=>[pl])),_:1}),i(d(Z),null,{default:m((()=>[fl])),_:1})]),i("th",{onClick:t[4]||(t[4]=e=>l("balance")),class:"text-right pointer"},[i(d(Q),null,{default:m((()=>[yl])),_:1}),i(d(Z),null,{default:m((()=>[hl])),_:1})])])]),i("tbody",null,[(o(!0),c(w,null,k(d(n),(e=>(o(),c("tr",{key:e.name},[i("td",{style:{"background-color":s(e)},onClick:t=>d(J).select(e),class:"pointer"},null,12,["onClick"]),i("td",{onClick:t=>d(J).select(e),class:"pointer"},C(e.name),9,["onClick"]),i("td",gl,["human"==e.role?(o(),c("button",{key:0,class:"btn btn-sm btn-primary",onClick:t=>r(e)},[i(d(Q),null,{default:m((()=>[bl,xl])),_:1}),i(d(Z),null,{default:m((()=>[vl,_l])),_:1})],8,["onClick"])):"wallet"==e.role?(o(),c("button",{key:1,class:"btn btn-sm btn-secondary",onClick:t=>r(e)},[i(d(Q),null,{default:m((()=>[wl])),_:1}),i(d(Z),null,{default:m((()=>[kl])),_:1})],8,["onClick"])):(o(),c("button",Cl,[i(d(Q),null,{default:m((()=>[Al])),_:1}),i(d(Z),null,{default:m((()=>[Tl])),_:1})]))]),i("td",Sl,["bank"!=e.role?(o(),c(w,{key:0},[i("strong",null,[p(C(d(J).currencyDecimal(e.balance)),1),Ml]),i("a",{href:"#",onClick:T((t=>(e=>{J.updateAccount(e,{balance:0})})(e)),["stop","prevent"]),class:"mx-2"},[i(d(Q),null,{default:m((()=>[Dl])),_:1}),i(d(Z),null,{default:m((()=>[Ol])),_:1})],8,["onClick"])],64)):h("",!0),e.name!=d(J).name?(o(),c("a",{key:1,href:"#",onClick:T((t=>(e=>{const t=e.name;confirm(G({fr:"êtes vous sûr de supprimer "+t+" ?",en:"Are you sure to delete "+t+"?"}))&&J.deleteAccount(e)})(e)),["stop","prevent"])},[jl],8,["onClick"])):h("",!0)])])))),128))])]),i("div",Pl,[g(i("input",{placeholder:d(G)({en:"näme",fr:"nöm"}),"onUpdate:modelValue":t[5]||(t[5]=e=>d(a).newAccount.name=e),type:"text",class:"form-control",id:"accountName",maxlength:"10"},null,8,["placeholder"]),[[_,d(a).newAccount.name]]),g(i("select",{"onUpdate:modelValue":t[6]||(t[6]=e=>d(a).newAccount.role=e),class:"form-control",style:{"max-width":"100px"}},[i("option",Nl,[i(d(Q),null,{default:m((()=>[ql])),_:1}),i(d(Z),null,{default:m((()=>[Ul])),_:1})]),i("option",Il,[i(d(Q),null,{default:m((()=>[Ll])),_:1}),i(d(Z),null,{default:m((()=>[El])),_:1})])],512),[[v,d(a).newAccount.role]]),i("button",{type:"button",disabled:3>d(a).newAccount.name.length||d(J).accounts.some((e=>e.name==d(a).newAccount.name)),class:"btn btn-primary",onClick:t[7]||(t[7]=e=>(a.newAccount.name=a.newAccount.name.trim(),void J.createAccount(a.newAccount)))},[i(d(Q),null,{default:m((()=>[Vl])),_:1}),i(d(Z),null,{default:m((()=>[Fl])),_:1})],8,["disabled"])])]))}},Rl={class:"text-center mb-3"},zl=p("stats"),Jl=p("stats"),Xl={class:"input-group mx-auto mt-1",style:{"max-width":"400px"}},$l=i("label",{class:"input-group-text px-1"}," 100 ",-1),Bl={value:"day"},Kl=p("days"),Gl=p("jours"),Wl={value:"month"},Zl=p("months"),Ql=p("mois"),Hl={value:"year"},er=p("years"),tr=p("années"),ar={class:"input-group-text px-1"},nr=p("referential"),lr=p("référentiel"),rr={value:"relative"},sr=p("relative"),ur=p("relatif"),or={value:"quantitative"},cr=p("quantitative"),ir=p("quantitatif"),dr={value:"average"},mr=p("average"),pr=p("moyenne"),fr=i("label",{class:"input-group-text p-1"},null,-1),yr={expose:[],setup(t){const a=e({referential:"relative",statType:"day",stats:[],colors:[]}),l=()=>{let e=J.getAccountStats(J.name,a.statType),t=null,n=[],l=[];J.selectedAccounts.forEach(((r,s)=>{if(s!=J.name&&(t=J.getAccountStats(s,a.statType),t)){if("average"==a.referential)for(let a=0;a<t.length;a++)t[a]=0==e[a].average?0:t[a]/e[a].average*1e5;else if("quantitative"==a.referential)for(let a=0;a<t.length;a++)t[a]=t[a]*(e[a].quantitative/J.currency.quantitative);n.push(t),l.push(r.color)}})),"average"==a.referential?t=new Array(e.length).fill(1e5):"relative"==a.referential?t=e.map((e=>e.average)):"quantitative"==a.referential&&(t=e.map((e=>e.average*(e.quantitative/J.currency.quantitative)))),n.push(t),l.push(J.selectedAccounts.get(J.name).color),a.stats=n,a.colors=l};return x((()=>J.selectedAccounts),l,{deep:!0}),x((()=>J.currency),l,{deep:!0}),x((()=>a.referential),l),x((()=>a.statType),l),n(l),(e,t)=>(o(),c("div",null,[i("h4",Rl,[i(d(Q),null,{default:m((()=>[zl])),_:1}),i(d(Z),null,{default:m((()=>[Jl])),_:1})]),i(d(Qa),{data:d(a).stats,colors:d(a).colors,padding:10,radius:8,"stroke-width":1.4,"stroke-linecap":"butt",min:0,"auto-draw":"",smooth:""},null,8,["data","colors","stroke-width"]),i("div",Xl,[$l,g(i("select",{"onUpdate:modelValue":t[1]||(t[1]=e=>d(a).statType=e),class:"form-control px-1"},[i("option",Bl,[i(d(Q),null,{default:m((()=>[Kl])),_:1}),i(d(Z),null,{default:m((()=>[Gl])),_:1})]),i("option",Wl,[i(d(Q),null,{default:m((()=>[Zl])),_:1}),i(d(Z),null,{default:m((()=>[Ql])),_:1})]),i("option",Hl,[i(d(Q),null,{default:m((()=>[er])),_:1}),i(d(Z),null,{default:m((()=>[tr])),_:1})])],512),[[v,d(a).statType]]),i("label",ar,[i(d(Q),null,{default:m((()=>[nr])),_:1}),i(d(Z),null,{default:m((()=>[lr])),_:1})]),g(i("select",{"onUpdate:modelValue":t[2]||(t[2]=e=>d(a).referential=e),class:"form-control px-1"},[i("option",rr,[i(d(Q),null,{default:m((()=>[sr])),_:1}),i(d(Z),null,{default:m((()=>[ur])),_:1})]),i("option",or,[i(d(Q),null,{default:m((()=>[cr])),_:1}),i(d(Z),null,{default:m((()=>[ir])),_:1})]),i("option",dr,[i(d(Q),null,{default:m((()=>[mr])),_:1}),i(d(Z),null,{default:m((()=>[pr])),_:1})])],512),[[v,d(a).referential]]),fr])]))}},hr={class:"container mt-3"},gr=i("h1",{class:"display-1 text-center mb-3"},[i("span",{class:"bg-primary px-1 align-middle",style:{"font-family":"monospace"}},"fї"),i("span",{class:"align-middle"},[p(" f"),i("small",null,"Ü"),p("ne")])],-1),br={class:"text-center mb-3"},xr={class:"lead text-center mb-3"},vr=i("strong",null,[p("f"),i("small",null,"Ü"),p("ne")],-1),_r=p(" is a web app to test and play with a simple "),wr=i("a",{href:"https://libre-currency.org"},"Libre Currency",-1),kr=p(" called "),Cr=i("strong",null,[p("f"),i("small",null,"Ü"),p("ne")],-1),Ar=p(" (pronounced /fən/ like fun) "),Tr=i("strong",null,[p("f"),i("small",null,"Ü"),p("ne")],-1),Sr=p(" est une appli web qui permet de jouer avec une simple "),Mr=i("a",{href:"https://monnaie-libre.fr/"},"Monnaie Libre",-1),Dr=p(" appelée "),Or=i("strong",null,[p("f"),i("small",null,"Ü"),p("ne")],-1),jr=p(" (prononcée /fən/ comme fun en anglais) "),Pr={class:"lead text-center mb-5"},Nr=p(" a "),qr=i("small",null,"Ü",-1),Ur=p("man account create some new "),Ir=i("small",null,"Ü",-1),Lr=p(" (the "),Er=i("small",null,"Ü",-1),Vr=p("nit of the f"),Fr=i("small",null,"Ü",-1),Yr=p("ne currency) each day"),Rr=i("br",null,null,-1),zr=i("small",null,[p("old created "),i("strong",null,[i("small",null,"Ü"),p("nits")]),p(" melt by a given percentage each "),i("strong",null,"revaluation period")],-1),Jr=i("br",null,null,-1),Xr=p(" un compte "),$r=i("small",null,"Ü",-1),Br=p("main crée de nouvelles "),Kr=i("small",null,"Ü",-1),Gr=p(" (l'"),Wr=i("small",null,"Ü",-1),Zr=p("nité de la monnaie f"),Qr=i("small",null,"Ü",-1),Hr=p("ne) chaque jour"),es=i("br",null,null,-1),ts=i("small",null,[p("les anciennes "),i("strong",null,[i("small",null,"Ü"),p("nités")]),p(" fondent d'un certain pourcentage à chaque "),i("strong",null,"période de réévaluation")],-1),as=i("br",null,null,-1),ns={class:"d-flex align-items-start flex-wrap p-2",style:{"justify-content":"space-evenly"}},ls={class:"mx-auto"},rs={class:"mx-auto"};let ss=JSON.parse(localStorage.getItem("state"));window.location.hash&&(ss||(ss={currency:{}}),Object.assign(ss.currency,(e=>{const t=new URLSearchParams(e);return{mode:"grew"==t.get("m")?"grew":"melt",expression:t.get("e"),uPerDay:parseInt(t.get("upd")),revaluationTime:parseInt(t.get("rt")),stepTime:parseInt(t.get("st"))}})(window.location.hash.substring(1)))),J.restoreState(ss);var us={mounted:(e,t)=>{if("function"!=typeof t.value)return;let a=null,n=null;const l=e=>{console.log("start "+e.type),"click"===e.type&&0!==e.button||(e.preventDefault(),null===a&&(s(),a=setTimeout((()=>{n=setInterval((()=>{s()}),50),s()}),200)))},r=()=>{null!==a&&(clearTimeout(a),a=null),n&&(clearInterval(n),n=null)},s=e=>{t.value(e)};["mousedown","touchstart"].forEach((t=>e.addEventListener(t,l))),["click","mouseout","touchend","touchcancel"].forEach((t=>e.addEventListener(t,r)))}};S({expose:[],setup(e){const t=()=>{localStorage.setItem("state",JSON.stringify(J.getState()))};x((()=>J.currency),(()=>{window.location.hash="#"+(e=>{const t=new URLSearchParams;return t.append("e",e.expression),t.append("m",e.mode),t.append("upd",e.uPerDay),t.append("rt",e.revaluationTime),t.append("st",e.stepTime),t.toString()})(J.currency),t()})),x((()=>J.selectedAccounts),t,{deep:!0});const a=[];return J.accounts.length<=1&&(a.push({name:"Alice",balance:1e4,role:"human"}),a.push({name:"Bob",balance:2e4,role:"human"}),a.push({name:"Carole",balance:0,role:"human"})),(e,t)=>(o(),c("div",null,[i("div",hr,[gr,i("div",br,[i("button",{class:"btn btn-sm btn-outline-secondary text-light",disabled:"fr"==d(B),onClick:t[1]||(t[1]=e=>d(W)("fr"))},"FR",8,["disabled"]),i("button",{class:"btn btn-sm btn-outline-secondary text-light",disabled:"en"==d(B),onClick:t[2]||(t[2]=e=>d(W)("en"))},"EN",8,["disabled"])]),i("p",xr,[i(d(Q),null,{default:m((()=>[vr,_r,wr,kr,Cr,Ar])),_:1}),i(d(Z),null,{default:m((()=>[Tr,Sr,Mr,Dr,Or,jr])),_:1})]),i("p",Pr,[i(d(Q),null,{default:m((()=>[Nr,qr,Ur,Ir,Lr,Er,Vr,Fr,Yr,Rr,zr,Jr])),_:1}),i(d(Z),null,{default:m((()=>[Xr,$r,Br,Kr,Gr,Wr,Zr,Qr,Hr,es,ts,as])),_:1})])]),i($,{accounts:a,selectedAccounts:a},{default:m((()=>[i(Ue,{class:"mx-auto",style:{"max-width":"400px"}}),i(Be,{class:"mx-auto sticky-top"}),i("div",ns,[i("div",ls,[i(Sa,{class:"mb-3 mx-auto",style:{"max-width":"450px"}}),i(za,{class:"mb-3 mx-auto",style:{"max-width":"450px"}})]),i("div",rs,[i(yr,{class:"mb-3 mx-auto",style:{"min-width":"33vw","max-width":"600px"}}),i(Yl,{class:"mb-3 mx-auto",style:{"max-width":"450px"}})]),i(ll,{class:"mb-3 mx-auto"})])])),_:1})]))}}).directive("longclick",us).mount("#app");

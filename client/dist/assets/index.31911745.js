import{r as e,a as t,e as a,o as n,b as l,D as r,c as s,d as u,f as o,g as c,u as i,w as d,h as m,F as p,i as f,j as y,k as h,l as g,v as b,m as x,n as v,p as _,q as w,t as C,s as k,x as A,y as T}from"./vendor.88cd636b.js";!function(e=".",t="__import__"){try{self[t]=new Function("u","return import(u)")}catch(a){const n=new URL(e,location),l=e=>{URL.revokeObjectURL(e.src),e.remove()};self[t]=e=>new Promise(((a,r)=>{const s=new URL(e,n);if(self[t].moduleMap[s])return a(self[t].moduleMap[s]);const u=new Blob([`import * as m from '${s}';`,`${t}.moduleMap['${s}']=m;`],{type:"text/javascript"}),o=Object.assign(document.createElement("script"),{type:"module",src:URL.createObjectURL(u),onerror(){r(new Error(`Failed to import: ${e}`)),l(o)},onload(){a(self[t].moduleMap[s]),l(o)}});document.head.appendChild(o)})),self[t].moduleMap={}}}("/assets/");const S="human",M="bank",D="grew",O="melt",j={day:"day",month:"month",year:"year"},P={day:1,month:60,year:360};let N=0,U={};const q={name:"fÜne",logo:"fї",uValue:1e3,isPlaying:!1,doTx:(e,t=!0)=>{let a=Object.assign({from:"",to:"",message:"",value:0,date:(new Date).toISOString(),day:U.currency.elapsedTime},e);var n=U.accounts[a.from],l=U.accounts[a.to];return a.value<=0||!n||!l||n==l||n.role!=M&&n.balance-a.value<0?null:(l.role!=M&&(l.balance+=a.value),n.role!=M&&(n.balance-=a.value,n.balance<10&&(n.balance=0)),a.balanceFrom=n.balance,a.balanceTo=l.balance,U.transactions.push(a),U.transactions.length>1e3&&(U.transactions=U.transactions.slice(U.transactions.length-1e3)),t&&Y(),a)},getCurrency:()=>Object.assign({},U.currency),updateCurrency:e=>{const t=q.isPlaying;return t&&q.stop(),Object.assign(U.currency,e),t&&q.play(),Object.assign({},U.currency)},getAccount:e=>U.accounts[e],getAccounts:()=>Object.values(U.accounts),createAccount:e=>{if(e.name=e.name.trim(),!e.name||U.accounts[e.name])return null;let t=U.accounts[e.name]=Object.assign({name:"",balance:0,role:"wallet",date:(new Date).toISOString(),creationDay:U.currency.elapsedTime},e);return Y(),t},updateAccount:(e,t)=>{let a=U.accounts[e];return!a||"bank"==a.role||t.name&&e!=t.name?null:(a=Object.assign(a,t),Y(),a)},deleteAccount:e=>{let t=U.accounts[e];return t&&t.name!=q.name?(delete U.accounts[e],delete U.stats[e],Y(),t):null},getAccountTx:(e,t)=>{if(!U.accounts[e])return null;let a=U.transactions.filter((t=>t.from==e||t.to==e));return t>0&&t<a.length&&(a=a.slice(-t)),a},getAccountStats:(e,t=j.day)=>{if((t=j[t])||(t=j.day),!U.accounts[e])return null;const a=U.stats[e];if(!a)return[];const n=a[t];if(!n)return[];if(U.currency.elapsedTime<P[t])return[n[0],n[0]];let l=(Math.floor(U.currency.elapsedTime/P[t])+1)%100;return l>0&&U.currency.elapsedTime<100*P[t]?n.slice(0,l):n.slice(l).concat(n.slice(0,l))},getState:()=>({currency:U.currency,accounts:U.accounts,transactions:U.transactions,stats:U.stats})},I={date:(new Date).toISOString(),stepTime:10,uPerDay:1,elapsedTime:0,revaluationTime:1,nbMembers:0,monetaryMass:0,mode:O,lastMelt:0,average:0,quantitative:1,expression:"10/100"};q.expressionParser=(e,t)=>parseFloat(e);const L=/!x(\d+)/,E=q.uValue,V=()=>({isStatMonth:U.currency.elapsedTime%P.month==0,isStatYear:U.currency.elapsedTime%P.year==0,statDayIndex:U.currency.elapsedTime%100,statMonthIndex:U.currency.elapsedTime/P.month%100,statYearIndex:U.currency.elapsedTime/P.year%100}),Y=()=>{let e=0,t=0;const a=V();Object.values(U.accounts).forEach((n=>{const l=n.name.match(L);let r=1;l&&(r=parseInt(l[1])),n.role==S&&(t+=r),n.role!=M&&(e+=n.balance*r,((e,t,a=null)=>{a||(a=V());let n=U.stats[e.name];n||(n={},n[j.day]=new Array(100).fill(0),n[j.month]=new Array(100).fill(0),n[j.year]=new Array(100).fill(0),U.stats[e.name]=n),n[j.day][a.statDayIndex]=t,a.isStatMonth&&(n[j.month][a.statMonthIndex]=t),a.isStatYear&&(n[j.year][a.statYearIndex]=t)})(n,n.balance,a))})),U.currency.nbMembers=t,U.currency.monetaryMass=e,U.currency.average=t>0?Math.floor(e/t):0,((e=null)=>{e||(e=V());let t=Object.assign({},U.currency),a=U.stats[q.name];a||(a={},a[j.day]=new Array(100).fill(I),a[j.month]=new Array(100).fill(I),a[j.year]=new Array(100).fill(I),U.stats[q.name]=a),a[j.day][e.statDayIndex]=t,e.isStatMonth&&(a[j.month][e.statMonthIndex]=t),e.isStatYear&&(a[j.year][e.statYearIndex]=t)})(a)},R=(e=!0)=>{U.currency.elapsedTime++;let t=0,a=0;const n=U.currency.uPerDay>=0?Math.floor(U.currency.uPerDay):0,l=E*U.currency.revaluationTime*n,r=U.accounts[q.name],s=U.currency.elapsedTime%U.currency.revaluationTime==0;s&&U.currency.nbMembers>0&&(t=q.expressionParser(U.currency.expression,{M:U.currency.monetaryMass/l,N:U.currency.nbMembers,T:U.currency.elapsedTime}),U.currency.mode==D&&(t=1-1/(1+t)),t=Math.max(0,Math.min(1,t)),a=(100*t).toFixed(2)),Object.values(U.accounts).forEach((e=>{if(s&&t>0&&e.balance>9){let n=e.balance*t;n=Math.min(n>l?Math.ceil(n):Math.floor(n),e.balance),n<10&&(n=10),q.doTx({from:e.name,to:r.name,message:"!revaluation%"+a,value:n},!1)}e.role==S&&n>0&&q.doTx({from:r.name,to:e.name,message:"!1Ucreation",value:E*n},!1)})),s&&(U.currency.lastMelt=a,U.currency.quantitative=U.currency.quantitative*(1+1/(1/t-1))),Y(),e&&(N=setTimeout(R,1e3*U.currency.stepTime,!0)),q.onDayChange(U.currency.elapsedTime)};q.restoreState=e=>{e&&(e.currency&&(U.currency=Object.assign(I,e.currency)),e.accounts&&(U.accounts=e.accounts),e.transactions&&(U.transactions=e.transactions),e.stats&&(U.stats=e.stats))},q.start=(e,t)=>{q.restoreState(t),e&&(q.expressionParser=e),U.currency||(U.currency=I),U.accounts||(U.accounts={}),U.accounts[q.name]={name:q.name,balance:0,role:M,date:(new Date).toISOString(),creationDay:0},U.transactions||(U.transactions=[]),U.stats||(U.stats={})},q.onDayChange=()=>{},q.reset=()=>{q.stop(),Object.values(U.accounts).forEach((e=>{e.balance=0})),U.transactions=[],U.stats={},U.currency.elapsedTime=0,U.currency.lastMelt=0,U.currency.quantitative=1,Y()},q.play=(e=!0)=>{q.isPlaying||(0!=N&&(clearTimeout(N),N=0),q.isPlaying=e,R(e))},q.stop=()=>{q.isPlaying&&(0!=N&&(clearTimeout(N),N=0),q.isPlaying=!1)};const F=e({name:q.name,isPlaying:!1,currency:{},accounts:[],selectedAccounts:new Map});F.selectedAccounts.set(q.name,{color:"#CCCCCCDD"});const J=q.uValue;F.isSelected=e=>null!=F.selectedAccounts.get(e.name),F.select=e=>{if("bank"==e.role)return;let a=F.selectedAccounts.get(e.name);!a&&q.getAccount(e.name)?(a={color:t.randomColor()},F.selectedAccounts.set(e.name,a)):F.selectedAccounts.delete(e.name)},F.doTx=e=>{const t=q.doTx({from:e.from,to:e.to,value:Math.floor(e.value*J)});return t&&F.refresh(),t},F.updateCurrency=e=>(F.currency=q.updateCurrency(e),F.currency),F.addAccounts=e=>{e&&(e.forEach((e=>{q.createAccount(e)||q.updateAccount(e.name,e)})),F.refresh())},F.createAccount=e=>{let t=q.createAccount(e);return t&&(F.accounts.push(t),F.refresh()),t},F.updateAccount=(e,t)=>{let a=q.updateAccount(e.name,t);return a&&(a=Object.assign(e,a),F.refresh()),a},F.deleteAccount=e=>{let t=null;return q.deleteAccount(e.name)&&(F.isSelected(e)&&F.select(e),t=e,F.refresh()),t},F.getAccountTx=(e,t)=>q.getAccountTx(e,t),F.getAccountStats=(e,t=statTypes.day)=>q.getAccountStats(e,t),F.onDayChange=()=>{F.refresh()},F.refresh=()=>{F.accounts=q.getAccounts(),F.currency=q.getCurrency()},F.reset=()=>{q.reset(),F.refresh(),F.isPlaying=q.isPlaying},F.play=e=>{q.play(e),F.refresh(),F.isPlaying=q.isPlaying},F.stop=()=>{q.stop(),F.refresh(),F.isPlaying=q.isPlaying},F.getState=()=>{const e=q.getState();return e.selectedAccounts=Object.fromEntries(F.selectedAccounts),e},F.restoreState=e=>{e.selectedAccounts&&e.selectedAccounts[q.name]&&(F.selectedAccounts=new Map(Object.entries(e.selectedAccounts))),q.restoreState(e),F.refresh()},F.currencyWithoutDecimal=e=>Math.floor(e/J),F.currencyDecimal=e=>(e/J).toFixed(2),q.onDayChange=F.onDayChange,q.start(a,{}),F.refresh();const z={expose:[],props:{currency:Object,accounts:Array,selectedAccounts:Array,autoPlay:Boolean},setup(e){const{currency:t,accounts:a,selectedAccounts:r}=e;return n((()=>{t&&F.updateCurrency(t),a&&F.addAccounts(a),r&&r.forEach((e=>{F.select(e)}))})),(e,t)=>l(e.$slots,"default")}},X="fr"==(navigator.userLanguage||navigator.languages&&navigator.languages.length&&navigator.languages[0]||navigator.language||navigator.browserLanguage||navigator.systemLanguage).substring(0,2)?"fr":"en",$=e=>({render(){if(X==e)return this.$slots.default()}}),B=e=>e[X],K=$("fr"),G=$("en");var W={deflate:8},Z=1,Q=2,H=4,ee=8,te=16,ae={fat:0,amiga:1,vmz:2,unix:3,"vm/cms":4,atari:5,hpfs:6,macintosh:7,"z-system":8,cplm:9,"tops-20":10,ntfs:11,qdos:12,acorn:13,vfat:14,vms:15,beos:16,tandem:17,theos:18};function ne(e,t){t.push(255&e)}function le(e,t){t.push(255&e),t.push(e>>>8)}function re(e,t){le(65535&e,t),le(e>>>16,t)}function se(e){return e.shift()}function ue(e){return e.shift()|e.shift()<<8}function oe(e){var t=ue(e),a=ue(e);return a>32768?((a-=32768)<<16|t)+32768*Math.pow(2,16):a<<16|t}function ce(e){for(var t=[];0!==e[0];)t.push(String.fromCharCode(e.shift()));return e.shift(),t.join("")}var ie={zip:function(e,t){var a,n=0,l=[];return t||(t={}),a=t.level||6,"string"==typeof e&&(e=Array.prototype.map.call(e,(function(e){return e.charCodeAt(0)})),n|=Z),ne(31,l),ne(139,l),ne(W.deflate,l),t.name&&(n|=ee),ne(n,l),re(t.timestamp||parseInt(Date.now()/1e3,10),l),ne(1===a?4:9===a?2:0,l),ne(ae.unix,l),t.name&&(!function(e,t){var a,n=e.length;for(a=0;a<n;a+=1)ne(e.charCodeAt(a),t)}(t.name.substring(t.name.lastIndexOf("/")+1),l),ne(0,l)),r.deflate(e,a).forEach((function(e){ne(e,l)})),re(parseInt(s(e),16),l),re(e.length,l),l},unzip:function(e){var t,a,n,l,u=Array.prototype.slice.call(e,0);if(31!==se(u)||139!==se(u))throw"Not a GZIP file";if(t=se(u),!(t=Object.keys(W).some((function(e){return a=e,W[e]===t}))))throw"Unsupported compression method";if(n=se(u),oe(u),se(u),t=se(u),Object.keys(ae).some((function(e){if(ae[e]===t)return!0})),n&H&&function(e,t){var a,n=[];for(a=0;a<t;a+=1)n.push(e.shift())}(u,t=ue(u)),n&ee&&ce(u),n&te&&ce(u),n&Q&&ue(u),"deflate"===a&&(l=r.inflate(u.splice(0,u.length-8))),n&Z&&(l=Array.prototype.map.call(l,(function(e){return String.fromCharCode(e)})).join("")),oe(u)>>>0!==parseInt(s(l),16))throw"Checksum does not match";if(oe(u)!==l.length)throw"Size of decompressed file not correct";return l},get DEFAULT_LEVEL(){return 6}};const de={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(e){var t,a,n,l,r,s,u,o="",c=0;for(e=de._utf8_encode(e);c<e.length;)l=(t=e.charCodeAt(c++))>>2,r=(3&t)<<4|(a=e.charCodeAt(c++))>>4,s=(15&a)<<2|(n=e.charCodeAt(c++))>>6,u=63&n,isNaN(a)?s=u=64:isNaN(n)&&(u=64),o=o+this._keyStr.charAt(l)+this._keyStr.charAt(r)+this._keyStr.charAt(s)+this._keyStr.charAt(u);return o},decode:function(e){var t,a,n,l,r,s,u="",o=0;for(e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");o<e.length;)t=this._keyStr.indexOf(e.charAt(o++))<<2|(l=this._keyStr.indexOf(e.charAt(o++)))>>4,a=(15&l)<<4|(r=this._keyStr.indexOf(e.charAt(o++)))>>2,n=(3&r)<<6|(s=this._keyStr.indexOf(e.charAt(o++))),u+=String.fromCharCode(t),64!=r&&(u+=String.fromCharCode(a)),64!=s&&(u+=String.fromCharCode(n));return u=de._utf8_decode(u)},_utf8_encode:function(e){e=e.replace(/\r\n/g,"\n");for(var t="",a=0;a<e.length;a++){var n=e.charCodeAt(a);n<128?t+=String.fromCharCode(n):n>127&&n<2048?(t+=String.fromCharCode(n>>6|192),t+=String.fromCharCode(63&n|128)):(t+=String.fromCharCode(n>>12|224),t+=String.fromCharCode(n>>6&63|128),t+=String.fromCharCode(63&n|128))}return t},_utf8_decode:function(e){for(var t="",a=0,n=0,l=0;a<e.length;)(n=e.charCodeAt(a))<128?(t+=String.fromCharCode(n),a++):n>191&&n<224?(l=e.charCodeAt(a+1),t+=String.fromCharCode((31&n)<<6|63&l),a+=2):(l=e.charCodeAt(a+1),c3=e.charCodeAt(a+2),t+=String.fromCharCode((15&n)<<12|(63&l)<<6|63&c3),a+=3);return t}};var me={},pe=-1,fe={}.toString;function ye(e,t){var a,n=e.length;for(a=0;a<n;a++)if(e[a][1]===t)return!0;return!1}function he(e){var t,a=e.length,n=[];for(t=0;t<a;t++)ye(n,e[t][1])||n.push(e[t]);return n}function ge(e){return"[object Array]"===fe.call(e)}function be(e,t,a){var n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=_!?()*",l=[],r=e;for(t=t||n.length,a=a||0;r>=t;)l.push(n.charCodeAt(r%t+a)),r=Math.floor(r/t-1);return l.push(n.charCodeAt(r+a)),l.reverse()}function xe(e){return String.fromCharCode.apply(String,e)}function ve(e,t){var a,n,l,r;for(n in e)e.hasOwnProperty(n)&&(l=e[n],r=l,("[object Object]"===fe.call(r)||ge(l))&&(t=t.concat(he(ve(l,t)))),isNaN(Number(n))&&(ye(t,n)||((a=[]).push(xe(be(pe+=1)),n),t.push(a))));return t}function _e(e,t){var a,n,l,r,s,u;for(a=function(e){var t,a,n={},l=e.length;for(t=0;t<l;t++)n[(a=e[t])[0]]=a[1];return n}(t=he(t=ve(e,t))),l=JSON.stringify(e),r=t.length,s=0;s<r;s++)n=t[s],l=l.replace(new RegExp(('"'+n[1]+'"').replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),"g"),'"'+n[0]+'"');return(u=JSON.parse(l))._=a,u}"object"==typeof exports&&"object"==typeof module&&module.exports,me.compress=function(e,t){t||(pe=-1);var a,n=t||[];return ge(e)?(!function(e,t){var a,n;for(a=0,n=e.length;a<n;a++)e[a]=me.compress(e[a],t)}(e,n),a=e):a=_e(e,n),a},me.pack=function(e,t){var a=JSON.stringify(t?me.compress(e):e);return de.encode(String.fromCharCode.apply(String,ie.zip(a,{level:9})))},me.decompress=function(e){var t,a=JSON.parse(JSON.stringify(e));return ge(a)?function(e){var t,a;for(t=0,a=e.length;t<a;t++)e[t]=me.decompress(e[t])}(a):t=function(e){var t,a,n;for(n in t=JSON.parse(JSON.stringify(e._)),delete e._,a=JSON.stringify(e),t)t.hasOwnProperty(n)&&(a=a.replace(new RegExp('"'+n+'"',"g"),'"'+t[n]+'"'));return a}(a),t?JSON.parse(t):a},me.unpack=function(e,t){var a=function(e){for(var t=0,a=e.length,n=[];t<a;t++)n.push(e.charCodeAt(t));return n}(de.decode(e)),n=ie.unzip(a,{level:9}),l=JSON.parse(n);return t?me.decompress(l):l};const we={class:"mb-3 text-center"},Ce=c("i",{class:"fa fa-upload"},null,-1),ke=m(" load"),Ae=m(" charger"),Te=c("i",{class:"fa fa-download"},null,-1),Se=m(" save"),Me=m(" sauvegarder"),De=c("i",{class:"fa fa-undo"},null,-1),Oe=m(" reset"),je=m(" RAZ"),Pe={expose:[],setup(e){const t=e=>{const t=e.target.files[0];if(t){const e=new FileReader;e.onload=function(e){var t=e.target.result;a(t)},e.readAsText(t)}else alert("failed to load file");e.target.value=null},a=e=>{try{const t=me.unpack(e,!0);console.log(t),F.stop(),F.restoreState(t)}catch(t){console.log(t),alert("failed to load file")}};return(e,a)=>(u(),o("div",we,[c("label",{class:["btn btn-dark mb-0",{disabled:i(F).isPlaying}]},[Ce,c(i(G),null,{default:d((()=>[ke])),_:1}),c(i(K),null,{default:d((()=>[Ae])),_:1}),c("input",{type:"file",hidden:"",onChange:t},null,32)],2),c("button",{class:"btn btn-light text-dark",onClick:a[1]||(a[1]=e=>(()=>{const e=F.getState();JSON.stringify(e);var t=me.pack(e,!0),a=new Blob([t],{type:"text/plain;charset=utf-8"});p.saveAs(a,"fune_"+(new Date).toISOString().substring(0,16)+".fun")})()),disabled:i(F).isPlaying},[Te,c(i(G),null,{default:d((()=>[Se])),_:1}),c(i(K),null,{default:d((()=>[Me])),_:1})],8,["disabled"]),c("button",{class:"btn btn-danger ml-3",onClick:a[2]||(a[2]=e=>i(F).reset())},[De,c(i(G),null,{default:d((()=>[Oe])),_:1}),c(i(K),null,{default:d((()=>[je])),_:1})])]))}},Ne={class:"navbar navbar-dark bg-dark"},Ue={class:"text-center w-100 my-2"},qe=c("i",{class:"fa fa-play"},null,-1),Ie=m(" play"),Le=m(" lecture"),Ee=c("i",{class:"fa fa-step-forward"},null,-1),Ve=m(" next"),Ye=m(" suivant"),Re=c("i",{class:"fa fa-pause"},null,-1),Fe=m(" pause"),Je=m(" pause"),ze={expose:[],setup(e){const t=()=>{F.play(!1)};return(e,a)=>{const n=f("longclick");return u(),o("nav",Ne,[c("div",Ue,[c("button",{class:"btn btn-outline-primary",onClick:a[1]||(a[1]=e=>i(F).play()),disabled:i(F).isPlaying},[qe,c(i(G),null,{default:d((()=>[Ie])),_:1}),c(i(K),null,{default:d((()=>[Le])),_:1})],8,["disabled"]),y(c("button",{class:"btn btn-outline-light mx-3",disabled:i(F).isPlaying},[Ee,c(i(G),null,{default:d((()=>[Ve])),_:1}),c(i(K),null,{default:d((()=>[Ye])),_:1})],8,["disabled"]),[[n,t]]),c("button",{class:"btn btn-outline-light",onClick:a[2]||(a[2]=e=>i(F).stop()),disabled:!i(F).isPlaying},[Re,c(i(G),null,{default:d((()=>[Fe])),_:1}),c(i(K),null,{default:d((()=>[Je])),_:1})],8,["disabled"])])])}}},Xe={class:"text-center mb-3"},$e=m("currency"),Be=m("monnaie"),Ke={class:"input-group mb-3"},Ge={class:"input-group-text w-50"},We=m("Ü revaluation"),Ze=m("réévaluation de Ü"),Qe={value:"melt"},He=m("melting"),et=m("fonte"),tt={value:"grew"},at=m("growth"),nt=m("croissance"),lt={class:"input-group mb-3"},rt={key:0,class:"input-group-text"},st={key:1,class:"input-group-text"},ut=c("span",{class:"input-group-text"}," ) Ü(t)",-1),ot={class:"input-group mb-3"},ct={class:"input-group-text",for:"currencyUPerDay"},it=m("Ü per day"),dt=m("Ü par jour"),mt=c("span",{class:"input-group-text"},"Ü",-1),pt={class:"input-group mb-3"},ft={class:"input-group-text",for:"currencyRevaluationTime"},yt=m("revaluation period"),ht=m("réévaluation"),gt={class:"input-group-text"},bt=m("day"),xt={key:0},vt=m("jour"),_t={key:0},wt={class:"input-group mb-3"},Ct={class:"input-group-text",for:"currencyStepTime"},kt=m("day duration"),At=m("durée d'un jour"),Tt={class:"input-group-text"},St=m("second"),Mt={key:0},Dt=m("seconde"),Ot={key:0},jt={key:0,class:"d-flex align-items-start flex-wrap",style:{"justify-content":"space-evenly"}},Pt=m("ündo!"),Nt=m("annüler!"),Ut=m("üpdate!"),qt=m("valïder!"),It={class:"input-group mb-3 mt-5"},Lt={class:"input-group-text",for:"currencyMass"},Et=m("monetary mass (M)"),Vt=m("masse monétaire (M)"),Yt=c("span",{class:"input-group-text"},"Ü",-1),Rt={class:"input-group mb-3"},Ft={class:"input-group-text",for:"currencyNbMembers"},Jt=m("Üman accounts (N)"),zt=m("comptes Ümains (N)"),Xt={class:"input-group mb-3"},$t={class:"input-group-text",for:"currencyAvg"},Bt=m("average"),Kt=m("moyenne"),Gt={class:"input-group-text"},Wt=m("Ü / Üman"),Zt=m("Ü / Ümain"),Qt={class:"input-group mb-3"},Ht={class:"input-group-text",for:"currencyQuantitative"},ea=m("quantitative value"),ta=m("valeur quantitative"),aa={class:"input-group-text"},na=m("Ü / Ü(0)"),la=m("Ü / Ü(0)"),ra={class:"input-group mb-3"},sa={class:"input-group-text",for:"currencyLastGrew"},ua=m("last growth"),oa=m("dernière croissance"),ca=c("span",{class:"input-group-text"},"%",-1),ia={class:"input-group mb-3"},da={class:"input-group-text",for:"currencyLastMelt"},ma=m("last melting"),pa=m("dernière fonte"),fa=c("span",{class:"input-group-text"},"%",-1),ya={class:"input-group mb-3"},ha={class:"input-group-text",for:"currencyElapsedTime"},ga=m("elapsed time (T)"),ba=m("temps écoulé (T)"),xa={class:"input-group-text"},va=m("day"),_a={key:0},wa=m("jour"),Ca={key:0},ka={expose:[],setup(t){const a=e({expression:"",mode:"melt",uPerDay:1,stepTime:0,revaluationTime:0}),l=h((()=>0==F.currency.lastMelt?0:(1/(1/(F.currency.lastMelt/100)-1)*100).toFixed(2))),r=h((()=>!(!F||!F.currency)&&(F.currency.expression!=a.expression||F.currency.mode!=a.mode||F.currency.uPerDay!=a.uPerDay||F.currency.revaluationTime!=a.revaluationTime||F.currency.stepTime!=a.stepTime)));return g((()=>[F.currency.expression,F.currency.mode,F.currency.uPerDay,F.currency.revaluationTime,F.currency.stepTime]),(()=>{Object.assign(a,F.currency)})),n((()=>{Object.assign(a,F.currency)})),(e,t)=>(u(),o("div",null,[c("h4",Xe,[c(i(G),null,{default:d((()=>[$e])),_:1}),c(i(K),null,{default:d((()=>[Be])),_:1})]),c("form",null,[c("div",Ke,[c("label",Ge,[c(i(G),null,{default:d((()=>[We])),_:1}),c(i(K),null,{default:d((()=>[Ze])),_:1})]),y(c("select",{"onUpdate:modelValue":t[1]||(t[1]=e=>i(a).mode=e),id:"currencyMode",class:["form-select w-50",{"bg-primary":i(a).mode!=i(F).currency.mode}],disabled:i(F).isPlaying},[c("option",Qe,[c(i(G),null,{default:d((()=>[He])),_:1}),c(i(K),null,{default:d((()=>[et])),_:1})]),c("option",tt,[c(i(G),null,{default:d((()=>[at])),_:1}),c(i(K),null,{default:d((()=>[nt])),_:1})])],10,["disabled"]),[[b,i(a).mode]])]),c("div",lt,["melt"==i(a).mode?(u(),o("span",rt,"Ü(t-1) = ( 1 - ")):(u(),o("span",st,"Ü(t+1) = ( 1 + ")),y(c("input",{id:"currencyExpression","onUpdate:modelValue":t[2]||(t[2]=e=>i(a).expression=e),type:"text",class:["form-control text-right",{"bg-primary":i(a).expression!=i(F).currency.expression}],disabled:i(F).isPlaying},null,10,["disabled"]),[[x,i(a).expression]]),ut]),c("div",ot,[c("label",ct,[c(i(G),null,{default:d((()=>[it])),_:1}),c(i(K),null,{default:d((()=>[dt])),_:1})]),y(c("input",{id:"currencyUPerDay","onUpdate:modelValue":t[3]||(t[3]=e=>i(a).uPerDay=e),type:"number",min:"0",max:"1000",step:"1",class:["form-control text-right",{"bg-primary":i(a).uPerDay!=i(F).currency.uPerDay}],disabled:i(F).isPlaying},null,10,["disabled"]),[[x,i(a).uPerDay]]),mt]),c("div",pt,[c("label",ft,[c(i(G),null,{default:d((()=>[yt])),_:1}),c(i(K),null,{default:d((()=>[ht])),_:1})]),y(c("input",{id:"currencyRevaluationTime","onUpdate:modelValue":t[4]||(t[4]=e=>i(a).revaluationTime=e),type:"number",min:"1",max:"400",step:"1",class:["form-control text-right",{"bg-primary":i(a).revaluationTime!=i(F).currency.revaluationTime}],disabled:i(F).isPlaying},null,10,["disabled"]),[[x,i(a).revaluationTime]]),c("span",gt,[c(i(G),null,{default:d((()=>[bt,i(a).revaluationTime>1?(u(),o("span",xt,"s")):v("",!0)])),_:1}),c(i(K),null,{default:d((()=>[vt,i(a).revaluationTime>1?(u(),o("span",_t,"s")):v("",!0)])),_:1})])]),c("div",wt,[c("label",Ct,[c(i(G),null,{default:d((()=>[kt])),_:1}),c(i(K),null,{default:d((()=>[At])),_:1})]),y(c("input",{id:"currencyStepTime","onUpdate:modelValue":t[5]||(t[5]=e=>i(a).stepTime=e),type:"number",min:"1",max:"90000",step:"1",class:["form-control text-right",{"bg-primary":i(a).stepTime!=i(F).currency.stepTime}],disabled:i(F).isPlaying},null,10,["disabled"]),[[x,i(a).stepTime]]),c("span",Tt,[c(i(G),null,{default:d((()=>[St,i(a).stepTime>1?(u(),o("span",Mt,"s")):v("",!0)])),_:1}),c(i(K),null,{default:d((()=>[Dt,i(a).stepTime>1?(u(),o("span",Ot,"s")):v("",!0)])),_:1})])]),i(r)?(u(),o("div",jt,[c("button",{type:"button",class:"btn btn-secondary mr-auto",onClick:t[6]||(t[6]=e=>Object.assign(i(a),i(F).currency))},[c(i(G),null,{default:d((()=>[Pt])),_:1}),c(i(K),null,{default:d((()=>[Nt])),_:1})]),c("button",{type:"button",class:"btn btn-primary",onClick:t[7]||(t[7]=e=>(()=>{const{expression:e,mode:t,uPerDay:n,revaluationTime:l,stepTime:r}=a;F.updateCurrency({expression:e,mode:t,uPerDay:n,revaluationTime:l,stepTime:r})})())},[c(i(G),null,{default:d((()=>[Ut])),_:1}),c(i(K),null,{default:d((()=>[qt])),_:1})])])):v("",!0),c("div",It,[c("label",Lt,[c(i(G),null,{default:d((()=>[Et])),_:1}),c(i(K),null,{default:d((()=>[Vt])),_:1})]),c("input",{id:"currencyMass",value:i(F).currencyWithoutDecimal(i(F).currency.monetaryMass),type:"text",class:"form-control text-right",disabled:""},null,8,["value"]),Yt]),c("div",Rt,[c("label",Ft,[c(i(G),null,{default:d((()=>[Jt])),_:1}),c(i(K),null,{default:d((()=>[zt])),_:1})]),c("input",{id:"currencyNbMembers",value:i(F).currency.nbMembers,type:"text",class:"form-control text-right",disabled:""},null,8,["value"])]),c("div",Xt,[c("label",$t,[c(i(G),null,{default:d((()=>[Bt])),_:1}),c(i(K),null,{default:d((()=>[Kt])),_:1})]),c("input",{id:"currencyAvg",value:i(F).currencyWithoutDecimal(i(F).currency.average),type:"text",class:"form-control text-right",disabled:""},null,8,["value"]),c("span",Gt,[c(i(G),null,{default:d((()=>[Wt])),_:1}),c(i(K),null,{default:d((()=>[Zt])),_:1})])]),c("div",Qt,[c("label",Ht,[c(i(G),null,{default:d((()=>[ea])),_:1}),c(i(K),null,{default:d((()=>[ta])),_:1})]),c("input",{id:"currencyQuantitative",value:i(F).currency.quantitative.toFixed(2),type:"text",class:"form-control text-right",disabled:""},null,8,["value"]),c("span",aa,[c(i(G),null,{default:d((()=>[na])),_:1}),c(i(K),null,{default:d((()=>[la])),_:1})])]),c("div",ra,[c("label",sa,[c(i(G),null,{default:d((()=>[ua])),_:1}),c(i(K),null,{default:d((()=>[oa])),_:1})]),c("input",{id:"currencyLastGrew",value:i(l),type:"text",class:"form-control text-right",disabled:""},null,8,["value"]),ca]),c("div",ia,[c("label",da,[c(i(G),null,{default:d((()=>[ma])),_:1}),c(i(K),null,{default:d((()=>[pa])),_:1})]),c("input",{id:"currencyLastMelt",value:i(F).currency.lastMelt,type:"text",class:"form-control text-right",disabled:""},null,8,["value"]),fa]),c("div",ya,[c("label",ha,[c(i(G),null,{default:d((()=>[ga])),_:1}),c(i(K),null,{default:d((()=>[ba])),_:1})]),y(c("input",{id:"currencyElapsedTime","onUpdate:modelValue":t[8]||(t[8]=e=>i(F).currency.elapsedTime=e),type:"text",class:"form-control text-right",disabled:""},null,512),[[x,i(F).currency.elapsedTime]]),c("span",xa,[c(i(G),null,{default:d((()=>[va,i(F).currency.elapsedTime>1?(u(),o("span",_a,"s")):v("",!0)])),_:1}),c(i(K),null,{default:d((()=>[wa,i(F).currency.elapsedTime>1?(u(),o("span",Ca,"s")):v("",!0)])),_:1})])])])]))}},Aa={class:"text-center mb-3"},Ta=m("transaction"),Sa=m("transaction"),Ma={class:"text-center"},Da={class:"input-group mb-3"},Oa={class:"input-group-text",for:"txFrom"},ja=m(" fröm "),Pa=m(" de "),Na={class:"input-group-text",for:"txTo"},Ua=m(" tö "),qa=m(" à "),Ia=c("option",{disabled:"",value:""},"select öne",-1),La=c("option",{disabled:"",value:""},"qüi",-1),Ea={class:"input-group mb-3"},Va=c("span",{class:"input-group-text"},[c("small",null,"Ü")],-1),Ya={expose:[],setup(t){const a=e({from:"fÜne",to:"",value:1}),n=h((()=>F.accounts)),l=h((()=>F.accounts));return(e,t)=>(u(),o("div",null,[c("h4",Aa,[c(i(G),null,{default:d((()=>[Ta])),_:1}),c(i(K),null,{default:d((()=>[Sa])),_:1})]),c("form",Ma,[c("div",Da,[c("label",Oa,[c(i(G),null,{default:d((()=>[ja])),_:1}),c(i(K),null,{default:d((()=>[Pa])),_:1})]),y(c("select",{"onUpdate:modelValue":t[1]||(t[1]=e=>i(a).from=e),id:"txFrom",class:"form-control"},[(u(!0),o(_,null,w(i(n),(e=>(u(),o("option",{value:e.name,key:e.name},C(e.name),9,["value"])))),128))],512),[[b,i(a).from]]),c("label",Na,[c(i(G),null,{default:d((()=>[Ua])),_:1}),c(i(K),null,{default:d((()=>[qa])),_:1})]),y(c("select",{"onUpdate:modelValue":t[2]||(t[2]=e=>i(a).to=e),id:"txTo",class:"form-control"},[c(i(G),null,{default:d((()=>[Ia])),_:1}),c(i(K),null,{default:d((()=>[La])),_:1}),(u(!0),o(_,null,w(i(l),(e=>(u(),o("option",{value:e.name,key:e.name},C(e.name),9,["value"])))),128))],512),[[b,i(a).to]])]),c("div",Ea,[y(c("input",{"onUpdate:modelValue":t[3]||(t[3]=e=>i(a).value=e),type:"number",step:"any",class:"form-control text-right"},null,512),[[x,i(a).value]]),Va,c("button",{type:"button",class:"btn btn-primary",onClick:t[4]||(t[4]=e=>i(F).doTx(i(a)))},"ök!")])])]))}};function Ra(e){return parseInt(e,10)}function Fa(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function Ja(e,t,a){var n=e.x-t.x,l=e.y-t.y,r=Math.sqrt(n*n+l*l),s=n/r,u=l/r;return{x:t.x+s*a,y:t.y+u*a}}function za(e,t){var a=e.shift();return"M"+a.x+" "+a.y+e.map((function(n,l){var r,s,u,o=e[l+1],c=e[l-1]||a,i=o&&(s=n,u=c,Ra((r=o).x+u.x)===Ra(2*s.x)&&Ra(r.y+u.y)===Ra(2*s.y));if(!o||i)return"L"+n.x+" "+n.y;var d=Math.min(Fa(c,n),Fa(o,n)),m=d/2<t?d/2:t,p=Ja(c,n,m),f=Ja(o,n,m);return"L"+p.x+" "+p.y+"S"+n.x+" "+n.y+" "+f.x+" "+f.y})).join("")}var Xa={props:["smooth","data","boundary","radius","id","max","min","color","width","dash"],render:function(){var e,t=this,a=t.data,n=t.smooth,l=t.boundary,r=t.radius,s=t.id,u=t.max,o=t.min,c=t.width,i=t.dash,d=za(function(e,t,a){var n=t.minX,l=t.minY,r=t.maxX,s=t.maxY,u=a.max,o=a.min,c=e.map((function(e){return"number"==typeof e?e:e.value})),i=Math.min.apply(Math,c.concat([o]))-.001,d=(r-n)/(c.length-1),m=(s-l)/(Math.max.apply(Math,c.concat([u]))+.001-i);return c.map((function(e,t){return{x:t*d+n,y:s-(e-i)*m+1e-5*+(t===c.length-1)-1e-5*+(0===t)}}))}(a,l,{max:u,min:o}),n?r:0);return e=this.color?this.color:"url(#"+s+")",k("path",{d:d,fill:"none",stroke:e,"stroke-width":c,"stroke-dasharray":i})}},$a={props:["boundary","max","min"],render:function(){var e=this.boundary;return[k("text",{x:e.minX,y:e.minY-2,fill:"#CCCCCC88","font-size":"0.6em"},Math.round(this.max/1e3)),k("line",{x1:e.minX,y1:e.minY,x2:e.maxX,y2:e.minY,stroke:"#CCCCCC88"}),k("text",{x:e.minX,y:e.maxY-2,fill:"#CCCCCC88","font-size":"0.6em"},Math.round(this.min/1e3)),k("line",{x1:e.minX,y1:e.maxY,x2:e.maxX,y2:e.maxY,stroke:"#CCCCCC88"})]}},Ba={props:["gradient","gradientDirection","id"],render:function(){var e=this,t=e.gradient,a=e.gradientDirection,n=e.id,l=t.length-1||1,r=t.slice().reverse().map((function(e,t){return k("stop",{offset:t/l,"stop-color":e})}));return k("defs",[k("linearGradient",{id:n,x1:+("left"===a),y1:+("top"===a),x2:+("right"===a),y2:+("bottom"===a)},r)])}},Ka={name:"Trend",props:{data:{type:Array,required:!0},autoDraw:Boolean,autoDrawDuration:{type:Number,default:2e3},autoDrawEasing:{type:String,default:"ease"},gradient:{type:Array,default:function(){return["#000"]}},gradientDirection:{type:String,default:"top"},max:{type:Number,default:-1/0},min:{type:Number,default:1/0},height:Number,width:Number,padding:{type:Number,default:8},radius:{type:Number,default:10},smooth:Boolean},watch:{data:{immediate:!0,handler:function(e){var t=this;this.$nextTick((function(){if(!t.$isServer&&t.$refs.path&&t.autoDraw){var e=t.$refs.path.$el,a=e.getTotalLength();e.style.transition="none",e.style.strokeDasharray=a+" "+a,e.style.strokeDashoffset=Math.abs(a-(t.lastLength||0)),e.getBoundingClientRect(),e.style.transition="stroke-dashoffset "+t.autoDrawDuration+"ms "+t.autoDrawEasing,e.style.strokeDashoffset=0,t.lastLength=a}}))}}},render:function(){if(this.data&&!(this.data.length<2)){var e=this.width,t=this.height,a=this.padding,n=e||300,l=t||150,r={minX:a,minY:a,maxX:n-a,maxY:l-a};return k("svg",{width:e||"100%",height:t||"25%",viewBox:"0 0 "+n+" "+l},[k(Ba,{gradient:this.gradient,gradientDirection:this.gradientDirection,id:"stats"}),k($a,{boundary:r,max:Math.max.apply(Math,this.data.concat([this.max])),min:Math.min.apply(Math,this.data.concat([this.min]))}),k(Xa,{smooth:this.smooth,data:this.data,boundary:r,radius:this.radius,max:this.max,min:this.min,id:"stats",ref:"path",width:1,dash:"0"})])}}},Ga={name:"Trends",props:{data:{type:Array,required:!0},colors:{type:Array,required:!0},min:{type:Number,default:1/0},height:Number,width:Number,padding:{type:Number,default:8},radius:{type:Number,default:10},smooth:Boolean},render:function(){if(this.data){var e=this.width,t=this.height,a=this.padding,n=e||300,l=t||200,r={minX:a,minY:a,maxX:n-a,maxY:l-a},s=1e3;for(let e=0;e<this.data.length;e++){const t=this.data[e];if(t&&t.length>1)for(let e=0;e<t.length;e++)s=Math.max(s,t[e])}var u=[];for(let e=0;e<this.data.length;e++){const t=this.data[e];t&&t.length>1&&u.push(k(Xa,{smooth:this.smooth,data:t,boundary:r,radius:this.radius,max:s,min:this.min,id:"stats",ref:"path"+e,color:this.colors[e],width:e==this.data.length-1?2:1,dash:e==this.data.length-1?"3 3":"0"}))}if(0!=u.length)return k("svg",{width:e||"100%",height:t||"25%",viewBox:"0 0 "+n+" "+l},[k($a,{boundary:r,max:s,min:this.min}),u])}}};const Wa={style:{width:"400px"}},Za={class:"text-center mb-3"},Qa=m("account"),Ha=m("compte"),en={class:"mt-3 mb-3"},tn={class:"text-center mb-6"},an={disabled:"",value:null},nn=m("whö"),ln=m("qüi"),rn={key:0},sn={class:"display-3 text-center"},un={class:"align-baseline",style:{"font-size":"50%"}},on=c("small",null," Ü",-1),cn={key:0,class:"display-5 text-center"},dn=m("bank"),mn=m("banque"),pn={key:1,class:"display-5 text-center"},fn=m("wallet"),yn=m("compte simple"),hn={key:2,class:"display-5 text-center"},gn=m("Üman"),bn=m("Ümain"),xn={class:"text-center mt-4"},vn=m("transaction"),_n=m("transaction"),wn={key:3,class:"mb-4 justify-content-center"},Cn={class:"input-group mb-3"},kn=c("small",{class:"input-group-text"},"Ü",-1),An={class:"input-group-text",for:"txTo"},Tn=m(" tö "),Sn=m(" à "),Mn={disabled:"",value:""},Dn=m("someöne"),On=m("qüi"),jn={class:"input-group"},Pn={class:"input-group-text",for:"txMessage"},Nn=m("message"),Un=m("message"),qn={class:"text-center mt-4"},In=m("stats"),Ln=m("stats"),En={class:"text-center mt-4"},Vn=m("diary"),Yn=m("journal"),Rn={class:"list-group list-group-flush",style:{"max-width":"440px"}},Fn={class:"d-flex w-100 justify-content-between"},Jn={key:0},zn={style:{width:"80px"},class:"badge bg-light text-dark text-right"},Xn=c("small",null," Ü",-1),$n={style:{width:"50px"},class:"d-inline-block text-center"},Bn=m(" to "),Kn=m(" à "),Gn={key:1},Wn={style:{width:"80px"},class:"badge bg-primary text-right"},Zn=c("small",null," Ü",-1),Qn={style:{width:"50px"},class:"d-inline-block text-center"},Hn=m(" from "),el=m(" de "),tl={expose:[],setup(t){const a=e({account:null,accounts:h((()=>F.accounts.filter((e=>"bank"!=e.role)))),otherAccounts:h((()=>F.accounts.filter((e=>"bank"!=e.role&&e.name!=a.account.name)))),stats:[],transactions:[],tx:{from:"",to:"",message:"",value:1}}),n=()=>{a.account&&(a.transactions=F.getAccountTx(a.account.name,10).reverse(),a.stats=F.getAccountStats(a.account.name,"day"))};g((()=>a.account),(()=>{n()})),g((()=>F.currency),n,{deep:!0});const l=e=>F.currencyDecimal(e).slice(-2),r=e=>{if("!1Ucreation"==e)return B({en:"> u crëate Ü!",fr:"> crëation de Ü !"});if(0==e.indexOf("!revaluation%")){let t=e.split("%")[1];return B({en:"> all the Ü melt by "+t+"%!",fr:"> tous les Ü fondent de "+t+"% !"})}return e?"> "+e:""};return(e,t)=>{return u(),o("div",Wa,[c("h4",Za,[c(i(G),null,{default:d((()=>[Qa])),_:1}),c(i(K),null,{default:d((()=>[Ha])),_:1})]),c("div",en,[c("h3",tn,[y(c("select",{"onUpdate:modelValue":t[1]||(t[1]=e=>i(a).account=e)},[c("option",an,[c(i(G),null,{default:d((()=>[nn])),_:1}),c(i(K),null,{default:d((()=>[ln])),_:1})]),(u(!0),o(_,null,w(i(a).accounts,(e=>(u(),o("option",{value:e,key:e.name},[c("strong",null,C(e.name),1)],8,["value"])))),128))],512),[[b,i(a).account]])]),i(a).account?(u(),o("div",rn,[c("div",sn,[c("span",null,C((s=i(a).account.balance,F.currencyDecimal(s).slice(0,-3))),1),c("small",un,"."+C(l(i(a).account.balance)),1),on]),"bank"==i(a).account.role?(u(),o("p",cn,[c(i(G),null,{default:d((()=>[dn])),_:1}),c(i(K),null,{default:d((()=>[mn])),_:1})])):"wallet"==i(a).account.role?(u(),o("p",pn,[c(i(G),null,{default:d((()=>[fn])),_:1}),c(i(K),null,{default:d((()=>[yn])),_:1})])):(u(),o("p",hn,[c(i(G),null,{default:d((()=>[gn])),_:1}),c(i(K),null,{default:d((()=>[bn])),_:1})])),c("h4",xn,[c(i(G),null,{default:d((()=>[vn])),_:1}),c(i(K),null,{default:d((()=>[_n])),_:1})]),"bank"==i(a).account.role||i(a).account.balance>0?(u(),o("form",wn,[c("div",null,[c("div",Cn,[y(c("input",{"onUpdate:modelValue":t[2]||(t[2]=e=>i(a).tx.value=e),type:"number",max:Math.round(i(a).account.balance/100),step:"any",min:"0",class:"form-control text-right"},null,8,["max"]),[[x,i(a).tx.value]]),kn,c("label",An,[c(i(G),null,{default:d((()=>[Tn])),_:1}),c(i(K),null,{default:d((()=>[Sn])),_:1})]),y(c("select",{"onUpdate:modelValue":t[3]||(t[3]=e=>i(a).tx.to=e),id:"txTo",class:"form-control"},[c("option",Mn,[c(i(G),null,{default:d((()=>[Dn])),_:1}),c(i(K),null,{default:d((()=>[On])),_:1})]),(u(!0),o(_,null,w(i(a).otherAccounts,(e=>(u(),o("option",{value:e.name,key:e.name},[c("strong",null,C(e.name),1)],8,["value"])))),128))],512),[[b,i(a).tx.to]]),c("button",{type:"button",class:"btn btn-primary",onClick:t[4]||(t[4]=e=>(a.tx.from=a.account.name,console.log(a.tx),F.doTx(a.tx),void n()))},"ök!")]),c("div",jn,[c("label",Pn,[c(i(G),null,{default:d((()=>[Nn])),_:1}),c(i(K),null,{default:d((()=>[Un])),_:1})]),y(c("input",{"onUpdate:modelValue":t[5]||(t[5]=e=>i(a).tx.message=e),type:"text",maxlength:"32",class:"form-control",id:"txMessage"},null,512),[[x,i(a).tx.message]])])])])):v("",!0),c("h4",qn,[c(i(G),null,{default:d((()=>[In])),_:1}),c(i(K),null,{default:d((()=>[Ln])),_:1})]),c(i(Ka),{data:i(a).stats,gradientDirection:"top",gradient:["#df691a","#a54f15","#65300d"],padding:10,radius:8,"stroke-width":1,"stroke-linecap":"butt",min:0,max:1e3,"auto-draw":"",smooth:""},null,8,["data"]),c("h4",En,[c(i(G),null,{default:d((()=>[Vn])),_:1}),c(i(K),null,{default:d((()=>[Yn])),_:1})]),c("ul",Rn,[(u(!0),o(_,null,w(i(a).transactions,(e=>{return u(),o("li",{key:e.id,class:"list-group-item list-group-item-action"},[c("div",Fn,[c("div",null,[e.from==i(a).account.name?(u(),o("h5",Jn,[c("span",zn,[m(C(i(F).currencyDecimal(e.value)),1),Xn]),c("span",$n,[c(i(G),null,{default:d((()=>[Bn])),_:1}),c(i(K),null,{default:d((()=>[Kn])),_:1})]),c("strong",null,[c("span",null,C(e.to),1)])])):(u(),o("h5",Gn,[c("span",Wn,[m(C(i(F).currencyDecimal(e.value)),1),Zn]),c("span",Qn,[c(i(G),null,{default:d((()=>[Hn])),_:1}),c(i(K),null,{default:d((()=>[el])),_:1})]),c("strong",null,[c("span",null,C(e.from),1)])])),m(" "+C(r(e.message)),1)]),c("small",null,C((t=e.day,t>=F.currency.elapsedTime?B({en:"today",fr:"aujourd'hui"}):t==F.currency.elapsedTime-1?B({en:"yesterday",fr:"hier"}):B({en:F.currency.elapsedTime-t+" days ago",fr:"il y a "+(F.currency.elapsedTime-t)+" jours"}))),1)])]);var t})),128))])])):v("",!0)])]);var s}}},al={class:"text-center mb-3"},nl=m("accounts"),ll=m("comptes"),rl={class:"table table-hover"},sl=m("stats"),ul=m("stats"),ol=m("name"),cl=m("nom"),il=m("role"),dl=m("rôle"),ml=m("balance"),pl=m("solde"),fl={class:"text-center"},yl=c("small",null,"Ü",-1),hl=m("man"),gl=c("small",null,"Ü",-1),bl=m("main"),xl=m("wället"),vl=m("sïmple"),_l={key:2,class:"btn btn-sm btn-danger",disabled:""},wl=m("bänk"),Cl=m("bänque"),kl={class:"text-right"},Al=c("small",null," Ü ",-1),Tl=m("reset"),Sl=m("raz"),Ml={class:"input-group"},Dl={value:"human"},Ol=m("Üman"),jl=m("Ümain"),Pl={value:"wallet"},Nl=m("wället"),Ul=m("sïmple"),ql=m("nëw!"),Il=m("noüveau!"),Ll={expose:[],setup(t){const a=e({onlySelected:!1,sortKey:"name",sortOrder:1,newAccount:{name:"",role:"human"}}),n=h((()=>{let e=F.accounts.filter((e=>"bank"!=e.role));return a.onlySelected&&(e=e.filter((e=>F.isSelected(e)))),e.sort(((e,t)=>{let n=e[a.sortKey],l=t[a.sortKey];return(n===l?0:n>l?1:-1)*a.sortOrder}))})),l=e=>{e==a.sortKey&&(a.sortOrder=-a.sortOrder),a.sortKey=e},r=e=>{let t="human"==e.role?"wallet":"human";F.updateAccount(e,{role:t})},s=e=>{const t=F.selectedAccounts.get(e.name);return null==t?null:t.color};return(e,t)=>(u(),o("div",null,[c("h4",al,[c(i(G),null,{default:d((()=>[nl])),_:1}),c(i(K),null,{default:d((()=>[ll])),_:1})]),c("table",rl,[c("thead",null,[c("tr",null,[c("th",{onClick:t[1]||(t[1]=e=>i(a).onlySelected=!i(a).onlySelected),class:[{"bg-primary":i(a).onlySelected},"pointer"],style:{width:"25px"}},[c(i(G),null,{default:d((()=>[sl])),_:1}),c(i(K),null,{default:d((()=>[ul])),_:1})],2),c("th",{onClick:t[2]||(t[2]=e=>l("name")),class:"pointer"},[c(i(G),null,{default:d((()=>[ol])),_:1}),c(i(K),null,{default:d((()=>[cl])),_:1})]),c("th",{onClick:t[3]||(t[3]=e=>l("role")),class:"text-center pointer"},[c(i(G),null,{default:d((()=>[il])),_:1}),c(i(K),null,{default:d((()=>[dl])),_:1})]),c("th",{onClick:t[4]||(t[4]=e=>l("balance")),class:"text-right pointer"},[c(i(G),null,{default:d((()=>[ml])),_:1}),c(i(K),null,{default:d((()=>[pl])),_:1})])])]),c("tbody",null,[(u(!0),o(_,null,w(i(n),(e=>(u(),o("tr",{key:e.name},[c("td",{style:{"background-color":s(e)},onClick:t=>i(F).select(e),class:"pointer"},null,12,["onClick"]),c("td",{onClick:t=>i(F).select(e),class:"pointer"},C(e.name),9,["onClick"]),c("td",fl,["human"==e.role?(u(),o("button",{key:0,class:"btn btn-sm btn-primary",onClick:t=>r(e)},[c(i(G),null,{default:d((()=>[yl,hl])),_:1}),c(i(K),null,{default:d((()=>[gl,bl])),_:1})],8,["onClick"])):"wallet"==e.role?(u(),o("button",{key:1,class:"btn btn-sm btn-secondary",onClick:t=>r(e)},[c(i(G),null,{default:d((()=>[xl])),_:1}),c(i(K),null,{default:d((()=>[vl])),_:1})],8,["onClick"])):(u(),o("button",_l,[c(i(G),null,{default:d((()=>[wl])),_:1}),c(i(K),null,{default:d((()=>[Cl])),_:1})]))]),c("td",kl,["bank"!=e.role?(u(),o(_,{key:0},[c("strong",null,[m(C(i(F).currencyDecimal(e.balance)),1),Al]),c("a",{href:"#",onClick:A((t=>(e=>{F.updateAccount(e,{balance:0})})(e)),["stop","prevent"]),class:"mx-2"},[c(i(G),null,{default:d((()=>[Tl])),_:1}),c(i(K),null,{default:d((()=>[Sl])),_:1})],8,["onClick"])],64)):v("",!0),e.name!=i(F).name?(u(),o("a",{key:1,href:"#",onClick:A((t=>(e=>{const t=e.name;confirm(B({fr:"êtes vous sûr de supprimer "+t+" ?",en:"Are you sure to delete "+t+"?"}))&&F.deleteAccount(e)})(e)),["stop","prevent"])},"x",8,["onClick"])):v("",!0)])])))),128))])]),c("div",Ml,[y(c("input",{placeholder:i(B)({en:"näme",fr:"nöm"}),"onUpdate:modelValue":t[5]||(t[5]=e=>i(a).newAccount.name=e),type:"text",class:"form-control",id:"accountName",maxlength:"10"},null,8,["placeholder"]),[[x,i(a).newAccount.name]]),y(c("select",{"onUpdate:modelValue":t[6]||(t[6]=e=>i(a).newAccount.role=e),class:"mr-3"},[c("option",Dl,[c(i(G),null,{default:d((()=>[Ol])),_:1}),c(i(K),null,{default:d((()=>[jl])),_:1})]),c("option",Pl,[c(i(G),null,{default:d((()=>[Nl])),_:1}),c(i(K),null,{default:d((()=>[Ul])),_:1})])],512),[[b,i(a).newAccount.role]]),c("button",{type:"button",disabled:3>i(a).newAccount.name.length||i(F).accounts.some((e=>e.name==i(a).newAccount.name)),class:"btn btn-primary",onClick:t[7]||(t[7]=e=>(a.newAccount.name=a.newAccount.name.trim(),void F.createAccount(a.newAccount)))},[c(i(G),null,{default:d((()=>[ql])),_:1}),c(i(K),null,{default:d((()=>[Il])),_:1})],8,["disabled"])])]))}},El={class:"text-center mb-3"},Vl=m("stats"),Yl=m("stats"),Rl={class:"mx-3 d-flex justify-content-between"},Fl={class:"input-group w-auto"},Jl=c("label",{class:"input-group-text"}," 100 ",-1),zl={value:"day"},Xl=m("days"),$l=m("jours"),Bl={value:"month"},Kl=m("months"),Gl=m("mois"),Wl={value:"year"},Zl=m("years"),Ql=m("années"),Hl={class:"ms-auto w-auto input-group"},er={class:"input-group-text"},tr=m("referential"),ar=m("référentiel"),nr={value:"relative"},lr=m("relative"),rr=m("relatif"),sr={value:"quantitative"},ur=m("quantitative"),or=m("quantitatif"),cr={value:"average"},ir=m("average"),dr=m("moyenne"),mr={expose:[],setup(t){const a=e({referential:"relative",statType:"day",stats:[],colors:[]}),l=()=>{let e=F.getAccountStats(F.name,a.statType),t=null,n=[],l=[];F.selectedAccounts.forEach(((r,s)=>{if(s!=F.name&&(t=F.getAccountStats(s,a.statType),t)){if("average"==a.referential)for(let a=0;a<t.length;a++)t[a]=0==e[a].average?0:t[a]/e[a].average*1e5;else if("quantitative"==a.referential)for(let a=0;a<t.length;a++)t[a]=t[a]*e[a].quantitative;n.push(t),l.push(r.color)}})),"average"==a.referential?t=new Array(e.length).fill(1e5):"relative"==a.referential?t=e.map((e=>e.average)):"quantitative"==a.referential&&(t=e.map((e=>e.average*e.quantitative))),n.push(t),l.push(F.selectedAccounts.get(F.name).color),a.stats=n,a.colors=l};return g((()=>F.selectedAccounts),l,{deep:!0}),g((()=>F.currency),l,{deep:!0}),g((()=>a.referential),l),g((()=>a.statType),l),n(l),(e,t)=>(u(),o("div",null,[c("h4",El,[c(i(G),null,{default:d((()=>[Vl])),_:1}),c(i(K),null,{default:d((()=>[Yl])),_:1})]),c(i(Ga),{data:i(a).stats,colors:i(a).colors,padding:10,radius:8,"stroke-width":1,"stroke-linecap":"butt",min:0,"auto-draw":"",smooth:""},null,8,["data","colors"]),c("div",Rl,[c("div",Fl,[Jl,y(c("select",{"onUpdate:modelValue":t[1]||(t[1]=e=>i(a).statType=e)},[c("option",zl,[c(i(G),null,{default:d((()=>[Xl])),_:1}),c(i(K),null,{default:d((()=>[$l])),_:1})]),c("option",Bl,[c(i(G),null,{default:d((()=>[Kl])),_:1}),c(i(K),null,{default:d((()=>[Gl])),_:1})]),c("option",Wl,[c(i(G),null,{default:d((()=>[Zl])),_:1}),c(i(K),null,{default:d((()=>[Ql])),_:1})])],512),[[b,i(a).statType]])]),c("div",Hl,[c("label",er,[c(i(G),null,{default:d((()=>[tr])),_:1}),c(i(K),null,{default:d((()=>[ar])),_:1})]),y(c("select",{"onUpdate:modelValue":t[2]||(t[2]=e=>i(a).referential=e)},[c("option",nr,[c(i(G),null,{default:d((()=>[lr])),_:1}),c(i(K),null,{default:d((()=>[rr])),_:1})]),c("option",sr,[c(i(G),null,{default:d((()=>[ur])),_:1}),c(i(K),null,{default:d((()=>[or])),_:1})]),c("option",cr,[c(i(G),null,{default:d((()=>[ir])),_:1}),c(i(K),null,{default:d((()=>[dr])),_:1})])],512),[[b,i(a).referential]])])])]))}},pr={class:"container"},fr=c("h1",{class:"display-1 text-center mb-5"},[c("img",{src:"/favicon64x64.png"}),c("span",{class:"align-middle"},[m(" f"),c("small",null,"Ü"),m("ne")])],-1),yr={class:"lead text-center mb-3"},hr=c("strong",null,[m("f"),c("small",null,"Ü"),m("ne")],-1),gr=m(" is a web app to test and play with a simple "),br=c("a",{href:"https://libre-currency.org"},"Libre Currency",-1),xr=m(" called "),vr=c("strong",null,[m("f"),c("small",null,"Ü"),m("ne")],-1),_r=m(" (pronounced /fən/ like fun) "),wr=c("strong",null,[m("f"),c("small",null,"Ü"),m("ne")],-1),Cr=m(" est une appli web qui permet de jouer avec une simple "),kr=c("a",{href:"https://monnaie-libre.fr/"},"Monnaie Libre",-1),Ar=m(" appelée "),Tr=c("strong",null,[m("f"),c("small",null,"Ü"),m("ne")],-1),Sr=m(" (prononcée /fən/ comme fun en anglais) "),Mr={class:"lead text-center mb-5"},Dr=m(" a "),Or=c("small",null,"Ü",-1),jr=m("man account create some new "),Pr=c("small",null,"Ü",-1),Nr=m(" (the "),Ur=c("small",null,"Ü",-1),qr=m("nit of the f"),Ir=c("small",null,"Ü",-1),Lr=m("ne currency) each day"),Er=c("br",null,null,-1),Vr=c("small",null,[m("old created "),c("strong",null,[c("small",null,"Ü"),m("nits")]),m(" melt by a given percentage each "),c("strong",null,"revaluation period")],-1),Yr=c("br",null,null,-1),Rr=m(" un compte "),Fr=c("small",null,"Ü",-1),Jr=m("main crée de nouvelles "),zr=c("small",null,"Ü",-1),Xr=m(" (l'"),$r=c("small",null,"Ü",-1),Br=m("nité de la monnaie f"),Kr=c("small",null,"Ü",-1),Gr=m("ne) chaque jour"),Wr=c("br",null,null,-1),Zr=c("small",null,[m("les anciennes "),c("strong",null,[c("small",null,"Ü"),m("nités")]),m(" fondent d'un certain pourcentage à chaque "),c("strong",null,"période de réévaluation")],-1),Qr=c("br",null,null,-1),Hr={class:"d-flex align-items-start flex-wrap mt-3",style:{"justify-content":"space-evenly"}};let es=JSON.parse(localStorage.getItem("state"));window.location.hash&&(es||(es={currency:{}}),Object.assign(es.currency,(e=>{const t=new URLSearchParams(e);return{mode:"grew"==t.get("m")?"grew":"melt",expression:t.get("e"),uPerDay:parseInt(t.get("upd")),revaluationTime:parseInt(t.get("rt")),stepTime:parseInt(t.get("st"))}})(window.location.hash.substring(1)))),F.restoreState(es);var ts={mounted:(e,t)=>{if("function"!=typeof t.value)return;let a=null,n=null;const l=e=>{console.log("start "+e.type),"click"===e.type&&0!==e.button||(e.preventDefault(),null===a&&(s(),a=setTimeout((()=>{n=setInterval((()=>{s()}),50),s()}),200)))},r=()=>{null!==a&&(clearTimeout(a),a=null),n&&(clearInterval(n),n=null)},s=e=>{t.value(e)};["mousedown","touchstart"].forEach((t=>e.addEventListener(t,l))),["click","mouseout","touchend","touchcancel"].forEach((t=>e.addEventListener(t,r)))}};T({expose:[],setup(e){const t=()=>{localStorage.setItem("state",JSON.stringify(F.getState()))};g((()=>F.currency),(()=>{window.location.hash="#"+(e=>{const t=new URLSearchParams;return t.append("e",e.expression),t.append("m",e.mode),t.append("upd",e.uPerDay),t.append("rt",e.revaluationTime),t.append("st",e.stepTime),t.toString()})(F.currency),t()})),g((()=>F.selectedAccounts),t,{deep:!0});const a=[];return F.accounts.length<=1&&(a.push({name:"Alice",balance:1e4,role:"human"}),a.push({name:"Bob",balance:2e4,role:"human"}),a.push({name:"Carole",balance:0,role:"human"})),(e,t)=>(u(),o(_,null,[c("div",pr,[fr,c("p",yr,[c(i(G),null,{default:d((()=>[hr,gr,br,xr,vr,_r])),_:1}),c(i(K),null,{default:d((()=>[wr,Cr,kr,Ar,Tr,Sr])),_:1})]),c("p",Mr,[c(i(G),null,{default:d((()=>[Dr,Or,jr,Pr,Nr,Ur,qr,Ir,Lr,Er,Vr,Yr])),_:1}),c(i(K),null,{default:d((()=>[Rr,Fr,Jr,zr,Xr,$r,Br,Kr,Gr,Wr,Zr,Qr])),_:1})])]),c(z,{accounts:a,selectedAccounts:a},{default:d((()=>[c(Pe,{class:"mx-auto",style:{"max-width":"400px"}}),c(ze,{class:"mx-auto sticky-top"}),c("div",Hr,[c("div",null,[c(mr,{class:"mb-5",style:{"min-width":"33vw"}}),c(Ll,{class:"mb-5 mx-auto",style:{"max-width":"450px"}})]),c("div",null,[c(ka,{class:"mb-5 mx-auto",style:{"max-width":"350px"}}),c(Ya,{class:"mb-5 mx-auto",style:{"max-width":"450px"}})]),c(tl,{class:"mb-5 mx-3"})])])),_:1})],64))}}).directive("longclick",ts).mount("#app");
